<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>헤드폰 아이콘 클릭 디버깅 가이드</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .code { background: #f4f4f4; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        h2 { border-bottom: 2px solid #333; padding-bottom: 10px; }
    </style>
</head>
<body>
    <h1>🎧 헤드폰 아이콘 클릭 문제 디버깅 가이드</h1>

    <h2>1. 브라우저 콘솔 확인 사항</h2>
    <p>F12를 눌러 개발자 도구를 열고 Console 탭에서 다음을 확인하세요:</p>

    <div class="code">
        <p class="success">✅ 정상 메시지:</p>
        <ul>
            <li>jQuery 버전: 3.6.0 (또는 다른 버전)</li>
            <li>Document ready - 헤드폰 아이콘 이벤트 바인딩 시작</li>
            <li>발견된 헤드폰 아이콘 수: [숫자]</li>
            <li>헤드폰 아이콘 이벤트 리스너 등록 완료</li>
        </ul>

        <p class="error">❌ 오류 메시지 확인:</p>
        <ul>
            <li>jQuery가 로드되지 않았습니다</li>
            <li>Uncaught ReferenceError</li>
            <li>기타 JavaScript 오류</li>
        </ul>
    </div>

    <h2>2. 헤드폰 아이콘 확인</h2>
    <p>콘솔에서 다음 명령어를 실행하여 아이콘 존재를 확인:</p>

    <div class="code">
        <pre>
// 헤드폰 아이콘 개수 확인
$('.generate-audio-icon').length

// 헤드폰 아이콘 정보 출력
$('.generate-audio-icon').each(function() {
    console.log('Contents ID:', $(this).data('contentsid'));
    console.log('Element:', this);
});
        </pre>
    </div>

    <h2>3. 클릭 테스트</h2>
    <p>다음 방법으로 클릭을 테스트하세요:</p>

    <div class="code">
        <h3>방법 1: 직접 클릭</h3>
        <ol>
            <li>페이지에서 파란색 🎧 아이콘을 찾습니다</li>
            <li>마우스를 올리면 크기가 커지고 색이 진해집니다</li>
            <li>클릭하면 "나레이션 생성" 확인 대화상자가 나타납니다</li>
        </ol>

        <h3>방법 2: 콘솔에서 테스트</h3>
        <pre>
// 첫 번째 아이콘 강제 클릭
$('.generate-audio-icon').first().click();

// 또는 직접 함수 호출 (Contents ID를 알 경우)
handleAudioGeneration(1);
        </pre>
    </div>

    <h2>4. 문제 해결 방법</h2>

    <div class="code">
        <h3 class="warning">⚠️ 클릭이 안 되는 경우:</h3>

        <p><strong>원인 1: jQuery 충돌</strong></p>
        <pre>
// 콘솔에서 확인
console.log(typeof jQuery);
console.log(typeof $);
        </pre>

        <p><strong>원인 2: 다른 요소가 가로막는 경우</strong></p>
        <pre>
// 클릭 가능 여부 확인
$('.generate-audio-icon').css({
    'background': 'yellow',
    'padding': '5px',
    'border': '2px solid red'
});
        </pre>

        <p><strong>원인 3: 이벤트 리스너 미등록</strong></p>
        <pre>
// 이벤트 리스너 확인
var events = $._data($('.generate-audio-icon')[0], 'events');
console.log(events);
        </pre>
    </div>

    <h2>5. 수동 테스트 절차</h2>
    <ol>
        <li>브라우저 캐시 지우기 (Ctrl+Shift+Delete)</li>
        <li>페이지 새로고침 (F5)</li>
        <li>개발자 도구 열기 (F12)</li>
        <li>Console 탭에서 오류 확인</li>
        <li>헤드폰 아이콘 클릭</li>
        <li>콘솔에 출력되는 메시지 확인:
            <ul>
                <li>"handleAudioGeneration 호출됨. Contents ID: [번호]"</li>
                <li>"헤드폰 아이콘 클릭됨!"</li>
                <li>"네이티브 JS로 헤드폰 아이콘 클릭 감지!"</li>
            </ul>
        </li>
    </ol>

    <h2>6. API 키 확인</h2>
    <p>나레이션 생성이 실패하는 경우:</p>
    <div class="code">
        <ol>
            <li><code>api_config.php</code> 파일에서 API 키 확인</li>
            <li>'YOUR-NEW-API-KEY-HERE'를 실제 OpenAI API 키로 교체</li>
            <li><a href="https://platform.openai.com/api-keys" target="_blank">OpenAI 대시보드</a>에서 새 키 발급</li>
        </ol>
    </div>

    <h2>7. 정상 작동 확인</h2>
    <div class="code success">
        <p>✅ 모든 것이 정상적으로 작동하면:</p>
        <ol>
            <li>헤드폰 아이콘이 파란색으로 표시됨</li>
            <li>마우스 오버 시 크기가 커짐</li>
            <li>클릭 시 확인 대화상자 표시</li>
            <li>"생성" 클릭 시 로딩 표시</li>
            <li>성공 시 "나레이션 생성 완료!" 메시지</li>
            <li>페이지 자동 새로고침</li>
            <li>오디오 플레이어 표시</li>
        </ol>
    </div>
</body>
</html>