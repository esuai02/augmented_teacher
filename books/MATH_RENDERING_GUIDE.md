# ìˆ˜ì‹ ë Œë”ë§ ê°€ì´ë“œ - MathJax LaTeX í‘œê¸°ë²•

## ğŸ“ ê°œìš”

ì•ˆì •ì ì¸ ìˆ˜ì‹ ë Œë”ë§ì„ ìœ„í•´ **MathJax 3.x**ë¥¼ ì‚¬ìš©í•˜ë©°, **ë‹¨ì¼ í‘œê¸°ë²•**ë§Œ í—ˆìš©í•©ë‹ˆë‹¤.

### âœ… í—ˆìš©ë˜ëŠ” í‘œê¸°ë²• (ONLY)

| ìš©ë„ | í‘œê¸°ë²• | ì˜ˆì‹œ |
|------|--------|------|
| **ì¸ë¼ì¸ ìˆ˜ì‹** | `\( ... \)` | `\(x^2 + 1\)` |
| **ë””ìŠ¤í”Œë ˆì´ ìˆ˜ì‹** | `\[ ... \]` | `\[\frac{a}{b}\]` |

### âŒ ê¸ˆì§€ëœ í‘œê¸°ë²•

- `$` ë° `$$` (TeX ìŠ¤íƒ€ì¼)
- `\begin{}` ë° `\end{}` (í™˜ê²½ ë¸”ë¡)
- HTML íƒœê·¸ ë‚´ë¶€ ìˆ˜ì‹
- ê¸°íƒ€ ë¹„í‘œì¤€ êµ¬ë¬¸

## ğŸ”§ ì‹œìŠ¤í…œ êµ¬ì„±

### 1. MathJax ì„¤ì • (drillingmath.php)

```javascript
MathJax = {
    tex: {
        inlineMath: [['\\(', '\\)']],     // ì¸ë¼ì¸ ì „ìš©
        displayMath: [['\\[', '\\]']],    // ë””ìŠ¤í”Œë ˆì´ ì „ìš©
        processEscapes: true,             // ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬
        processEnvironments: true         // í™˜ê²½ ì²˜ë¦¬
    },
    options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
};
```

### 2. CDN ë¡œë“œ

```html
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
```

### 3. ë™ì  ë Œë”ë§

```javascript
// AI ìƒì„± í›„ ìë™ ë Œë”ë§
if (typeof MathJax !== 'undefined') {
    MathJax.typesetPromise([element]).catch(function(err) {
        console.error('MathJax error:', err);
    });
}
```

## ğŸ“ AI í”„ë¡¬í”„íŠ¸ ê·œì¹™

### System Prompt (ê³µí†µ)

```
**ìˆ˜ì‹ í‘œê¸°ë²• ê·œì¹™ (ë°˜ë“œì‹œ ì¤€ìˆ˜):**
1. ì¸ë¼ì¸ ìˆ˜ì‹: \( ìˆ˜ì‹ \) í˜•íƒœë§Œ ì‚¬ìš© (ì˜ˆ: \(x^2 + 1\))
2. ë””ìŠ¤í”Œë ˆì´ ìˆ˜ì‹: \[ ìˆ˜ì‹ \] í˜•íƒœë§Œ ì‚¬ìš© (ì˜ˆ: \[\frac{a}{b}\])
3. ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€: $, $$, \begin{}, \end{}
4. ë¶„ìˆ˜: \frac{ë¶„ì}{ë¶„ëª¨}
5. ì œê³±/ì²¨ì: x^2, x_n
6. ê·¸ë¦¬ìŠ¤ ë¬¸ì: \alpha, \beta, \theta ë“±
7. ì—°ì‚°ì: \times, \div, \pm, \neq, \leq, \geq
8. ì˜ˆì‹œ: "ì´ì°¨ë°©ì •ì‹ \(ax^2 + bx + c = 0\)ì˜ í•´ëŠ” \[x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}\]ì…ë‹ˆë‹¤."
```

### ì ìš© íŒŒì¼

1. **generate_detailed_thinking.php** (ë¼ì¸ 66-76)
   - "ìì„¸íˆ ìƒê°í•˜ê¸°" ìƒì„± ì‹œ ì ìš©

2. **get_additional_answer.php** (ë¼ì¸ 56-66)
   - ì¶”ê°€ ì§ˆë¬¸ ë‹µë³€ ìƒì„± ì‹œ ì ìš©

## ğŸ“ LaTeX ëª…ë ¹ì–´ ì°¸ì¡°

### ê¸°ë³¸ ìˆ˜ì‹

| ëª…ë ¹ì–´ | ì„¤ëª… | ì˜ˆì‹œ | ë Œë”ë§ |
|--------|------|------|--------|
| `\frac{a}{b}` | ë¶„ìˆ˜ | `\(\frac{1}{2}\)` | Â½ |
| `x^2` | ì œê³± | `\(x^2\)` | xÂ² |
| `x_n` | ì²¨ì | `\(x_n\)` | xâ‚™ |
| `\sqrt{x}` | ì œê³±ê·¼ | `\(\sqrt{4}\)` | âˆš4 |
| `\sqrt[n]{x}` | nì œê³±ê·¼ | `\(\sqrt[3]{8}\)` | âˆ›8 |

### ê·¸ë¦¬ìŠ¤ ë¬¸ì

| ëª…ë ¹ì–´ | ë Œë”ë§ | ëª…ë ¹ì–´ | ë Œë”ë§ |
|--------|--------|--------|--------|
| `\alpha` | Î± | `\beta` | Î² |
| `\gamma` | Î³ | `\delta` | Î´ |
| `\theta` | Î¸ | `\pi` | Ï€ |
| `\lambda` | Î» | `\mu` | Î¼ |
| `\sigma` | Ïƒ | `\omega` | Ï‰ |

### ì—°ì‚°ì

| ëª…ë ¹ì–´ | ì„¤ëª… | ë Œë”ë§ |
|--------|------|--------|
| `\times` | ê³±í•˜ê¸° | Ã— |
| `\div` | ë‚˜ëˆ„ê¸° | Ã· |
| `\pm` | í”ŒëŸ¬ìŠ¤ë§ˆì´ë„ˆìŠ¤ | Â± |
| `\neq` | ê°™ì§€ ì•ŠìŒ | â‰  |
| `\leq` | ì‘ê±°ë‚˜ ê°™ìŒ | â‰¤ |
| `\geq` | í¬ê±°ë‚˜ ê°™ìŒ | â‰¥ |
| `\approx` | ê·¼ì‚¬ | â‰ˆ |
| `\equiv` | í•©ë™ | â‰¡ |

### í•¨ìˆ˜

| ëª…ë ¹ì–´ | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|
| `\sin` | ì‚¬ì¸ | `\(\sin x\)` |
| `\cos` | ì½”ì‚¬ì¸ | `\(\cos x\)` |
| `\tan` | íƒ„ì  íŠ¸ | `\(\tan x\)` |
| `\log` | ë¡œê·¸ | `\(\log_2 x\)` |
| `\ln` | ìì—°ë¡œê·¸ | `\(\ln x\)` |
| `\lim` | ê·¹í•œ | `\(\lim_{x \to 0}\)` |
| `\sum` | í•© | `\(\sum_{i=1}^n\)` |
| `\int` | ì ë¶„ | `\(\int_a^b\)` |

### ê´„í˜¸

| ëª…ë ¹ì–´ | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|
| `\left( ... \right)` | ìë™ í¬ê¸° ì¡°ì ˆ ê´„í˜¸ | `\(\left(\frac{a}{b}\right)\)` |
| `\left[ ... \right]` | ëŒ€ê´„í˜¸ | `\(\left[x\right]\)` |
| `\left\{ ... \right\}` | ì¤‘ê´„í˜¸ | `\(\left\{x\right\}\)` |

## ğŸ“‹ ì˜ˆì‹œ

### ì¸ë¼ì¸ ìˆ˜ì‹ (ë¬¸ì¥ ë‚´)

**ì…ë ¥:**
```
ë‹¤í•­ì‹ \(x^2 + 2x + 1\)ì€ \((x+1)^2\)ìœ¼ë¡œ ì¸ìˆ˜ë¶„í•´ë©ë‹ˆë‹¤.
```

**ì¶œë ¥:**
ë‹¤í•­ì‹ (xÂ² + 2x + 1)ì€ (x+1)Â²ìœ¼ë¡œ ì¸ìˆ˜ë¶„í•´ë©ë‹ˆë‹¤.

### ë””ìŠ¤í”Œë ˆì´ ìˆ˜ì‹ (ì¤‘ì•™ ì •ë ¬)

**ì…ë ¥:**
```
ì´ì°¨ë°©ì •ì‹ì˜ í•´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
\[x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}\]
```

**ì¶œë ¥:**
ì´ì°¨ë°©ì •ì‹ì˜ í•´ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

$$x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$$

### ë³µì¡í•œ ìˆ˜ì‹

**ì…ë ¥:**
```
ë‹¤ìŒ ê·¹í•œê°’ì„ êµ¬í•˜ì„¸ìš”:
\[\lim_{x \to 0} \frac{\sin x}{x} = 1\]
```

**ì¶œë ¥:**
ë‹¤ìŒ ê·¹í•œê°’ì„ êµ¬í•˜ì„¸ìš”:

$$\lim_{x \to 0} \frac{\sin x}{x} = 1$$

## ğŸ” ë””ë²„ê¹…

### ë Œë”ë§ ì‹¤íŒ¨ ì‹œ í™•ì¸ ì‚¬í•­

1. **ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸**
   ```javascript
   console.log('MathJax loaded:', typeof MathJax !== 'undefined');
   ```

2. **í‘œê¸°ë²• í™•ì¸**
   - `$` ëŒ€ì‹  `\(`ì™€ `\)` ì‚¬ìš© í™•ì¸
   - ì´ìŠ¤ì¼€ì´í”„ ë¬¸ì `\` ì œëŒ€ë¡œ ì…ë ¥ í™•ì¸

3. **HTML ì´ìŠ¤ì¼€ì´í”„ í™•ì¸**
   - PHPì—ì„œ ì¶œë ¥ ì‹œ `htmlspecialchars()` ì‚¬ìš© ì£¼ì˜
   - JavaScriptì—ì„œ `innerHTML` ì‚¬ìš© ê¶Œì¥

4. **MathJax ë¡œë“œ í™•ì¸**
   ```javascript
   MathJax.typesetPromise([element]).then(() => {
       console.log('Rendering complete');
   }).catch((err) => {
       console.error('Rendering failed:', err);
   });
   ```

## ğŸš¨ ì£¼ì˜ì‚¬í•­

### 1. PHP ë¬¸ìì—´ ì²˜ë¦¬

**ì˜ëª»ëœ ì˜ˆ:**
```php
$formula = "\(x^2\)";  // \ ê°€ ì´ìŠ¤ì¼€ì´í”„ë¨
```

**ì˜¬ë°”ë¥¸ ì˜ˆ:**
```php
$formula = "\\(x^2\\)";  // \\ ì‚¬ìš©
$formula = '\(x^2\)';    // ì‘ì€ë”°ì˜´í‘œ ì‚¬ìš©
```

### 2. JSON ì „ì†¡

**ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸**
```php
echo json_encode(array(
    'formula' => '\\(x^2 + 1\\)'
), JSON_UNESCAPED_UNICODE);
```

**í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì‹ **
```javascript
// JSONì€ ìë™ìœ¼ë¡œ ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬ë¨
const data = await response.json();
element.innerHTML = data.formula; // \(x^2 + 1\) ë¡œ ë Œë”ë§
```

### 3. ë™ì  ìƒì„± ì‹œ

**í•­ìƒ ë Œë”ë§ í˜¸ì¶œ í•„ìš”:**
```javascript
element.innerHTML = mathContent;
if (typeof MathJax !== 'undefined') {
    MathJax.typesetPromise([element]);
}
```

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

êµ¬í˜„ ì™„ë£Œ í™•ì¸:

- [x] MathJax 3.x CDN ë¡œë“œ
- [x] `\(` ë° `\[` í‘œê¸°ë²•ë§Œ í—ˆìš© ì„¤ì •
- [x] AI ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ê·œì¹™ ì¶”ê°€
- [x] ë™ì  ìƒì„± í›„ `MathJax.typesetPromise()` í˜¸ì¶œ
- [x] ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…
- [ ] ì‹¤ì œ í…ŒìŠ¤íŠ¸ (ë‹¤ì–‘í•œ ìˆ˜ì‹)
- [ ] ë¸Œë¼ìš°ì € í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸ (Chrome, Firefox, Safari, Edge)
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [MathJax ê³µì‹ ë¬¸ì„œ](https://docs.mathjax.org/en/latest/)
- [LaTeX ìˆ˜í•™ ëª…ë ¹ì–´](https://en.wikibooks.org/wiki/LaTeX/Mathematics)
- [MathJax v3 ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ](https://docs.mathjax.org/en/latest/upgrading/v2.html)

---

**ì‘ì„±ì¼:** 2025-01-25
**ë²„ì „:** 1.0
**ì—…ë°ì´íŠ¸ í•„ìš”:** ìƒˆë¡œìš´ ìˆ˜ì‹ íŒ¨í„´ ì¶”ê°€ ì‹œ
