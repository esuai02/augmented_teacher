# 위험 제거 프로세스 실행 가이드

**작성일**: 2025-01-27  
**관련 문서**: `RISK_ASSESSMENT_REPORT.md`, `risk_mitigation_process.yaml`

---

## 📋 개요

`risk_mitigation_process.yaml` 파일은 AI가 위험 요소를 체계적으로 제거하기 위한 단계별 프로세스를 정의합니다. 이 문서는 YAML 파일의 구조와 사용 방법을 설명합니다.

---

## 🎯 파일 구조

### 1. 메타데이터
```yaml
version: "1.0"
created_date: "2025-01-27"
description: "21개 에이전트 기반 AI 튜터 시스템의 위험 요소 제거 프로세스"
```

### 2. 실행 설정
```yaml
execution:
  max_parallel_tasks: 3      # 동시 실행 가능한 최대 작업 수
  retry_on_failure: true     # 실패 시 재시도 여부
  max_retries: 3            # 최대 재시도 횟수
  rollback_on_failure: true # 실패 시 롤백 여부
```

### 3. 위험 요소 작업 정의
각 위험 요소는 다음과 같은 구조로 정의됩니다:

```yaml
- id: "P0-001"                    # 고유 ID
  priority: "P0"                  # 우선순위 (P0/P1/P2)
  title: "작업 제목"
  description: "작업 설명"
  deadline_days: 7                 # 마감일 (일 단위)
  status: "pending"                # 상태 (pending/in_progress/completed/failed)
  depends_on: []                   # 의존성 작업 ID 목록
  
  steps:                           # 단계별 작업
    - step: 1
      name: "단계 이름"
      action: "extract"            # 작업 유형 (extract/analyze/create/modify/integrate)
      inputs:                      # 입력 파일/데이터
      outputs:                     # 출력 파일/결과
      validation:                   # 검증 기준
```

---

## 🔧 작업 유형 (Action Types)

### 1. `extract` - 데이터 추출
- **용도**: 파일에서 특정 패턴 추출
- **예시**: `data_based_questions.js`에서 `dataSources` 배열 추출
- **출력**: JSON 파일

### 2. `analyze` - 분석
- **용도**: 데이터 분석 및 패턴 식별
- **예시**: DB 스키마 분석, 의존성 그래프 분석
- **출력**: 분석 결과 JSON

### 3. `create` - 생성
- **용도**: 새 파일/클래스/스크립트 생성
- **예시**: `DataSourceValidator` 클래스 생성
- **출력**: 생성된 파일

### 4. `modify` - 수정
- **용도**: 기존 파일 수정
- **예시**: `orchestrator.php`에 검증 로직 추가
- **출력**: 수정된 파일

### 5. `integrate` - 통합
- **용도**: 여러 파일에 동일한 로직 통합
- **예시**: 모든 에이전트의 `data.php`에 검증 로직 추가
- **출력**: 수정된 파일 목록

---

## 📊 실행 순서

YAML 파일은 3단계로 나뉩니다:

### Phase 1: 즉시 조치 (1주일 내)
- **P0-001**: 데이터 소스 검증 시스템 구축
- **P0-002**: 온톨로지 자동 생성 메커니즘 구축
- **P0-003**: 에이전트 실행 순서 및 의존성 관리 시스템 구축

### Phase 2: 단기 조치 (1개월 내)
- **P1-004**: 실시간 트리거 락 메커니즘 구현
- **P1-005**: 데이터 소스 매핑 검증 스크립트 생성
- **P1-006**: 에러 처리 및 복구 메커니즘 강화

### Phase 3: 중장기 조치 (3개월 내)
- **P2-007**: 성능 최적화
- **P2-008**: 온톨로지 일관성 검증 시스템
- **P2-009**: 데이터 프라이버시 및 보안 강화

---

## 🚀 사용 방법

### 1. AI에게 작업 요청

```
@risk_mitigation_process.yaml 파일을 참조하여 P0-001 작업을 실행해줘.
```

### 2. 특정 단계만 실행

```
P0-001의 step 1만 실행해줘.
```

### 3. 전체 Phase 실행

```
Phase 1의 모든 작업을 순차적으로 실행해줘.
```

### 4. 검증만 실행

```
P0-001 작업의 모든 검증 단계를 실행해줘.
```

---

## ✅ 검증 프로세스

각 작업은 다음 단계로 검증됩니다:

1. **입력 검증**: 필요한 파일/데이터가 존재하는지 확인
2. **실행 검증**: 작업이 성공적으로 완료되었는지 확인
3. **출력 검증**: 생성된 파일/결과가 올바른지 확인
4. **테스트 실행**: 관련 테스트 스크립트 실행

---

## 🔄 롤백 전략

작업 실패 시 자동 롤백:

1. **백업 복원**: 변경 전 백업 파일 복원
2. **생성 파일 삭제**: 새로 생성된 파일 삭제
3. **상태 복원**: 데이터베이스 상태 복원 (필요 시)

---

## 📝 작업 상태 관리

각 작업의 상태는 다음과 같이 변경됩니다:

- `pending` → `in_progress` → `completed`
- `pending` → `in_progress` → `failed` → `pending` (재시도)

---

## 🎯 예시: P0-001 작업 실행

### Step 1: 데이터 소스 추출
```bash
# AI가 자동으로 실행
1. data_based_questions.js 파일 읽기
2. dataSources 패턴 매칭
3. JSON 파일로 추출
4. 검증: 모든 에이전트의 dataSources 추출 확인
```

### Step 2: DB 스키마 분석
```bash
# AI가 자동으로 실행
1. systemdata.md 파일 읽기
2. DB 테이블 구조 분석
3. 필드 매핑 JSON 생성
4. 검증: 모든 테이블/필드 매핑 확인
```

### Step 3: 매핑 불일치 검사
```bash
# AI가 자동으로 실행
1. 추출된 dataSources와 DB 스키마 대조
2. 불일치 항목 식별
3. 리포트 생성
4. 검증: 모든 불일치 식별 확인
```

---

## ⚠️ 주의사항

1. **의존성 확인**: 작업 실행 전 `depends_on` 필드 확인
2. **백업 필수**: 주요 파일 수정 전 백업 생성
3. **단계별 검증**: 각 단계 완료 후 검증 수행
4. **롤백 준비**: 실패 시 롤백 가능하도록 준비

---

## 📞 문제 해결

### 작업 실패 시
1. 에러 로그 확인
2. 롤백 실행
3. 문제 원인 분석
4. 수정 후 재시도

### 검증 실패 시
1. 검증 기준 재확인
2. 출력 파일 검사
3. 수동 검증 수행
4. 필요 시 수정

---

## 📚 관련 문서

- [위험 진단 보고서](RISK_ASSESSMENT_REPORT.md) - 위험 요소 상세 분석
- [개발자 가이드](DEVELOPER.md) - 시스템 개발 가이드
- [시스템 데이터 문서](systemdata.md) - 데이터베이스 스키마 정보

---

**문서 버전**: 1.0  
**마지막 업데이트**: 2025-01-27

