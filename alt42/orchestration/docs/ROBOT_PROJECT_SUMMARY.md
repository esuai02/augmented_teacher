# λ΅λ΄‡-μ¤λ§νΈν° ν†µν•© ν”„λ΅μ νΈ μ”μ•½

**λ¬Έμ„ λ²„μ „**: 1.0  
**μ‘μ„±μΌ**: 2025-01-27  
**μƒνƒ**: μ„¤κ³„ μ™„λ£

---

## π“ ν”„λ΅μ νΈ κ°μ”

Mathking ν•™μµ κ°μ… μ‹μ¤ν…(`alt42/orchestration`)μ΄ μ¤λ§νΈν°μ„ λ¨Έλ¦¬λ΅ ν• λ΅λ΄‡κ³Ό μ—°λ™ν•κΈ° μ„ν• μ•„ν‚¤ν…μ² μ„¤κ³„ λ° κµ¬ν„ κ³„νμ„ μλ¦½ν–μµλ‹λ‹¤.

### ν•µμ‹¬ κ°λ…

- **λ΅λ΄‡**: λ‹¨μ λ΅λ΄‡ λ¨μ–‘μ κ±°μΉλ€μ— μ¤λ§νΈν°μ„ κ±°μΉν•λ” ν•νƒ
- **μ¤λ§νΈν° μ•±**: λ΅λ΄‡μ λ¨Έλ¦¬ μ—­ν•  (ν™”λ©΄, μμ„±, μΉ΄λ©”λΌ, μ„Όμ„ ν™μ©)
- **μ„λ²„ ν†µμ‹ **: κΈ°μ΅΄ Mathking μ„λ²„μ™€ RESTful API ν†µμ‹ 
- **ν•™μµ κ°μ…**: κΈ°μ΅΄ MVP μ‹μ¤ν…μ Sensing β†’ Decision β†’ Execution νμ΄ν”„λΌμΈ ν™μ©

---

## π—οΈ μ•„ν‚¤ν…μ² μ”μ•½

### 3κ³„μΈµ κµ¬μ΅°

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Mathking μ„λ²„      β”‚  β† Orchestration System
β”‚  (API Gateway)      β”‚     (Sensing β†’ Decision β†’ Execution)
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
           β”‚ HTTPS/REST API
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  μ¤λ§νΈν° μ•±        β”‚  β† ν†µμ‹ , μ„Όμ„, UI, TTS
β”‚  (λ΅λ΄‡ λ¨Έλ¦¬)        β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
           β”‚ BLE/Serial
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  λ΅λ΄‡ λ³Έμ²΄          β”‚  β† λ¨ν„°, LED
β”‚  (κ±°μΉλ€)           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### μ£Όμ” μ»΄ν¬λ„νΈ

1. **μ„λ²„ μΈ΅**
   - API μ—”λ“ν¬μΈνΈ (`api/robot/*.php`)
   - λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ (`mdl_robot_*` ν…μ΄λΈ”)
   - κΈ°μ΅΄ MVP μ‹μ¤ν… ν†µν•©

2. **μ¤λ§νΈν° μ•±**
   - ν†µμ‹  λ¨λ“ (HTTP/REST API ν΄λΌμ΄μ–ΈνΈ)
   - μ„Όμ„ λ¨λ“ (μΉ΄λ©”λΌ, λ§μ΄ν¬, κ°€μ†λ„κ³„)
   - UI λ¨λ“ (ν™”λ©΄ ν‘μ‹, μ• λ‹λ©”μ΄μ…)
   - μμ„± λ¨λ“ (TTS)
   - λ΅λ΄‡ μ μ–΄ λ¨λ“ (BLE/Serial)

3. **λ΅λ΄‡ λ³Έμ²΄**
   - λ¨ν„° (κ³ κ° μ›€μ§μ„)
   - LED (ν‘μ •/μƒνƒ ν‘μ‹)
   - BLE/Serial ν†µμ‹  λ¨λ“

---

## π“΅ μ£Όμ” API μ—”λ“ν¬μΈνΈ

| μ—”λ“ν¬μΈνΈ | λ©”μ„λ“ | λ©μ  |
|-----------|--------|------|
| `/api/robot/register` | POST | λ΅λ΄‡ λ“±λ΅ |
| `/api/robot/sensor-data` | POST | μ„Όμ„ λ°μ΄ν„° μ „μ†΅ |
| `/api/robot/intervention/pending` | GET | κ°μ… λ©”μ‹μ§€ μ΅°ν (ν΄λ§) |
| `/api/robot/intervention/complete` | POST | κ°μ… μ‹¤ν–‰ μ™„λ£ λ³΄κ³  |
| `/api/robot/status` | GET | λ΅λ΄‡ μƒνƒ μ΅°ν |

**μƒμ„Έ λ…μ„Έ**: [API λ…μ„Έμ„](ROBOT_API_SPEC.md)

---

## π’Ύ λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§

### μ£Όμ” ν…μ΄λΈ”

1. **mdl_robot_registration** - λ΅λ΄‡ λ“±λ΅ μ •λ³΄
2. **mdl_robot_sensor_data** - μ„Όμ„ λ°μ΄ν„° μ €μ¥
3. **mdl_robot_intervention_execution** - κ°μ… μ‹¤ν–‰ κΈ°λ΅
4. **mdl_robot_status_log** - λ΅λ΄‡ μƒνƒ λ΅κ·Έ
5. **mdl_robot_student_mapping** - λ΅λ΄‡-ν•™μƒ λ§¤ν•‘

**μƒμ„Έ μ¤ν‚¤λ§**: [λ°μ΄ν„°λ² μ΄μ¤ λ§μ΄κ·Έλ μ΄μ…](../database/migrations/003_robot_tables.sql)

---

## π—ΊοΈ κµ¬ν„ λ΅λ“λ§µ

### Phase 1: κΈ°λ³Έ ν†µμ‹  μΈν”„λΌ (1-2κ°μ›”)
- λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ μƒμ„±
- API μ—”λ“ν¬μΈνΈ κµ¬ν„
- μΈμ¦ λ° λ³΄μ• κµ¬ν„
- κΈ°μ΅΄ MVP μ‹μ¤ν… ν†µν•©

### Phase 2: μ¤λ§νΈν° μ•± κ°λ° (2-3κ°μ›”)
- μ•± κΈ°λ³Έ κµ¬μ΅° μ„¤κ³„
- μ„λ²„ ν†µμ‹  λ¨λ“ κµ¬ν„
- μ„Όμ„ λ°μ΄ν„° μμ§‘ λ¨λ“ κµ¬ν„
- UI λ λ”λ§ λ¨λ“ κµ¬ν„
- TTS λ¨λ“ κµ¬ν„
- λ΅λ΄‡ μ μ–΄ λ¨λ“ κµ¬ν„

### Phase 3: ν†µν•© λ° ν…μ¤νΈ (1κ°μ›”)
- End-to-End ν†µν•© ν…μ¤νΈ
- μ„±λ¥ ν…μ¤νΈ λ° μµμ ν™”
- λ³΄μ• κ²€μ¦
- μ‚¬μ©μ ν…μ¤νΈ (νμΌλΏ)

### Phase 4: μ‹¤μ‹κ°„ ν†µμ‹  λ° κ³ κΈ‰ κΈ°λ¥ (2-3κ°μ›”)
- WebSocket μ„λ²„ κµ¬ν„
- μ‹¤μ‹κ°„ κ°μ… λ©”μ‹μ§€ μ¤νΈλ¦¬λ°
- μ–‘λ°©ν–¥ ν†µμ‹  κµ¬ν„
- μ¤ν”„λΌμΈ λ¨λ“ μ§€μ›

### Phase 5: ν™•μ¥ λ° μµμ ν™” (μ§€μ†μ )
- λ‹¤μ¤‘ λ΅λ΄‡ μ§€μ› ν™•μ¥
- κ³ κΈ‰ μ„Όμ„ λ°μ΄ν„° λ¶„μ„
- λ¨Έμ‹ λ¬λ‹ κΈ°λ° κ°μ… μµμ ν™”

**μƒμ„Έ κ³„ν**: [κµ¬ν„ λ΅λ“λ§µ](ROBOT_IMPLEMENTATION_ROADMAP.md)

---

## π”’ λ³΄μ• κ³ λ ¤μ‚¬ν•­

1. **μΈμ¦**: Moodle μ„Έμ… κΈ°λ° μΈμ¦ λλ” API ν† ν°
2. **μ•”νΈν™”**: λ¨λ“  ν†µμ‹ μ€ HTTPS (TLS 1.2 μ΄μƒ)
3. **κ°μΈμ •λ³΄ λ³΄νΈ**: μµμ†ν•μ λ°μ΄ν„° μμ§‘, 90μΌ λ³΄κ΄€ ν›„ μ‚­μ 
4. **μ ‘κ·Ό μ μ–΄**: λ΅λ΄‡-ν•™μƒ λ§¤ν•‘ κ²€μ¦, Rate Limiting

---

## π› οΈ κΈ°μ  μ¤νƒ

### μ„λ²„ μΈ΅
- **μ–Έμ–΄**: PHP 7.1.9
- **ν”„λ μ„μ›ν¬**: Moodle 3.7
- **λ°μ΄ν„°λ² μ΄μ¤**: MySQL 5.7
- **API**: RESTful API (ν–¥ν›„ WebSocket)

### μ¤λ§νΈν° μ•±
- **ν”λ«νΌ**: Android (Kotlin/Java), iOS (Swift)
- **ν†µμ‹ **: Retrofit (Android), URLSession (iOS)
- **BLE**: Android BLE API, Core Bluetooth (iOS)
- **TTS**: Android TTS, AVSpeechSynthesizer (iOS)

### λ΅λ΄‡ λ³Έμ²΄
- **λ§μ΄ν¬λ΅μ»¨νΈλ΅¤λ¬**: ESP32 λλ” Arduino
- **ν†µμ‹ **: BLE λλ” Serial (USB)
- **λ¨ν„°**: μ„λ³΄ λ¨ν„° λλ” μ¤ν…νΌ λ¨ν„°
- **LED**: WS2812B λλ” μΌλ° LED

---

## π“ λ°μ΄ν„° νλ¦„

### μ„Όμ„ λ°μ΄ν„° μμ§‘ β†’ λ¶„μ„ β†’ κ°μ… κ²°μ •

```
[μ¤λ§νΈν° μ„Όμ„] 
  β†’ [μ„Όμ„ λ°μ΄ν„° μμ§‘]
  β†’ [POST /api/robot/sensor-data]
  β†’ [μ„λ²„: Sensing Layer]
  β†’ [μ„λ²„: Decision Layer]
  β†’ [κ°μ… ν•„μ” μ—¬λ¶€ νλ‹¨]
  β†’ [κ°μ… ν•„μ” μ‹ β†’ ν…μ΄λΈ” μ €μ¥]
```

### κ°μ… λ©”μ‹μ§€ μ „λ‹¬ β†’ μ‹¤ν–‰ β†’ μ™„λ£ λ³΄κ³ 

```
[μ„λ²„: κ°μ… λ©”μ‹μ§€ μƒμ„±]
  β†’ [ν…μ΄λΈ” μ €μ¥]
  β†’ [μ¤λ§νΈν°: GET /api/robot/intervention/pending]
  β†’ [μ¤λ§νΈν°: λ©”μ‹μ§€ μμ‹  λ° ν‘μ‹]
  β†’ [λ΅λ΄‡: λ™μ‘ μ‹¤ν–‰ (LED, λ¨ν„°)]
  β†’ [μ¤λ§νΈν°: POST /api/robot/intervention/complete]
  β†’ [μ„λ²„: μ‹¤ν–‰ κ²°κ³Ό κΈ°λ΅]
```

---

## β… μ™„λ£λ μ‘μ—…

- β… μ•„ν‚¤ν…μ² μ„¤κ³„ λ¬Έμ„ μ‘μ„±
- β… API λ…μ„Έμ„ μ‘μ„±
- β… λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ μ„¤κ³„
- β… κµ¬ν„ λ΅λ“λ§µ μλ¦½

---

## π“ λ‹¤μ λ‹¨κ³„

1. **Phase 1 μ‹μ‘**: λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ μƒμ„± λ° API μ—”λ“ν¬μΈνΈ κµ¬ν„
2. **ν€ κµ¬μ„±**: λ°±μ—”λ“ κ°λ°μ, λ¨λ°”μΌ κ°λ°μ, QA ν• λ‹Ή
3. **κ°λ° ν™κ²½ μ„¤μ •**: κ°λ° μ„λ²„, ν…μ¤νΈ ν™κ²½ κµ¬μ¶•

---

## π“ κ΄€λ ¨ λ¬Έμ„

- [μ•„ν‚¤ν…μ² μ„¤κ³„ λ¬Έμ„](ROBOT_SMARTPHONE_ARCHITECTURE.md) - μ „μ²΄ μ‹μ¤ν… μ•„ν‚¤ν…μ² μƒμ„Έ μ„¤κ³„
- [API λ…μ„Έμ„](ROBOT_API_SPEC.md) - API μ—”λ“ν¬μΈνΈ μƒμ„Έ λ…μ„Έ
- [κµ¬ν„ λ΅λ“λ§µ](ROBOT_IMPLEMENTATION_ROADMAP.md) - λ‹¨κ³„λ³„ κµ¬ν„ κ³„ν λ° μ‘μ—… ν•­λ©
- [λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§](../database/migrations/003_robot_tables.sql) - λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ” μ •μ

---

**λ¬Έμ„ μƒνƒ**: β… μ„¤κ³„ μ™„λ£  
**λ‹¤μ λ‹¨κ³„**: Phase 1 κµ¬ν„ μ‹μ‘  
**λ‹΄λ‹Ήμ**: ν”„λ΅μ νΈ κ΄€λ¦¬μ

