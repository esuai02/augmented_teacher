# 로봇-스마트폰 통합 구현 로드맵

**문서 버전**: 1.0  
**작성일**: 2025-01-27  
**상태**: 계획 완료

---

## 📋 개요

본 문서는 Mathking 학습 개입 시스템과 스마트폰 기반 로봇의 통합을 위한 단계별 구현 계획을 제시합니다.

---

## 🎯 전체 목표

1. **서버-스마트폰 앱 기본 통신 구축** (Phase 1)
2. **스마트폰 앱 개발 및 로봇 제어 기능 구현** (Phase 2)
3. **통합 테스트 및 안정화** (Phase 3)
4. **실시간 통신 및 고급 기능 추가** (Phase 4)
5. **확장 및 최적화** (Phase 5)

---

## Phase 1: 기본 통신 인프라 (1-2개월)

### 목표
서버-스마트폰 앱 기본 통신 구축

### 작업 항목

#### 1.1 데이터베이스 스키마 생성
- [ ] `mdl_robot_registration` 테이블 생성
- [ ] `mdl_robot_sensor_data` 테이블 생성
- [ ] `mdl_robot_intervention_execution` 테이블 생성
- [ ] `mdl_robot_status_log` 테이블 생성
- [ ] `mdl_robot_student_mapping` 테이블 생성
- [ ] 인덱스 및 외래키 설정
- [ ] 마이그레이션 스크립트 작성 및 테스트

**담당자**: 백엔드 개발자  
**예상 기간**: 1주

#### 1.2 API 엔드포인트 구현
- [ ] `POST /api/robot/register` 구현
- [ ] `POST /api/robot/sensor-data` 구현
- [ ] `GET /api/robot/intervention/pending` 구현
- [ ] `POST /api/robot/intervention/complete` 구현
- [ ] `GET /api/robot/status` 구현
- [ ] `PUT /api/robot/status` 구현
- [ ] 에러 처리 및 검증 로직 구현
- [ ] 로깅 및 모니터링 추가

**담당자**: 백엔드 개발자  
**예상 기간**: 2주

#### 1.3 인증 및 보안 구현
- [ ] Moodle 세션 기반 인증 통합
- [ ] API 토큰 발급 시스템 (선택)
- [ ] Rate Limiting 구현
- [ ] 입력 데이터 검증 및 Sanitization
- [ ] HTTPS 강제 설정

**담당자**: 백엔드 개발자  
**예상 기간**: 1주

#### 1.4 기존 MVP 시스템 통합
- [ ] Orchestrator와 로봇 API 연동
- [ ] 센서 데이터 → Sensing Layer 연결
- [ ] Decision Layer → 로봇 개입 메시지 생성
- [ ] Execution Layer → 로봇 개입 실행 기록

**담당자**: 백엔드 개발자  
**예상 기간**: 1주

#### 1.5 단위 테스트 및 문서화
- [ ] API 엔드포인트 단위 테스트 작성
- [ ] 데이터베이스 쿼리 테스트 작성
- [ ] API 문서 작성 (Postman/Swagger)
- [ ] 개발자 가이드 작성

**담당자**: 백엔드 개발자, QA  
**예상 기간**: 1주

### 산출물
- ✅ 데이터베이스 마이그레이션 스크립트 (`003_robot_tables.sql`)
- ✅ API 엔드포인트 구현 (`api/robot/*.php`)
- ✅ API 명세서 (`docs/ROBOT_API_SPEC.md`)
- ✅ 단위 테스트 코드 (`tests/robot/*.php`)

### 마일스톤
- **M1.1**: 데이터베이스 스키마 완료
- **M1.2**: 모든 API 엔드포인트 구현 완료
- **M1.3**: 단위 테스트 통과율 90% 이상

---

## Phase 2: 스마트폰 앱 개발 (2-3개월)

### 목표
기본 스마트폰 앱 개발 및 로봇 제어 기능 구현

### 작업 항목

#### 2.1 앱 기본 구조 설계
- [ ] 아키텍처 설계 (MVVM 또는 Clean Architecture)
- [ ] 프로젝트 구조 설정
- [ ] 의존성 관리 (Gradle/CocoaPods)
- [ ] 기본 네비게이션 구조

**담당자**: 모바일 개발자  
**예상 기간**: 1주

#### 2.2 서버 통신 모듈 구현
- [ ] HTTP 클라이언트 설정 (Retrofit/URLSession)
- [ ] API 인터페이스 정의
- [ ] 요청/응답 모델 정의
- [ ] 에러 처리 및 재시도 로직
- [ ] 네트워크 상태 모니터링

**담당자**: 모바일 개발자  
**예상 기간**: 2주

#### 2.3 센서 데이터 수집 모듈 구현
- [ ] 카메라 접근 및 얼굴 인식
- [ ] 마이크 접근 및 음성 감지
- [ ] 가속도계/자이로스코프 데이터 수집
- [ ] 화면 상태 모니터링
- [ ] 센서 데이터 전송 스케줄링

**담당자**: 모바일 개발자  
**예상 기간**: 3주

#### 2.4 UI 렌더링 모듈 구현
- [ ] 개입 메시지 표시 UI
- [ ] 애니메이션 효과
- [ ] 다크 모드 지원
- [ ] 접근성 기능 (스크린 리더)

**담당자**: 모바일 개발자, UI/UX 디자이너  
**예상 기간**: 2주

#### 2.5 TTS 모듈 구현
- [ ] 텍스트-음성 변환 엔진 통합
- [ ] 한국어 음성 지원
- [ ] 음성 속도/톤 조절
- [ ] 배경 음악과의 조화

**담당자**: 모바일 개발자  
**예상 기간**: 1주

#### 2.6 로봇 제어 모듈 구현
- [ ] BLE/Serial 통신 라이브러리 통합
- [ ] 로봇 연결 및 인증
- [ ] LED 제어 명령 전송
- [ ] 모터 제어 명령 전송
- [ ] 연결 상태 모니터링 및 재연결 로직

**담당자**: 모바일 개발자, 하드웨어 엔지니어  
**예상 기간**: 3주

#### 2.7 로컬 데이터 저장
- [ ] SQLite 데이터베이스 설정
- [ ] 오프라인 데이터 저장
- [ ] 데이터 동기화 메커니즘

**담당자**: 모바일 개발자  
**예상 기간**: 1주

#### 2.8 앱 테스트 및 최적화
- [ ] 단위 테스트 작성
- [ ] 통합 테스트 작성
- [ ] 성능 최적화
- [ ] 배터리 사용량 최적화

**담당자**: 모바일 개발자, QA  
**예상 기간**: 2주

### 산출물
- ✅ Android 앱 (APK)
- ✅ iOS 앱 (IPA)
- ✅ 로봇 제어 라이브러리
- ✅ 사용자 매뉴얼
- ✅ 개발자 가이드

### 마일스톤
- **M2.1**: 앱 기본 구조 완료
- **M2.2**: 서버 통신 모듈 완료
- **M2.3**: 센서 데이터 수집 모듈 완료
- **M2.4**: 로봇 제어 모듈 완료
- **M2.5**: 앱스토어 제출 준비 완료

---

## Phase 3: 통합 및 테스트 (1개월)

### 목표
서버-앱-로봇 통합 테스트 및 안정화

### 작업 항목

#### 3.1 End-to-End 통합 테스트
- [ ] 로봇 등록 → 센서 데이터 전송 → 개입 메시지 수신 → 실행 → 완료 보고 시나리오 테스트
- [ ] 다중 로봇 동시 통신 테스트
- [ ] 네트워크 불안정 상황 테스트
- [ ] 로봇 연결 끊김 상황 테스트

**담당자**: QA, 백엔드 개발자, 모바일 개발자  
**예상 기간**: 2주

#### 3.2 성능 테스트 및 최적화
- [ ] API 응답 시간 측정 및 최적화
- [ ] 센서 데이터 처리 시간 측정
- [ ] 개입 메시지 전달 시간 측정
- [ ] 데이터베이스 쿼리 최적화
- [ ] 앱 메모리 사용량 최적화

**담당자**: 백엔드 개발자, 모바일 개발자  
**예상 기간**: 1주

#### 3.3 보안 검증
- [ ] 인증/인가 테스트
- [ ] 데이터 암호화 검증
- [ ] 개인정보 보호 검증
- [ ] 보안 취약점 스캔

**담당자**: 보안 전문가, 백엔드 개발자  
**예상 기간**: 1주

#### 3.4 사용자 테스트 (파일럿)
- [ ] 5-10명 학생 대상 파일럿 테스트
- [ ] 사용성 테스트
- [ ] 피드백 수집 및 분석
- [ ] 개선사항 반영

**담당자**: 프로젝트 관리자, QA  
**예상 기간**: 2주

### 산출물
- ✅ 통합 테스트 리포트
- ✅ 성능 벤치마크 리포트
- ✅ 보안 검증 리포트
- ✅ 사용자 테스트 리포트

### 마일스톤
- **M3.1**: 모든 통합 테스트 통과
- **M3.2**: 성능 목표 달성
- **M3.3**: 보안 검증 완료
- **M3.4**: 파일럿 테스트 완료

---

## Phase 4: 실시간 통신 및 고급 기능 (2-3개월)

### 목표
WebSocket 기반 실시간 통신 및 고급 기능 추가

### 작업 항목

#### 4.1 WebSocket 서버 구현
- [ ] WebSocket 서버 설정 (Ratchet 또는 Swoole)
- [ ] 연결 관리 및 인증
- [ ] 메시지 브로드캐스팅
- [ ] 연결 상태 모니터링

**담당자**: 백엔드 개발자  
**예상 기간**: 2주

#### 4.2 실시간 개입 메시지 스트리밍
- [ ] WebSocket 클라이언트 구현 (앱)
- [ ] 실시간 메시지 수신
- [ ] 폴링 방식과의 호환성 유지

**담당자**: 모바일 개발자, 백엔드 개발자  
**예상 기간**: 2주

#### 4.3 양방향 통신 구현
- [ ] 앱 → 서버 실시간 피드백
- [ ] 사용자 상호작용 실시간 전송
- [ ] 로봇 상태 실시간 업데이트

**담당자**: 모바일 개발자, 백엔드 개발자  
**예상 기간**: 2주

#### 4.4 오프라인 모드 지원
- [ ] 오프라인 데이터 저장
- [ ] 오프라인 큐 관리
- [ ] 온라인 복구 시 동기화
- [ ] 충돌 해결 메커니즘

**담당자**: 모바일 개발자  
**예상 기간**: 3주

#### 4.5 데이터 동기화 메커니즘
- [ ] 증분 동기화 구현
- [ ] 충돌 해결 전략
- [ ] 동기화 상태 모니터링

**담당자**: 모바일 개발자, 백엔드 개발자  
**예상 기간**: 2주

### 산출물
- ✅ WebSocket 서버 구현
- ✅ 실시간 통신 클라이언트 구현
- ✅ 오프라인 모드 구현
- ✅ 동기화 메커니즘 문서

### 마일스톤
- **M4.1**: WebSocket 서버 완료
- **M4.2**: 실시간 통신 구현 완료
- **M4.3**: 오프라인 모드 구현 완료

---

## Phase 5: 확장 및 최적화 (지속적)

### 목표
시스템 확장 및 성능 최적화

### 작업 항목

#### 5.1 다중 로봇 지원 확장
- [ ] 로봇 그룹 관리 기능
- [ ] 그룹별 개입 메시지 브로드캐스팅
- [ ] 그룹 상태 모니터링

**담당자**: 백엔드 개발자  
**예상 기간**: 3주

#### 5.2 고급 센서 데이터 분석
- [ ] 머신러닝 모델 통합
- [ ] 감정 인식 고도화
- [ ] 집중도 측정 정확도 향상

**담당자**: 데이터 사이언티스트, 백엔드 개발자  
**예상 기간**: 4주

#### 5.3 머신러닝 기반 개입 최적화
- [ ] 개입 효과성 예측 모델
- [ ] 개인화된 개입 추천
- [ ] A/B 테스트 프레임워크

**담당자**: 데이터 사이언티스트, 백엔드 개발자  
**예상 기간**: 6주

#### 5.4 성능 최적화
- [ ] 데이터베이스 쿼리 최적화
- [ ] 캐싱 전략 개선
- [ ] CDN 통합 (정적 리소스)
- [ ] 로드 밸런싱

**담당자**: 백엔드 개발자, DevOps  
**예상 기간**: 4주

---

## 📊 진행 상황 추적

### Phase 1 진행 상황
- [ ] 데이터베이스 스키마 생성
- [ ] API 엔드포인트 구현
- [ ] 인증 및 보안 구현
- [ ] 기존 MVP 시스템 통합
- [ ] 단위 테스트 및 문서화

**현재 상태**: 계획 완료, 구현 대기

### Phase 2 진행 상황
- [ ] 앱 기본 구조 설계
- [ ] 서버 통신 모듈 구현
- [ ] 센서 데이터 수집 모듈 구현
- [ ] UI 렌더링 모듈 구현
- [ ] TTS 모듈 구현
- [ ] 로봇 제어 모듈 구현
- [ ] 로컬 데이터 저장
- [ ] 앱 테스트 및 최적화

**현재 상태**: 계획 완료, 구현 대기

---

## 🎯 성공 지표

### Phase 1 성공 지표
- ✅ 모든 API 엔드포인트 구현 완료
- ✅ 단위 테스트 커버리지 90% 이상
- ✅ API 응답 시간 < 500ms (95th percentile)

### Phase 2 성공 지표
- ✅ Android/iOS 앱 앱스토어 제출 완료
- ✅ 로봇 제어 성공률 95% 이상
- ✅ 센서 데이터 수집 성공률 98% 이상

### Phase 3 성공 지표
- ✅ 모든 통합 테스트 통과
- ✅ 파일럿 테스트 사용자 만족도 4.0/5.0 이상
- ✅ 보안 취약점 0개

### Phase 4 성공 지표
- ✅ WebSocket 연결 안정성 99% 이상
- ✅ 실시간 메시지 전달 시간 < 1초
- ✅ 오프라인 모드 동기화 성공률 100%

---

## 📝 참고 문서

- [아키텍처 설계 문서](ROBOT_SMARTPHONE_ARCHITECTURE.md)
- [API 명세서](ROBOT_API_SPEC.md)
- [데이터베이스 스키마](../database/migrations/003_robot_tables.sql)

---

**문서 상태**: ✅ 계획 완료  
**다음 단계**: Phase 1 구현 시작  
**담당자**: 프로젝트 관리자

