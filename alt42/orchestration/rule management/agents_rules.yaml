# ğŸ¼ Agents Orchestration Rules
# ìµœê³ ìˆ˜ì¤€ ì„ ìƒë‹˜ ì‚¬ê³ ì²´ê³„ ê¸°ë°˜ 90% ìˆ˜ì¤€ ë‹¬ì„±ì„ ìœ„í•œ í˜‘ì—… ë£°

version: "2.0"
description: "22ê°œ ì—ì´ì „íŠ¸ì˜ ì™„ì „í•œ í˜‘ì—…ì„ ìœ„í•œ orchestration ë£°"
target_level: 90  # í˜„ì§ ì„ ìƒë‹˜ ìˆ˜ì¤€ì˜ 90%
current_level: 65.3
last_updated: "2025-01-27"

# ============================================================================
# 1. ì—ì´ì „íŠ¸ ê¸°ë³¸ ì •ë³´ ë° ì—­í•  ì •ì˜
# ============================================================================

agents:
  # Phase 1: ì´ˆê¸°í™” ë° ë¶„ì„ ê·¸ë£¹
  - agent_id: "agent01_onboarding"
    name: "ì˜¨ë³´ë”©"
    category: "foundation"
    base_priority: 95
    description: "í•™ìƒ ì´ˆê¸° í”„ë¡œí•„ ìˆ˜ì§‘ ë° ë¶„ì„"
    capabilities:
      - student_profile_collection
      - mbti_analysis
      - learning_style_identification
      - academy_info_collection
    dependencies: []
    outputs:
      - student_profile
      - learning_preferences
      - academy_info
    sync_rules:
      - when: "profile_updated"
        notify: ["agent02_exam_schedule", "agent07_interaction_targeting", "agent09_learning_management"]
        priority: "high"
    
  - agent_id: "agent14_current_position"
    name: "í˜„ì¬ ìœ„ì¹˜"
    category: "foundation"
    base_priority: 90
    description: "í˜„ì¬ í•™ìŠµ ìƒíƒœ ë° ì§„ë„ íŒŒì•…"
    capabilities:
      - progress_tracking
      - position_analysis
      - risk_assessment
    dependencies: ["agent01_onboarding"]
    outputs:
      - current_unit
      - progress_rate
      - risk_score
    sync_rules:
      - when: "position_updated"
        notify: ["agent02_exam_schedule", "agent09_learning_management", "agent17_remaining_activities"]
        priority: "high"
    
  - agent_id: "agent03_goals_analysis"
    name: "ëª©í‘œ ë¶„ì„"
    category: "foundation"
    base_priority: 88
    description: "í•™ìŠµ ëª©í‘œ ì„¤ì • ë° ë¶„ì„"
    capabilities:
      - goal_setting
      - goal_analysis
      - goal_alignment
    dependencies: ["agent01_onboarding"]
    outputs:
      - goals
      - goal_achievement_rate
    sync_rules:
      - when: "goals_updated"
        notify: ["agent02_exam_schedule", "agent09_learning_management"]
        priority: "medium"
  
  # Phase 2: ê³„íš ìˆ˜ë¦½ ê·¸ë£¹
  - agent_id: "agent02_exam_schedule"
    name: "ì‹œí—˜ ì¼ì •"
    category: "planning"
    base_priority: 92
    description: "ì‹œí—˜ ëŒ€ë¹„ ê³„íš ìˆ˜ë¦½"
    capabilities:
      - exam_schedule_planning
      - d_day_calculation
      - study_strategy_planning
      - unit_priority_setting
    dependencies: ["agent01_onboarding", "agent14_current_position", "agent03_goals_analysis"]
    outputs:
      - exam_preparation_plan
      - study_schedule
      - unit_priority_list
    sync_rules:
      - when: "plan_created"
        notify: ["agent09_learning_management", "agent17_remaining_activities", "agent07_interaction_targeting"]
        priority: "critical"
    
  - agent_id: "agent17_remaining_activities"
    name: "ì”ì—¬ í™œë™"
    category: "planning"
    base_priority: 85
    description: "í™œë™ ìš°ì„ ìˆœìœ„ ì¡°ì • ë° ê´€ë¦¬"
    capabilities:
      - activity_prioritization
      - resource_allocation
      - bottleneck_identification
    dependencies: ["agent02_exam_schedule", "agent14_current_position"]
    outputs:
      - activity_priority_list
      - resource_allocation_plan
    sync_rules:
      - when: "priority_updated"
        notify: ["agent09_learning_management", "agent20_intervention_preparation"]
        priority: "high"
    
  - agent_id: "agent09_learning_management"
    name: "í•™ìŠµ ê´€ë¦¬"
    category: "planning"
    base_priority: 87
    description: "í•™ìŠµ ê³„íš ê´€ë¦¬ ë° ì¶”ì "
    capabilities:
      - plan_management
      - completion_tracking
      - plan_adjustment
    dependencies: ["agent02_exam_schedule", "agent17_remaining_activities"]
    outputs:
      - learning_plan
      - completion_status
    sync_rules:
      - when: "plan_updated"
        notify: ["agent14_current_position", "agent04_inspect_weakpoints"]
        priority: "high"
  
  # Phase 3: ì‹¤í–‰ ëª¨ë‹ˆí„°ë§ ê·¸ë£¹
  - agent_id: "agent04_inspect_weakpoints"
    name: "ì·¨ì•½ì  ê²€ì‚¬"
    category: "execution"
    base_priority: 83
    description: "í•™ìŠµ í™œë™ ì·¨ì•½ì  ë¶„ì„"
    capabilities:
      - weak_point_analysis
      - activity_pattern_recognition
      - performance_tracking
    dependencies: ["agent09_learning_management"]
    outputs:
      - weak_point_patterns
      - performance_metrics
    sync_rules:
      - when: "performance_updated"
        notify: ["agent11_problem_notes", "agent15_problem_redefinition"]
        priority: "medium"
    
  - agent_id: "agent10_concept_notes"
    name: "ê°œë… ë…¸íŠ¸"
    category: "execution"
    base_priority: 80
    description: "ê°œë… í•™ìŠµ ë¶„ì„"
    capabilities:
      - concept_understanding_analysis
      - note_pattern_analysis
      - concept_mastery_assessment
    dependencies: ["agent09_learning_management"]
    outputs:
      - concept_understanding_level
      - concept_mastery_status
    sync_rules:
      - when: "concept_updated"
        notify: ["agent15_problem_redefinition", "agent07_interaction_targeting"]
        priority: "medium"
    
  - agent_id: "agent11_problem_notes"
    name: "ë¬¸ì œ ë…¸íŠ¸"
    category: "execution"
    base_priority: 82
    description: "ë¬¸ì œ í’€ì´ ë° ì˜¤ë‹µ ë¶„ì„"
    capabilities:
      - error_analysis
      - problem_pattern_recognition
      - error_classification
    dependencies: ["agent04_inspect_weakpoints"]
    outputs:
      - error_patterns
      - error_classification
      - improvement_suggestions
    sync_rules:
      - when: "error_detected"
        notify: ["agent15_problem_redefinition", "agent07_interaction_targeting", "agent08_calmness"]
        priority: "high"
  
  # Phase 4: ì •ì„œ ë° ë™ê¸° ê´€ë¦¬ ê·¸ë£¹
  - agent_id: "agent05_learning_emotion"
    name: "í•™ìŠµ ê°ì •"
    category: "emotion"
    base_priority: 88
    description: "í•™ìŠµ ê°ì • ìƒíƒœ íŒŒì•… ë° ê´€ë¦¬"
    capabilities:
      - emotion_detection
      - emotion_analysis
      - emotion_trend_tracking
    dependencies: []
    outputs:
      - emotion_state
      - emotion_confidence
      - emotion_trend
    sync_rules:
      - when: "emotion_changed"
        notify: ["agent07_interaction_targeting", "agent20_intervention_preparation", "agent21_intervention_execution"]
        priority: "critical"
    
  - agent_id: "agent08_calmness"
    name: "ì¹¨ì°©ë„"
    category: "emotion"
    base_priority: 85
    description: "ì¹¨ì°©ë„ ì¸¡ì • ë° ê´€ë¦¬"
    capabilities:
      - calmness_measurement
      - error_cause_analysis
      - calmness_improvement
    dependencies: ["agent11_problem_notes"]
    outputs:
      - calmness_score
      - error_cause_analysis
    sync_rules:
      - when: "calmness_low"
        notify: ["agent12_rest_routine", "agent07_interaction_targeting"]
        priority: "high"
    
  - agent_id: "agent12_rest_routine"
    name: "íœ´ì‹ ë£¨í‹´"
    category: "emotion"
    base_priority: 80
    description: "íœ´ì‹ íŒ¨í„´ ê´€ë¦¬ ë° í”¼ë¡œë„ ëª¨ë‹ˆí„°ë§"
    capabilities:
      - rest_pattern_analysis
      - fatigue_monitoring
      - rest_recommendation
    dependencies: ["agent05_learning_emotion", "agent08_calmness"]
    outputs:
      - rest_recommendations
      - fatigue_level
    sync_rules:
      - when: "fatigue_high"
        notify: ["agent13_learning_dropout", "agent07_interaction_targeting"]
        priority: "high"
  
  # Phase 5: ìƒí˜¸ì‘ìš© ì¤€ë¹„ ë° ì‹¤í–‰ ê·¸ë£¹
  - agent_id: "agent07_interaction_targeting"
    name: "ìƒí˜¸ì‘ìš© íƒ€ê²ŒíŒ…"
    category: "interaction"
    base_priority: 90
    description: "ìƒí˜¸ì‘ìš© íƒ€ê²Ÿ ê²°ì • ë° ìš°ì„ ìˆœìœ„ ì„¤ì •"
    capabilities:
      - situation_identification
      - targeting_decision
      - priority_calculation
    dependencies: ["agent05_learning_emotion", "agent14_current_position"]
    outputs:
      - interaction_target
      - interaction_priority
      - interaction_timing
    sync_rules:
      - when: "target_determined"
        notify: ["agent16_interaction_preparation"]
        priority: "critical"
    
  - agent_id: "agent16_interaction_preparation"
    name: "ìƒí˜¸ì‘ìš© ì¤€ë¹„"
    category: "interaction"
    base_priority: 88
    description: "ìƒí˜¸ì‘ìš© ì¤€ë¹„ ë° ì„¸ê³„ê´€ ì„ íƒ"
    capabilities:
      - world_selection
      - storytelling_preparation
      - interaction_context_preparation
    dependencies: ["agent07_interaction_targeting"]
    outputs:
      - selected_world
      - interaction_context
    sync_rules:
      - when: "preparation_complete"
        notify: ["agent19_interaction_content"]
        priority: "critical"
    
  - agent_id: "agent19_interaction_content"
    name: "ìƒí˜¸ì‘ìš© ì»¨í…ì¸ "
    category: "interaction"
    base_priority: 86
    description: "ë§ì¶¤í˜• ìƒí˜¸ì‘ìš© ì»¨í…ì¸  ìƒì„±"
    capabilities:
      - content_generation
      - template_selection
      - content_packaging
    dependencies: ["agent16_interaction_preparation"]
    outputs:
      - interaction_content
      - content_type
    sync_rules:
      - when: "content_ready"
        notify: ["agent20_intervention_preparation"]
        priority: "critical"
    
  - agent_id: "agent20_intervention_preparation"
    name: "ê°œì… ì¤€ë¹„"
    category: "interaction"
    base_priority: 87
    description: "ê°œì… ìœ„ì¹˜ ë° íƒ€ì´ë° ê²°ì •"
    capabilities:
      - intervention_location_selection
      - timing_optimization
      - intervention_method_selection
    dependencies: ["agent19_interaction_content"]
    outputs:
      - intervention_plan
      - intervention_timing
    sync_rules:
      - when: "intervention_ready"
        notify: ["agent21_intervention_execution"]
        priority: "critical"
    
  - agent_id: "agent21_intervention_execution"
    name: "ê°œì… ì‹¤í–‰"
    category: "interaction"
    base_priority: 89
    description: "ê°œì… ì‹¤í–‰ ë° ë©”ì‹œì§€ ì „ë‹¬"
    capabilities:
      - intervention_execution
      - message_delivery
      - priority_adjustment
    dependencies: ["agent20_intervention_preparation"]
    outputs:
      - intervention_result
      - student_response
    sync_rules:
      - when: "intervention_complete"
        notify: ["agent05_learning_emotion", "agent14_current_position"]
        priority: "high"
  
  # Phase 6: íŠ¹ìˆ˜ ìƒí™© ëŒ€ì‘ ê·¸ë£¹
  - agent_id: "agent13_learning_dropout"
    name: "í•™ìŠµ ì´íƒˆ"
    category: "special"
    base_priority: 91
    description: "í•™ìŠµ ì´íƒˆ ì¡°ì§ ê°ì§€ ë° ëŒ€ì‘"
    capabilities:
      - dropout_detection
      - dropout_prevention
      - re_engagement_strategy
    dependencies: ["agent05_learning_emotion", "agent12_rest_routine"]
    outputs:
      - dropout_risk_score
      - prevention_strategy
    sync_rules:
      - when: "dropout_risk_detected"
        notify: ["agent07_interaction_targeting", "agent20_intervention_preparation"]
        priority: "critical"
    
  - agent_id: "agent15_problem_redefinition"
    name: "ë¬¸ì œ ì¬ì •ì˜"
    category: "special"
    base_priority: 84
    description: "ë¬¸ì œì˜ ê·¼ë³¸ ì›ì¸ ë¶„ì„ ë° ì¬ì •ì˜"
    capabilities:
      - root_cause_analysis
      - problem_redefinition
      - solution_strategy_generation
    dependencies: ["agent11_problem_notes", "agent10_concept_notes"]
    outputs:
      - redefined_problem
      - solution_strategy
    sync_rules:
      - when: "problem_redefined"
        notify: ["agent07_interaction_targeting", "agent09_learning_management"]
        priority: "high"
    
  - agent_id: "agent06_teacher_feedback"
    name: "êµì‚¬ í”¼ë“œë°±"
    category: "special"
    base_priority: 83
    description: "êµì‚¬ í”¼ë“œë°± í†µí•© ë° ë¶„ì„"
    capabilities:
      - feedback_integration
      - feedback_analysis
      - persona_matching
    dependencies: []
    outputs:
      - integrated_feedback
      - feedback_priority
    sync_rules:
      - when: "feedback_received"
        notify: ["agent09_learning_management", "agent07_interaction_targeting"]
        priority: "medium"
  
  # Phase 7: ì§€ì†ì  ê°œì„  ê·¸ë£¹
  - agent_id: "agent22_module_improvement"
    name: "ëª¨ë“ˆ ê°œì„ "
    category: "improvement"
    base_priority: 75
    description: "ì‹œìŠ¤í…œ ì„±ëŠ¥ ë¶„ì„ ë° ê°œì„  ì œì•ˆ"
    capabilities:
      - performance_analysis
      - vulnerability_detection
      - improvement_proposal
      - auto_upgrade
    dependencies: ["*"]  # ëª¨ë“  ì—ì´ì „íŠ¸ë¡œë¶€í„° ë°ì´í„° ìˆ˜ì§‘
    outputs:
      - improvement_report
      - upgrade_recommendations
    sync_rules:
      - when: "improvement_identified"
        notify: ["*"]  # ëª¨ë“  ì—ì´ì „íŠ¸ì— í”¼ë“œë°±
        priority: "low"  # ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
    
  - agent_id: "agent18_signature_routine"
    name: "ì‹œê·¸ë„ˆì²˜ ë£¨í‹´"
    category: "improvement"
    base_priority: 78
    description: "ê°œì¸í™”ëœ í•™ìŠµ ë£¨í‹´ í•™ìŠµ ë° ì ìš©"
    capabilities:
      - routine_learning
      - pattern_recognition
      - routine_optimization
    dependencies: ["agent01_onboarding", "agent04_inspect_weakpoints"]
    outputs:
      - signature_routine
      - routine_effectiveness
    sync_rules:
      - when: "routine_updated"
        notify: ["agent09_learning_management", "agent07_interaction_targeting"]
        priority: "low"

# ============================================================================
# 2. í˜‘ì—… ë£° (Collaboration Rules)
# ============================================================================

collaboration_rules:
  # ê·œì¹™ 1: í•™ìƒ í”„ë¡œí•„ ë³€ê²½ ì‹œ ì—°ì‡„ ë°˜ì‘
  - rule_id: "COLLAB_001"
    name: "í•™ìƒ í”„ë¡œí•„ ë³€ê²½ ì „íŒŒ"
    trigger:
      agent: "agent01_onboarding"
      event: "profile_updated"
    actions:
      - agent: "agent02_exam_schedule"
        action: "refresh_student_profile"
        priority: "high"
        delay: 0
      - agent: "agent07_interaction_targeting"
        action: "update_targeting_strategy"
        priority: "medium"
        delay: 100  # ms
      - agent: "agent09_learning_management"
        action: "adjust_learning_plan"
        priority: "medium"
        delay: 200
    
  # ê·œì¹™ 2: í•™ìŠµ ì´íƒˆ ê°ì§€ ì‹œ ê¸´ê¸‰ ëŒ€ì‘
  - rule_id: "COLLAB_002"
    name: "í•™ìŠµ ì´íƒˆ ê¸´ê¸‰ ëŒ€ì‘"
    trigger:
      agent: "agent13_learning_dropout"
      event: "dropout_risk_detected"
      condition:
        risk_score: ">="
        risk_threshold: 0.7
    actions:
      - agent: "agent05_learning_emotion"
        action: "check_emotion_state"
        priority: "critical"
        delay: 0
      - agent: "agent07_interaction_targeting"
        action: "prioritize_intervention"
        priority: "critical"
        delay: 0
      - agent: "agent20_intervention_preparation"
        action: "prepare_urgent_intervention"
        priority: "critical"
        delay: 50
      - agent: "agent21_intervention_execution"
        action: "execute_intervention"
        priority: "critical"
        delay: 100
    
  # ê·œì¹™ 3: ì‹œí—˜ ê³„íš ìˆ˜ë¦½ ì‹œ ì¢…í•© í˜‘ì—…
  - rule_id: "COLLAB_003"
    name: "ì‹œí—˜ ê³„íš ìˆ˜ë¦½ í˜‘ì—…"
    trigger:
      agent: "agent02_exam_schedule"
      event: "exam_plan_created"
    actions:
      - agent: "agent01_onboarding"
        action: "get_student_profile"
        priority: "high"
        delay: 0
      - agent: "agent14_current_position"
        action: "get_current_progress"
        priority: "high"
        delay: 0
      - agent: "agent03_goals_analysis"
        action: "get_goals"
        priority: "high"
        delay: 0
      - agent: "agent17_remaining_activities"
        action: "adjust_activity_priority"
        priority: "high"
        delay: 200
      - agent: "agent09_learning_management"
        action: "update_learning_plan"
        priority: "high"
        delay: 300
    
  # ê·œì¹™ 4: ê°ì • ìƒíƒœ ë³€í™” ì‹œ ì¦‰ì‹œ ë°˜ì‘
  - rule_id: "COLLAB_004"
    name: "ê°ì • ìƒíƒœ ë³€í™” ëŒ€ì‘"
    trigger:
      agent: "agent05_learning_emotion"
      event: "emotion_changed"
      condition:
        emotion_type: ["frustrated", "anxious", "discouraged"]
    actions:
      - agent: "agent07_interaction_targeting"
        action: "prioritize_emotion_support"
        priority: "critical"
        delay: 0
      - agent: "agent12_rest_routine"
        action: "suggest_rest"
        priority: "high"
        delay: 100
      - agent: "agent20_intervention_preparation"
        action: "prepare_emotion_intervention"
        priority: "high"
        delay: 200
    
  # ê·œì¹™ 5: ì˜¤ë‹µ íŒ¨í„´ ê°ì§€ ì‹œ ë¶„ì„ ì—°ì‡„
  - rule_id: "COLLAB_005"
    name: "ì˜¤ë‹µ íŒ¨í„´ ë¶„ì„ ì—°ì‡„"
    trigger:
      agent: "agent11_problem_notes"
      event: "error_pattern_detected"
    actions:
      - agent: "agent15_problem_redefinition"
        action: "analyze_root_cause"
        priority: "high"
        delay: 0
      - agent: "agent08_calmness"
        action: "check_calmness"
        priority: "medium"
        delay: 100
      - agent: "agent10_concept_notes"
        action: "check_concept_understanding"
        priority: "medium"
        delay: 200
      - agent: "agent07_interaction_targeting"
        action: "plan_remedial_interaction"
        priority: "high"
        delay: 300

# ============================================================================
# 3. ìš°ì„ ìˆœìœ„ ê²°ì • ë£° (Priority Rules)
# ============================================================================

priority_rules:
  # ê¸´ê¸‰ ìƒí™© ìš°ì„ ìˆœìœ„
  - rule_id: "PRIORITY_001"
    name: "ê¸´ê¸‰ ìƒí™© ìµœìš°ì„ "
    conditions:
      - event_type: "student_request"
        priority: 100
      - event_type: "dropout_risk"
        risk_score: ">= 0.8"
        priority: 95
      - event_type: "emotion_crisis"
        emotion: ["frustrated", "anxious"]
        priority: 90
    
  # ì¤‘ìš” ìƒí™© ìš°ì„ ìˆœìœ„
  - rule_id: "PRIORITY_002"
    name: "ì¤‘ìš” ìƒí™© ìš°ì„ "
    conditions:
      - event_type: "exam_preparation"
        d_day: "<= 7"
        priority: 85
      - event_type: "plan_update"
        completion_rate: "< 0.7"
        priority: 80
      - event_type: "error_pattern"
        error_count: ">= 3"
        priority: 75
    
  # ì¼ë°˜ ìƒí™© ìš°ì„ ìˆœìœ„
  - rule_id: "PRIORITY_003"
    name: "ì¼ë°˜ ìƒí™© ì²˜ë¦¬"
    conditions:
      - event_type: "routine_update"
        priority: 60
      - event_type: "improvement_suggestion"
        priority: 50
      - event_type: "data_sync"
        priority: 40

# ============================================================================
# 4. ì¶©ëŒ í•´ê²° ë£° (Conflict Resolution Rules)
# ============================================================================

conflict_resolution:
  # ìš°ì„ ìˆœìœ„ ì¶©ëŒ í•´ê²°
  - rule_id: "CONFLICT_001"
    name: "ìš°ì„ ìˆœìœ„ ê¸°ë°˜ í•´ê²°"
    conflict_type: "priority_conflict"
    resolution:
      method: "highest_priority_wins"
      fallback: "consensus_mechanism"
    
  # ê¶Œí•œ ì¶©ëŒ í•´ê²°
  - rule_id: "CONFLICT_002"
    name: "ê¶Œí•œ ê³„ì¸µ ê¸°ë°˜ í•´ê²°"
    conflict_type: "authority_conflict"
    resolution:
      authority_hierarchy:
        - agent: "agent01_onboarding"
          level: 10
          scope: "student_profile"
        - agent: "agent02_exam_schedule"
          level: 9
          scope: "exam_plan"
        - agent: "agent14_current_position"
          level: 8
          scope: "current_state"
        - agent: "agent09_learning_management"
          level: 7
          scope: "learning_plan"
      method: "highest_authority_wins"
    
  # ì „ëµ ì¶©ëŒ í•´ê²°
  - rule_id: "CONFLICT_003"
    name: "ìƒí™© ì í•©ì„± ê¸°ë°˜ í•´ê²°"
    conflict_type: "strategy_conflict"
    resolution:
      method: "best_fit_strategy"
      evaluation_criteria:
        - context_match_score
        - historical_success_rate
        - student_preference_score
      fallback: "weighted_average"

# ============================================================================
# 5. ë°ì´í„° ë™ê¸°í™” ë£° (Data Synchronization Rules)
# ============================================================================

data_sync_rules:
  # ì‹¤ì‹œê°„ ë™ê¸°í™” (critical ë°ì´í„°)
  - rule_id: "SYNC_001"
    name: "ì‹¤ì‹œê°„ ë™ê¸°í™”"
    sync_type: "realtime"
    conditions:
      - data_type: "emotion_state"
        sync_delay: 0
      - data_type: "dropout_risk"
        sync_delay: 0
      - data_type: "student_request"
        sync_delay: 0
    
  # ë¹ ë¥¸ ë™ê¸°í™” (high priority ë°ì´í„°)
  - rule_id: "SYNC_002"
    name: "ë¹ ë¥¸ ë™ê¸°í™”"
    sync_type: "fast"
    conditions:
      - data_type: "student_profile"
        sync_delay: 100
      - data_type: "current_position"
        sync_delay: 100
      - data_type: "exam_plan"
        sync_delay: 200
    
  # ì¼ë°˜ ë™ê¸°í™” (medium priority ë°ì´í„°)
  - rule_id: "SYNC_003"
    name: "ì¼ë°˜ ë™ê¸°í™”"
    sync_type: "normal"
    conditions:
      - data_type: "learning_plan"
        sync_delay: 500
      - data_type: "routine_update"
        sync_delay: 1000
      - data_type: "improvement_suggestion"
        sync_delay: 2000

# ============================================================================
# 6. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë£° (Performance Monitoring Rules)
# ============================================================================

performance_monitoring:
  # ì—ì´ì „íŠ¸ ê°œë³„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
  - rule_id: "PERF_001"
    name: "ì—ì´ì „íŠ¸ ì„±ëŠ¥ ì¶”ì "
    metrics:
      - metric: "execution_success_rate"
        target: 0.95
        alert_threshold: 0.85
      - metric: "response_time_avg"
        target: 500  # ms
        alert_threshold: 1000
      - metric: "accuracy"
        target: 0.90
        alert_threshold: 0.75
    
  # í˜‘ì—… ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
  - rule_id: "PERF_002"
    name: "í˜‘ì—… ì„±ëŠ¥ ì¶”ì "
    metrics:
      - metric: "data_sync_rate"
        target: 0.98
        alert_threshold: 0.90
      - metric: "conflict_resolution_time"
        target: 100  # ms
        alert_threshold: 300
      - metric: "agent_coordination_score"
        target: 0.90
        alert_threshold: 0.75
    
  # ì „ì²´ ì‹œìŠ¤í…œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
  - rule_id: "PERF_003"
    name: "ì‹œìŠ¤í…œ ì„±ëŠ¥ ì¶”ì "
    metrics:
      - metric: "student_satisfaction"
        target: 0.90
        alert_threshold: 0.75
      - metric: "learning_outcome_improvement"
        target: 0.20  # +20%
        alert_threshold: 0.10
      - metric: "teacher_level_score"
        target: 90
        alert_threshold: 75

# ============================================================================
# 7. í‰ê°€ ë° ê°œì„  ë£° (Evaluation and Improvement Rules)
# ============================================================================

evaluation_rules:
  # ì¼ì¼ í‰ê°€
  - rule_id: "EVAL_001"
    name: "ì¼ì¼ í‰ê°€"
    frequency: "daily"
    time: "end_of_learning_session"
    criteria:
      - structure_integrity: 12
      - logic_coherence: 12
      - data_connectivity: 10
      - operational_verifiability: 12
      - upgrade_readiness: 8
    target_score: 48.6  # 90% of 54
    alert_threshold: 45.0  # 83% of 54
    
  # ì£¼ê°„ í‰ê°€
  - rule_id: "EVAL_002"
    name: "ì£¼ê°„ í‰ê°€"
    frequency: "weekly"
    time: "sunday"
    criteria:
      - agent_performance_avg
      - collaboration_score
      - system_health_score
    target_score: 90
    alert_threshold: 80
    
  # ì›”ê°„ í‰ê°€
  - rule_id: "EVAL_003"
    name: "ì›”ê°„ í‰ê°€"
    frequency: "monthly"
    time: "end_of_month"
    criteria:
      - learning_outcome_improvement
      - student_satisfaction
      - teacher_level_score
    target_score: 90
    alert_threshold: 85

# ============================================================================
# 8. ê°œì„  ì‚¬ì´í´ ë£° (Improvement Cycle Rules)
# ============================================================================

improvement_cycle:
  # ìë™ ê°œì„  íŠ¸ë¦¬ê±°
  - rule_id: "IMPROVE_001"
    name: "ì„±ëŠ¥ ì €í•˜ ê°ì§€ ì‹œ ê°œì„ "
    trigger:
      condition: "performance_below_threshold"
      threshold: 0.75
    actions:
      - agent: "agent22_module_improvement"
        action: "analyze_vulnerability"
        priority: "high"
      - agent: "agent22_module_improvement"
        action: "generate_improvement_proposal"
        priority: "high"
      - agent: "agent22_module_improvement"
        action: "apply_improvements"
        priority: "medium"
    
  # ì£¼ê¸°ì  ê°œì„ 
  - rule_id: "IMPROVE_002"
    name: "ì£¼ê¸°ì  ê°œì„  ì‹¤í–‰"
    trigger:
      frequency: "weekly"
    actions:
      - agent: "agent22_module_improvement"
        action: "routine_analysis"
        priority: "low"
      - agent: "agent22_module_improvement"
        action: "optimization_suggestions"
        priority: "low"

# ============================================================================
# 9. ìˆ˜í•™ êµê³¼ íŠ¹í™” ë£° (Math Subject Specific Rules)
# ============================================================================

math_specific_rules:
  # ë‹¨ì› ì—°ê³„ì„± ê¸°ë°˜ ì˜ì‚¬ê²°ì •
  - rule_id: "MATH_001"
    name: "ë‹¨ì› ì—°ê³„ì„± ê³ ë ¤"
    description: "ìˆ˜í•™ ë‹¨ì› ê°„ ì„ í›„ê´€ê³„ ë° ì—°ê³„ì„± ë°˜ì˜"
    data_source: "math_unit_relations.yaml"
    apply_to:
      - "agent02_exam_schedule"
      - "agent09_learning_management"
      - "agent17_remaining_activities"
    rules:
      - condition: "unit_prerequisites_not_met"
        action: "adjust_learning_order"
        priority: "high"
      - condition: "related_units_detected"
        action: "suggest_simultaneous_learning"
        priority: "medium"
    
  # ë‹¨ì›ë³„ ë‚œì´ë„ ê¸°ë°˜ ì „ëµ
  - rule_id: "MATH_002"
    name: "ë‚œì´ë„ ê¸°ë°˜ ì „ëµ ì¡°ì •"
    description: "ë‹¨ì›ë³„ ë‚œì´ë„ì— ë”°ë¥¸ í•™ìŠµ ì „ëµ ì°¨ë³„í™”"
    data_source: "math_unit_relations.yaml"
    apply_to:
      - "agent02_exam_schedule"
      - "agent09_learning_management"
      - "agent12_rest_routine"
    rules:
      - condition: "unit_difficulty >= 8"
        action: "increase_study_time"
        multiplier: 1.5
      - condition: "unit_difficulty <= 4"
        action: "reduce_study_time"
        multiplier: 0.8
    
  # ê³„ì‚° ì‹¤ìˆ˜ vs ê°œë… ì˜¤ë¥˜ ì°¨ë³„í™”
  - rule_id: "MATH_003"
    name: "ì˜¤ë¥˜ ìœ í˜•ë³„ ì°¨ë³„í™” ì „ëµ"
    description: "ê³„ì‚° ì‹¤ìˆ˜ì™€ ê°œë… ì˜¤ë¥˜ë¥¼ êµ¬ë¶„í•˜ì—¬ ì°¨ë³„í™”ëœ ëŒ€ì‘"
    apply_to:
      - "agent11_problem_notes"
      - "agent15_problem_redefinition"
      - "agent07_interaction_targeting"
    rules:
      - condition: "error_type == 'calculation_error'"
        action: "recommend_practice_repetition"
        strategy: "ë°˜ë³µ ì—°ìŠµ ëª¨ë“ˆ"
      - condition: "error_type == 'concept_error'"
        action: "recommend_concept_relearning"
        strategy: "ê°œë… ì¬í•™ìŠµ ëª¨ë“ˆ"

# ============================================================================
# 10. 90% ìˆ˜ì¤€ ë‹¬ì„± ì „ëµ (90% Level Achievement Strategy)
# ============================================================================

achievement_strategy:
  current_level: 65.3
  target_level: 90
  gap: 24.7
  
  phases:
    # Phase 1: êµ¬ì¡°ì  ê°œì„ 
    - phase_id: "PHASE_1"
      name: "êµ¬ì¡°ì  ê°œì„ "
      target_improvement: 9.7
      target_level: 75
      duration: "2ì£¼"
      focus_areas:
        - "ë…¼ë¦¬ì  ì¼ê´€ì„± ê°œì„ "
        - "ê¸°ë³¸ ë£°ê³¼ ì‹œë‚˜ë¦¬ì˜¤ ë£° ì—­í•  ì¬ì •ì˜"
        - "ì¤‘ë³µ ê¸°ëŠ¥ ì œê±°"
      success_criteria:
        - logic_coherence_score: ">= 12"
        - structure_integrity_score: ">= 12"
    
    # Phase 2: í˜‘ì—… ê°•í™”
    - phase_id: "PHASE_2"
      name: "í˜‘ì—… ê°•í™”"
      target_improvement: 7
      target_level: 82
      duration: "2ì£¼"
      focus_areas:
        - "ë°ì´í„° ë™ê¸°í™”ìœ¨ í–¥ìƒ (85% â†’ 98%)"
        - "ì¶©ëŒ í•´ê²° ì‹œê°„ ë‹¨ì¶• (150ms â†’ 100ms)"
        - "ì—ì´ì „íŠ¸ ì¡°ì • ì ìˆ˜ í–¥ìƒ (72% â†’ 90%)"
      success_criteria:
        - data_sync_rate: ">= 0.98"
        - conflict_resolution_time: "<= 100ms"
        - agent_coordination_score: ">= 0.90"
    
    # Phase 3: ìˆ˜í•™ íŠ¹í™” í†µí•©
    - phase_id: "PHASE_3"
      name: "ìˆ˜í•™ íŠ¹í™” í†µí•©"
      target_improvement: 4
      target_level: 86
      duration: "2ì£¼"
      focus_areas:
        - "ë‹¨ì› ì—°ê³„ì„± DB í™œìš©"
        - "ë‹¨ì›ë³„ ë‚œì´ë„ ê¸°ë°˜ ì˜ì‚¬ê²°ì •"
        - "ê³„ì‚° ì‹¤ìˆ˜ vs ê°œë… ì˜¤ë¥˜ ì°¨ë³„í™”"
      success_criteria:
        - math_specific_rules_applied: ">= 80%"
        - unit_relation_usage: ">= 90%"
        - error_classification_accuracy: ">= 85%"
    
    # Phase 4: ìµœì í™” ë° ë¯¸ì„¸ì¡°ì •
    - phase_id: "PHASE_4"
      name: "ìµœì í™” ë° ë¯¸ì„¸ì¡°ì •"
      target_improvement: 4
      target_level: 90
      duration: "2ì£¼"
      focus_areas:
        - "ì„±ëŠ¥ ìµœì í™”"
        - "ì •í™•ë„ í–¥ìƒ"
        - "ì‚¬ìš©ì ë§Œì¡±ë„ í–¥ìƒ"
      success_criteria:
        - teacher_level_score: ">= 90"
        - student_satisfaction: ">= 0.90"
        - learning_outcome_improvement: ">= 0.20"

# ============================================================================
# 11. ë°˜ë³µí‰ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸ (Iterative Evaluation Checklist)
# ============================================================================

evaluation_checklist:
  # êµ¬ì¡°ì  ì™„ì„±ë„ ì²´í¬ë¦¬ìŠ¤íŠ¸
  structure_checklist:
    - item: "ëª¨ë“  ë£°ì— rule_idì™€ description ì¡´ì¬"
      weight: 2
      current_status: "âœ…"
    - item: "Priority ì¤‘ë³µ ì—†ìŒ"
      weight: 2
      current_status: "âœ…"
    - item: "ëª¨ë“  ë£°ì— ìµœì†Œ 1ê°œ ì´ìƒì˜ condition ì •ì˜"
      weight: 2
      current_status: "âœ…"
    - item: "ëª¨ë“  ë£°ì— action ë¸”ë¡ ì¡´ì¬"
      weight: 2
      current_status: "âœ…"
    - item: "0~1 ë²”ìœ„ ë‚´ confidence ê°’ ì •ì˜"
      weight: 2
      current_status: "âœ…"
    - item: "ë£°ë³„ rationale ì¡´ì¬"
      weight: 2
      current_status: "âœ…"
  
  # ë…¼ë¦¬ì  ì¼ê´€ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸
  logic_checklist:
    - item: "ë™ì¼ ì˜ë¯¸ì˜ í•„ë“œëª… ì¼ê´€ì„±"
      weight: 2
      current_status: "âœ…"
    - item: "ë¹„êµ ì—°ì‚°ì í‘œì¤€í™”"
      weight: 2
      current_status: "âœ…"
    - item: "Action íƒ€ì… ì¼ê´€ì„±"
      weight: 2
      current_status: "âœ…"
    - item: "ì¤‘ë³µ ì˜ë¯¸ ë£° ì—†ìŒ"
      weight: 2
      current_status: "âš ï¸"
      note: "ê¸°ë³¸ ë£°ê³¼ ì‹œë‚˜ë¦¬ì˜¤ ë£° ê°„ ì¤‘ë³µ ì¡´ì¬, ì—­í•  ì¬ì •ì˜ í•„ìš”"
    - item: "Default Rule ì¡´ì¬"
      weight: 2
      current_status: "âœ…"
    - item: "ì‹œë‚˜ë¦¬ì˜¤ ìœ„ê³„ êµ¬ì¡° ìœ ì§€"
      weight: 2
      current_status: "âœ…"
  
  # ë°ì´í„° ì—°ê²°ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸
  data_checklist:
    - item: "ì…ë ¥ í•„ë“œ ì •ì˜ ëª…í™•"
      weight: 2
      current_status: "âœ…"
    - item: "ì¶œë ¥ Action ê²½ë¡œ ëª…í™•"
      weight: 2
      current_status: "âœ…"
    - item: "Null ì²´í¬ í¬í•¨"
      weight: 2
      current_status: "âœ…"
    - item: "ë°ì´í„° ìŠ¤í‚¤ë§ˆ ì¶©ëŒ ì—†ìŒ"
      weight: 2
      current_status: "âœ…"
    - item: "Derived Description ìƒì„±"
      weight: 2
      current_status: "âœ…"
  
  # ì‹¤í–‰ ê²€ì¦ ê°€ëŠ¥ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸
  execution_checklist:
    - item: "Display Message ëª…í™•ì„±"
      weight: 2
      current_status: "âœ…"
    - item: "Priority íë¦„ ìì—°ì„±"
      weight: 2
      current_status: "âœ…"
    - item: "ë£° ê°„ ì¶©ëŒ ìµœì†Œí™”"
      weight: 2
      current_status: "âœ…"
    - item: "Default Rule ë™ì‘ ê²€ì¦"
      weight: 2
      current_status: "âœ…"
    - item: "Confidence ë¶„í¬ ê· í˜•"
      weight: 2
      current_status: "âœ…"
    - item: "ë¡œê·¸ ì¶”ì  ê°€ëŠ¥ì„±"
      weight: 2
      current_status: "âœ…"
  
  # ìê°€ ì—…ê·¸ë ˆì´ë“œ ê°€ëŠ¥ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸
  upgrade_checklist:
    - item: "ë‹¨ê³„ êµ¬ì¡° ìœ ì§€"
      weight: 2
      current_status: "âœ…"
    - item: "ìƒí•˜ìœ„ ë£° ì—°ê²°ì„±"
      weight: 2
      current_status: "âœ…"
    - item: "ìê°€ í‰ê°€ ê°€ëŠ¥"
      weight: 2
      current_status: "âœ…"
    - item: "Agent 22 ì—°ê³„ì„±"
      weight: 2
      current_status: "âœ…"

# ============================================================================
# 12. ë©”íƒ€ë°ì´í„° (Metadata)
# ============================================================================

metadata:
  version: "2.0"
  created_date: "2025-01-27"
  last_updated: "2025-01-27"
  author: "Claude Code"
  description: "22ê°œ ì—ì´ì „íŠ¸ì˜ ì™„ì „í•œ í˜‘ì—…ì„ ìœ„í•œ orchestration ë£°"
  target_completion: "2025-03-31"
  evaluation_schedule:
    daily: true
    weekly: true
    monthly: true
    quarterly: true
  maintenance_schedule:
    weekly_review: true
    monthly_optimization: true
    quarterly_major_update: true

