# 의사결정 지식
# Agent 16 - Interaction Preparation

> **상태:** 완료  
> **작성일:** 2025-01-21  
> **목표:** 현직 수학선생님 수준의 90% 달성

---

## 개요

이 문서는 Agent 16 (상호작용 준비)의 의사결정 프로세스와 관련 지식을 정리합니다. 현직 수학선생님이 학생과 상호작용을 준비할 때 고려하는 요소들을 반영하여 90% 수준에 도달하도록 설계되었습니다.

---

## 의사결정 프레임워크

### 1단계: 학생 상태 파악 (Strategy Step 1)

**목적**: 상호작용 준비에 필요한 모든 정보 수집

**핵심 판단 기준**:
1. 수학 학습 단계 (개념/유형/심화/기출)
2. 수학 성과 (정답률, 단원별 성취도)
3. 학생 수준 (하위권/중위권/상위권)
4. 수학 학습 스타일 (계산형/개념형/응용형)
5. 취약 단원 목록
6. 학원 수업 맥락 (해당 시)
7. 문제 풀이 상태 (해당 시)

**의사결정 프로세스**:
```
정보 수집 필요 여부 확인
  ↓
필수 정보 결측 시 → 학생설문 또는 선생님 체크리스트 입력 요청
  ↓
수집된 정보 검증
  ↓
데이터 품질 확인 → Step 2로 전달
```

---

### 2단계: 세계관 선택 및 스토리 구조 설계 (Strategy Step 2)

**목적**: 학생이 몰입할 수 있는 상호작용 구조 설계

**핵심 판단 기준**:

#### 2.1 학습 단계별 세계관 매핑
- 개념 학습 → 탐구학습/도제학습 모드
- 유형 연습 → 단기미션/자기주도 모드
- 심화 문제 → 자기성찰/맞춤학습 모드
- 기출 문제 → 시험대비/시간성찰 모드

#### 2.2 학원 수업 맥락 고려
- 수업 전: 예습 가이드 → 맞춤학습/도제학습/단기미션 모드
- 수업 후: 복습 안내 → 자기주도/도제학습/자기성찰 모드

#### 2.3 문제 풀이 중 실시간 준비
- 막힘 감지 (≥5분) → 도제학습/단기미션 모드
- 계산 실수 패턴 → 자기성찰 모드
- 진도 지연 → 시간성찰 모드

#### 2.4 단원별 취약점 반영
- 취약 단원 학습 → 도제학습 모드 (우선순위 높음)
- 단원별 특성 반영 (함수: 그래프 중심, 도형: 작도 중심)

#### 2.5 학생 수준별 차별화
- 하위권 → 자기성찰 모드 (격려 중심)
- 중위권 → 단기미션 모드 (도전 중심)
- 상위권 → 탐구학습 모드 (심화 중심)

#### 2.6 상호작용 연속성 유지
- 이전 세계관과 호환성 확인
- 캐릭터 일관성 유지
- 감정 톤 보존

**의사결정 프로세스**:
```
Step 1 데이터 수신
  ↓
우선순위 기준 적용 (긴급도 > 취약도 > 학생 수준 > 학습 단계)
  ↓
세계관 선택 (매핑 로직 적용)
  ↓
스토리 테마 및 톤 설정
  ↓
충돌 해결 (여러 조건 충돌 시 우선순위 기준 적용)
  ↓
이전 상호작용과 연속성 확인
  ↓
최종 세계관 및 스토리 구조 결정
  ↓
Agent 17로 전달
```

---

## 핵심 판단 기준

### 우선순위 결정 기준

1. **긴급도** (가장 높은 우선순위)
   - 문제 풀이 중 막힘 감지
   - 학원 수업 전후 상호작용 필요
   - 일반 학습 준비

2. **취약도**
   - 취약 단원 학습 시 → 도제학습 모드 우선
   - 보통 단원 → 일반 세계관 선택

3. **학생 수준**
   - 하위권 → 격려 중심 (자기성찰 모드)
   - 중위권 → 도전 중심 (단기미션 모드)
   - 상위권 → 심화 중심 (탐구학습 모드)

4. **학습 단계**
   - 기출 > 심화 > 유형연습 > 개념학습

### 세계관 선택 로직

```python
def select_worldview(student_state):
    # 우선순위 1: 긴급 상황
    if student_state.problem_solving_stuck:
        return select_by_problem_type(student_state)
    
    # 우선순위 2: 학원 수업 맥락
    if student_state.academy_pre_class_needed:
        return select_by_preparation_type(student_state)
    if student_state.academy_post_class_needed:
        return select_by_understanding_level(student_state)
    
    # 우선순위 3: 학습 단계
    if student_state.math_learning_stage == "개념학습":
        return select_by_question_frequency(student_state)
    elif student_state.math_learning_stage == "유형연습":
        return select_by_motivation(student_state)
    elif student_state.math_learning_stage == "심화":
        return select_by_fatigue(student_state)
    elif student_state.math_learning_stage == "기출":
        return select_by_d_day(student_state)
    
    # 우선순위 4: 취약 단원
    if student_state.current_unit in student_state.weak_units:
        return "도제학습"
    
    # 우선순위 5: 학생 수준
    if student_state.student_level == "하위권":
        return "자기성찰"
    elif student_state.student_level == "상위권":
        return "탐구학습"
    else:
        return "단기미션"
```

---

## 사례 및 패턴

### 사례 1: 개념 학습 중 질문 빈도 높은 학생

**상황**:
- 학습 단계: 개념학습
- 질문 빈도: 높음
- 학습 스타일: 개념형

**의사결정**:
1. 학습 단계 → 개념학습 감지
2. 질문 빈도 높음 → 도제학습 모드 선택
3. 스토리 테마: "선생님과 함께하는 개념 이해"
4. 톤: 안내형

**결과**: 도제학습 모드로 상호작용 준비 완료

---

### 사례 2: 유형 연습 중 동기 저하 학생

**상황**:
- 학습 단계: 유형연습
- 학생 수준: 하위권
- 동기: 낮음

**의사결정**:
1. 학습 단계 → 유형연습 감지
2. 동기 저하 + 하위권 → 단기미션 모드 선택
3. 스토리 테마: "오늘 3개 유형 완료 목표"
4. 톤: 목표 지향형

**결과**: 단기미션 모드로 상호작용 준비 완료

---

### 사례 3: 문제 풀이 중 막힘 감지

**상황**:
- 문제 풀이 시간: 7분 (임계값 5분 초과)
- 문제 유형: 개념 문제
- 진행도: 변화 없음

**의사결정**:
1. 막힘 감지 (긴급도 높음) → 즉시 상호작용 준비
2. 개념 문제 → 도제학습 모드 선택
3. 스토리 테마: "막힘을 돌파하는 순간"
4. 톤: 지원형
5. 힌트 준비

**결과**: 도제학습 모드로 즉시 상호작용 준비 완료

---

### 사례 4: 학원 수업 후 이해 부족 학생

**상황**:
- 학원 수업 완료: true
- 수업 내용: 함수 단원
- 이해도: 이해 부족

**의사결정**:
1. 학원 수업 후 감지 → 학원 맥락 우선
2. 이해 부족 → 자기성찰 모드 선택
3. 스토리 테마: "학원 수업 복습 및 정리"
4. 톤: 지원형
5. 추가 설명 준비

**결과**: 자기성찰 모드로 상호작용 준비 완료

---

### 사례 5: 취약 단원 학습 중 상위권 학생

**상황**:
- 현재 단원: 함수 (취약 단원)
- 학생 수준: 상위권
- 학습 단계: 유형연습

**의사결정**:
1. 취약 단원 감지 → 취약도 우선순위 적용
2. 취약 단원 → 도제학습 모드 선택 (우선순위 높음)
3. 단원 특성 반영: 그래프 이해 중심
4. 스토리 테마: "취약 단원 집중 지원"
5. 톤: 지원형

**결과**: 도제학습 모드로 상호작용 준비 완료 (취약 단원 우선)

---

## 참고 자료

### 관련 문서
- `teacher_level_evaluation.md`: 현직 선생님 수준 비교 평가 보고서
- `strategy_step1.md`: 학생 상태 파악 및 데이터 수집 전략
- `strategy_step2.md`: 세계관 선택 및 스토리 구조 설계 전략
- `rules.yaml`: 구체적인 룰 정의

### 데이터 소스
- **학생설문**: 학습 단계, 성과, 취약 단원 등
- **선생님 체크리스트**: 학습 단계별 세계관 매핑, 학원 수업 전후 준비 등
- **선생님 텍스트 입력**: 단원별 전략, 계산 실수 패턴 등
- **자동 수집**: 문제 풀이 로그, 상호작용 효과성 데이터

### 연계 에이전트
- **Agent 01**: 수학 학습 스타일 데이터
- **Agent 05**: 학습 감정 데이터
- **Agent 13**: 학습 이탈 패턴 데이터
- **Agent 14**: 현재 위치 데이터
- **Agent 15**: 문제 재정의 데이터
- **Agent 17**: 상호작용 콘텐츠 생성 (다음 단계)

---

**작성 완료일**: 2025-01-21  
**다음 업데이트**: Phase 1 완료 후

