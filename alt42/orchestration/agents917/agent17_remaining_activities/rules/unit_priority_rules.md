# 단원별 우선순위 설정 룰

## 목적
수학 단원별 난이도, 출제 비중, 학습 시간을 기반으로 잔여 활동의 우선순위를 설정하여 효율적인 활동 조정을 수행합니다.

---

## 데이터 소스
- `math_unit_priority.yaml`: 단원별 난이도, 출제 비중, 학습 시간 정보
- Agent 14: 현재 진행 위치 및 완료율 데이터
- Agent 03: 목표 관련 데이터 (시험 일정, 목표 점수 등)

---

## 우선순위 계산 알고리즘

### 기본 우선순위 점수 계산

```
기본 우선순위 점수 = (
  출제 비중 × 0.4 +           # 출제 비중 40%
  (1 - 난이도/10) × 0.2 +    # 난이도 역수 20% (쉬울수록 높음)
  완료 용이성 × 0.2 +         # 완료 용이성 20%
  (1 - 병목 위험도) × 0.2    # 병목 위험도 역수 20%
)
```

### 시간 제약별 우선순위 조정

#### 시간 충분 (가용 시간 ≥ 예상 시간의 1.2배)
- **전략**: 우선순위 높은 단원(함수, 이차함수) 집중
- **조정**: 우선순위 높은 단원에 +0.1 가중치 추가
- **예시**: 함수 단원(우선순위 0.95) → 1.05로 조정

#### 시간 적당 (가용 시간 = 예상 시간의 0.8~1.2배)
- **전략**: 출제 비중 높은 단원 우선, 쉬운 단원 후순위
- **조정**: 가중치 변화 없음

#### 시간 부족 (가용 시간 < 예상 시간의 0.8배)
- **전략**: 완료 용이성 높은 단원(통계 등) 우선, 어려운 단원 연기
- **조정**: 어려운 단원에 -0.1 페널티
- **예시**: 이차함수 단원(우선순위 0.95) → 0.85로 조정

---

## 우선순위 설정 규칙

### Rule 1: 출제 비중 기반 우선순위
- **조건**: 시험 일정이 임박한 경우 (D-7 이내)
- **규칙**: 출제 비중이 높은 단원을 우선순위 상위로 배정
- **예시**: 
  - 함수 단원(출제 비중 30%) → 우선순위 높음
  - 통계 단원(출제 비중 15%) → 우선순위 낮음

### Rule 2: 난이도 기반 우선순위
- **조건**: 시간 여유가 있을 때
- **규칙**: 어려운 단원(함수, 이차함수)을 우선 배정
- **조건**: 시간 부족할 때
- **규칙**: 쉬운 단원(통계)을 우선 배정

### Rule 3: 완료 용이성 기반 우선순위
- **조건**: 완료율이 낮을 때 (< 50%)
- **규칙**: 완료 용이성이 높은 단원을 우선 배정하여 완료율 향상
- **예시**: 통계 단원(완료 용이성 0.85) → 우선 배정

### Rule 4: 병목 위험도 기반 우선순위
- **조건**: 병목 위험이 높은 단원
- **규칙**: 병목 위험이 낮은 단원을 우선 배정하여 진행 정체 방지
- **예시**: 통계 단원(병목 위험도 0.2) → 우선 배정

---

## 활동 조정 프로세스

### Step 1: 단원별 우선순위 점수 계산
1. 각 잔여 활동의 단원 정보 확인
2. `math_unit_priority.yaml`에서 단원별 정보 조회
3. 기본 우선순위 점수 계산

### Step 2: 시간 제약 분석
1. 가용 시간 확인
2. 예상 소요 시간 계산
3. 시간 제약 정도 판정 (충분/적당/부족)

### Step 3: 우선순위 조정
1. 시간 제약별 가중치 적용
2. 최종 우선순위 점수 계산
3. 우선순위 순으로 정렬

### Step 4: 활동 계획 수립
1. 우선순위 상위 활동부터 가용 시간 내 배정
2. 시간 초과 시 하위 우선순위 활동 연기
3. 최종 활동 계획 생성

---

## 코칭 템플릿

### 시간 충분 시
- "시간이 충분하니 출제 비중이 높은 함수 단원부터 집중적으로 학습합시다."
- "함수 단원은 시험에서 30% 출제되므로 우선순위가 높습니다."

### 시간 부족 시
- "시간이 부족하니 완료하기 쉬운 통계 단원부터 빠르게 완료하고, 어려운 이차함수 단원은 내일로 연기합시다."
- "통계 단원은 상대적으로 쉬워서 시간 부족 시 후순위로 배정할 수 있습니다."

### 완료율 낮을 시
- "완료율이 낮으니 완료하기 쉬운 단원부터 완료하여 성취감을 높여봅시다."
- "통계 단원부터 완료하면 완료율이 빠르게 향상됩니다."

---

## 데이터 수집 필요 항목

### 학생 설문
- "어떤 단원이 시험에서 많이 나오나요?"
- "어떤 단원이 가장 어렵나요?"
- "어떤 단원을 완료하는 데 시간이 많이 걸리나요?"

### 선생님 체크리스트
- [ ] 단원별 출제 비중 정의
- [ ] 단원별 난이도 평가
- [ ] 단원별 평균 학습 시간 산정

### 선생님 텍스트 입력
- "함수 단원: 출제 비중 30%, 난이도 8/10, 평균 학습 시간 6시간 → 우선순위 높음"
- "통계 단원: 출제 비중 15%, 난이도 4/10, 평균 학습 시간 3시간 → 우선순위 낮음"
- "도형 단원: 출제 비중 25%, 난이도 7/10, 평균 학습 시간 5시간 → 우선순위 중간"

---

## 예시 시나리오

### 시나리오 1: 시간 충분 + 시험 임박
**상황**: 가용 시간 3시간, 시험 D-5, 잔여 활동: 함수, 통계, 도형

**우선순위 계산**:
- 함수: 출제 비중 30% × 0.4 + (1-8/10) × 0.2 + 0.5 × 0.2 + (1-0.7) × 0.2 = 0.22
- 통계: 출제 비중 15% × 0.4 + (1-4/10) × 0.2 + 0.85 × 0.2 + (1-0.2) × 0.2 = 0.16
- 도형: 출제 비중 25% × 0.4 + (1-7/10) × 0.2 + 0.5 × 0.2 + (1-0.7) × 0.2 = 0.18

**시간 제약 조정** (시간 충분 → 함수 +0.1):
- 함수: 0.22 + 0.1 = 0.32
- 통계: 0.16
- 도형: 0.18

**최종 순서**: 함수 → 도형 → 통계

### 시나리오 2: 시간 부족 + 완료율 낮음
**상황**: 가용 시간 1시간, 완료율 30%, 잔여 활동: 함수, 통계

**우선순위 계산**:
- 함수: 출제 비중 30% × 0.4 + (1-8/10) × 0.2 + 0.5 × 0.2 + (1-0.7) × 0.2 = 0.22
- 통계: 출제 비중 15% × 0.4 + (1-4/10) × 0.2 + 0.85 × 0.2 + (1-0.2) × 0.2 = 0.16

**시간 제약 조정** (시간 부족 → 함수 -0.1, 통계는 완료 용이성 높음):
- 함수: 0.22 - 0.1 = 0.12
- 통계: 0.16 + 0.1 (완료 용이성 보너스) = 0.26

**최종 순서**: 통계 → 함수(일부만)

---

Last Updated: 2025-01-21

