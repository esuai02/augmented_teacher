# 🧠 온톨로지 추론 실험실 사용 가이드

**대화형 추론 실험 인터페이스**

---

## 🌐 접속 URL

```
https://mathking.kr/moodle/local/augmented_teacher/alt42/ontology_brain/inference_lab.php
```

---

## ✨ 주요 기능

### 1️⃣ 실시간 추론 실험
- 학생 이름과 감정 상태를 입력
- 즉시 추론 엔진 실행
- 결과를 시각적으로 확인

### 2️⃣ 빠른 예제 버튼
- 😰 좌절 → "격려 필요"
- 😊 집중 → "학습 진행"
- 😴 피로 → "휴식 필요"

### 3️⃣ 일관성 검증
- 온톨로지 구조 검증
- 규칙 일관성 체크

---

## 🎯 사용 방법

### 방법 1: 빠른 예제 사용

1. 상단의 이모지 버튼 클릭 (😰 좌절, 😊 집중, 😴 피로)
2. "추론 실행" 버튼 클릭
3. 결과 확인

### 방법 2: 직접 입력

1. **학생 이름** 입력 (예: 철수, 영희, 민수)
2. **감정 상태** 선택
   - 좌절 (Frustrated)
   - 집중 (Focused)
   - 피로 (Tired)
   - 기쁨 (Happy)
   - 불안 (Anxious)
3. "추론 실행" 버튼 클릭
4. 결과 확인

### 방법 3: 일관성 검증

1. "일관성 검증" 버튼 클릭
2. 온톨로지 구조 검증 결과 확인

---

## 📊 추론 규칙

현재 시스템에 정의된 규칙:

| 입력 감정 | 추론 결과 |
|----------|----------|
| 좌절 | 격려 필요 |
| 집중 | 학습 진행 |
| 피로 | 휴식 필요 |

💡 **Tip**: 위 3가지 감정 외의 감정을 입력하면 "적용 가능한 규칙 없음"이 표시됩니다.

---

## 🎨 인터페이스 구성

```
┌─────────────────────────────────────────────┐
│        🧠 온톨로지 추론 실험실                  │
└─────────────────────────────────────────────┘

┌─────────────────┬──────────────────────────┐
│  📥 실험 입력    │   📋 추론 규칙             │
│                 │                          │
│  [😰] [😊] [😴] │   규칙 1: 좌절 → 격려 필요  │
│                 │   규칙 2: 집중 → 학습 진행  │
│  학생 이름: ___  │   규칙 3: 피로 → 휴식 필요  │
│  감정 상태: [▼] │                          │
│                 │                          │
│  [▶️ 추론 실행]  │                          │
│  [✓ 일관성 검증] │                          │
└─────────────────┴──────────────────────────┘

┌─────────────────────────────────────────────┐
│         📊 추론 결과                          │
│                                             │
│  ✓ 성공                                     │
│  추론 결과: 철수 (좌절)                       │
│  ┌───────────────────────────────────────┐ │
│  │ ============                          │ │
│  │ 📥 입력 사실: {'student': '철수', ...  │ │
│  │ ============                          │ │
│  │                                       │ │
│  │ ✓ 규칙 적용: {'emotion': '좌절'} → 격려│ │
│  │                                       │ │
│  │ ============                          │ │
│  │ 📊 추론 결과:                          │ │
│  │   → 격려 필요                          │ │
│  │ ============                          │ │
│  └───────────────────────────────────────┘ │
└─────────────────────────────────────────────┘
```

---

## 🔧 기술적 특징

### Frontend
- **순수 HTML/CSS/JavaScript**: 프레임워크 없이 경량 구현
- **AJAX 통신**: 페이지 새로고침 없이 실시간 응답
- **반응형 디자인**: 모바일/태블릿/데스크톱 지원

### Backend
- **PHP**: AJAX 요청 처리
- **Python**: 실제 추론 엔진 실행
- **UTF-8 인코딩**: 한글 완벽 지원

### 추론 엔진
- **동적 스크립트 생성**: 입력값에 따라 Python 스크립트 자동 생성
- **규칙 기반 추론**: if-then 조건 매칭
- **실시간 실행**: 임시 파일 생성 및 즉시 삭제

---

## 📸 스크린샷 예시

### 초기 화면
![초기 화면](예제 버튼 3개 + 입력 폼 + 규칙 설명)

### 추론 결과
![추론 결과](성공 배지 + 실행 로그 + 결론)

### 일관성 검증
![일관성 검증](검증 완료 배지 + 검증 결과)

---

## 🚀 다음 단계 (향후 개선 가능)

### Phase 2: 규칙 편집 기능
- 웹에서 직접 규칙 추가/수정/삭제
- 새로운 감정-결론 매핑 생성

### Phase 3: 온톨로지 편집기
- 개념(Class) 추가/수정
- 관계(Property) 정의
- 시각적 그래프 표시

### Phase 4: 히스토리 기능
- 실험 기록 저장
- 과거 실험 결과 조회
- 통계 및 분석

### Phase 5: 고급 추론
- 복합 조건 (AND, OR)
- 우선순위 규칙
- 확률 기반 추론

---

## 💡 사용 팁

1. **빠른 테스트**: 상단 이모지 버튼 사용
2. **새로운 감정 시도**: 규칙에 없는 감정 입력해보기
3. **검증 먼저**: 시스템 변경 후 일관성 검증 권장
4. **결과 분석**: 실행 로그에서 어떤 규칙이 적용되었는지 확인

---

## ❓ 문제 해결

### Q: "적용 가능한 규칙 없음"이 나옵니다
A: 현재 시스템은 "좌절", "집중", "피로" 3가지 감정만 인식합니다. 다른 감정은 규칙이 정의되어 있지 않습니다.

### Q: 결과가 표시되지 않습니다
A: 브라우저 콘솔(F12)에서 에러 확인 또는 페이지 새로고침 후 재시도

### Q: Python 실행 오류가 발생합니다
A: 서버의 Python 환경 및 파일 권한을 확인하세요

---

## 📚 관련 문서

- [테스트 가이드](../tests/QUICKSTART.md)
- [온톨로지 구조](../examples/01_minimal_ontology.json)
- [추론 엔진 코드](../examples/02_minimal_inference.py)

---

**버전**: 1.0
**최종 업데이트**: 2025-11-01
**개발**: Mathking 자동개입 팀
