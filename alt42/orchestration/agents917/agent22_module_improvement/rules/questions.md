💬 포괄형 질문 1

“전체 에이전트들의 실행 데이터를 종합해서, 현재 시스템이 어디에서 비효율이나 불안정성을 보이는지 진단해줘.”
→ 에이전트별 실행 로그·룰 작동 빈도·리소스 사용량·실패 패턴을 통합 분석하여 병목 지점, 불균형 동작, 데이터 누락 등 구조적 취약지점을 식별하고, 우선적으로 점검해야 할 모듈과 대응 절차를 제시.

💬 포괄형 질문 2

“각 에이전트의 룰 구조와 분석 패턴을 비교해, 중복·충돌·누락을 최소화하기 위한 최적의 개선 방향을 제안해줘.”
→ rules.yaml 간 조건 중복·충돌 가능성·엣지케이스 누락 여부를 기준으로 룰 네트워크 최적화 전략(통합·모듈화·의존성 정리·검증 시퀀스)을 도출하고, 영향도·노력도 기반의 개선 우선순위 맵을 작성.

💬 포괄형 질문 3

“이 시스템이 장기적으로 안정적이고 자동 진화 가능한 구조로 가려면, 어떤 업그레이드 루프와 검증 체계를 지금부터 설계해야 할까?”
→ 자가 업그레이드 루프(데이터 수집 → 취약점 진단 → 3 File 생성 → AI 검토 → 검증 → 배포) 전체를 점검하며, 지속적 성능 향상·오류 자가복구·자동화 검증 파이프라인을 중심으로 중장기 진화 로드맵을 제안.


# 1. 실시간 개입에서 잘못된 개입이 발생했을 때

* 이 상황 설명: 특정 학생에게 실행된 개입이 기대한 효과를 내지 못하거나 부작용(혼란, 이탈)을 유발했을 때.
* 맞춤형 복합질문:

  1. "해당 개입이 실행된 모든 로그(입력 payload, 실행된 룰 ID, 중간 계산값, 출력 결과)를 시간순으로 보여주고, 동일 입력에 대해 이전 30일 내에 나온 다른 출력들과 차이를 분석해줘 — 어떤 룰이 다른 결과를 만들었나?"
  2. "개입 실패 사례의 공통 패턴(입력 조합, 세션 길이, 학생 상태 태그 등)을 추출하고, 이 패턴을 만족하는 경우에 적용된 룰을 우선 보수적으로 변경할 수 있는 안전 페일백(fallback) 규칙 초안을 3가지 제안해줘."
  3. "해당 실패 케이스에서 Agent별 신뢰도(confidence_score)와 중간값(intermediate_values) 중 어떤 값이 정상 범위를 벗어났는지 표로 정리하고, 경보 트리거 임계값(예: 신뢰도 < X)이 있다면 권장값을 제안해줘."
  4. "이 케이스를 재현하기 위한 최소 입력 세트(핵심 필드)와 단위 테스트 스크립트 초안을 만들어줘 — 재현 불가 시 어떤 추가 로그를 남겨야 하는지도 포함해줘."

# 2. 룰 간 충돌 또는 중복 징후가 감지될 때

* 이 상황 설명: 서로 다른 에이전트가 같은 조건에서 상반된 결정을 내리거나, 동일 로직이 여러 룰에 중복 존재할 때.
* 맞춤형 복합질문:

  1. "전체 rules.yaml(Agent 01~22)을 스캔해서 동일 조건(또는 매우 유사한 조건)을 사용하는 룰들을 군집화하고, 중복도·충돌 위험 점수를 매겨 상위 10개를 리포트해줘."
  2. "군집화된 룰 그룹별로 입력 예시를 넣었을 때 예상되는 상충 출력(예: 개입 권장 vs 미권장)을 비교 표로 제시하고, 우선 통합 또는 우회할 안전 전략을 2안 제시해줘."
  3. "중복으로 추정되는 룰들을 모듈화하여 공통 라이브러리화할 때의 의존성 지도(의존성 그래프)와 예상 리팩토링 작업량(노력도 추정)을 내줘."

# 3. 분석 결과 일관성(재현성)이 낮을 때

* 이 상황 설명: 동일 입력으로 반복 실행했을 때 결과가 달라지거나 근거 로그가 부족할 때.
* 맞춤형 복합질문:

  1. "최근 100건의 동일/유사 입력 케이스에서 출력 분산도를 계산하고, 분산이 큰 항목(우선순위, 타이밍, 액션)의 상관변수를 찾아줘."
  2. "각 분석 결과에 대해 `explainability` 필드를 추가하는 표준 스키마(예: used_rule_ids, confidence, intermediate_values, timestamp)를 제안하고, 마이그레이션 시 체크리스트를 작성해줘."
  3. "출력 불일치가 발생했을 때 자동으로 비교·재실행하는 워크플로우(트리거 조건, 최대 재시도 횟수, 재시도 시 보존할 로그 범위)를 설계해줘."

# 4. 룰 커버리지(엣지케이스) 부족이 의심될 때

* 이 상황 설명: 드문 입력 조합에서 처리되지 않거나 fallback 없이 실패가 발생할 때.
* 맞춤형 복합질문:

  1. "실행 로그에서 예외(handled/unhandled) 케이스를 집계하고, 미처리된 입력 조합을 빈도순·심각도순으로 정렬해 상위 20개를 보여줘."
  2. "각 미처리 케이스에 대해 안전한 default 행동(fallback policy) 3종을 제안하고, 각각의 예상 영향(학생 혼란도, 개입 누락 리스크)을 평가해줘."
  3. "엣지케이스를 자동 생성하는 테스트 시나리오(입력 변형 규칙 포함)와 이를 CI에 통합하는 방법을 단계별로 작성해줘."

# 5. 데이터 스키마 불일치로 에러/예외가 발생할 때

* 이 상황 설명: 에이전트 간 주고받는 필드명이 달라 변환로직에서 누락이나 타입오류가 발생할 때.
* 맞춤형 복합질문:

  1. "현재 에이전트 간 사용되는 주요 필드 목록(필드명·타입·nullable 여부)을 자동으로 수집해 비교 테이블을 만들어줘 — 불일치 필드와 발생 빈도를 표시해줘."
  2. "권장 표준 스키마(v1)와 버전 관리 전략(버전명, 마이그레이션 규칙, 호환성 레이어)을 제안하고, 변환 유틸 예시 코드를 pseudocode로 제공해줘."
  3. "스키마 불일치 발생 시 페일오버/알림 정책(누가, 어떤 채널로, 어떤 포맷의 알림)을 설계해줘."

# 6. 성능(지연/리소스) 문제가 관찰될 때

* 이 상황 설명: 워크플로우 지연, CPU·메모리 급증 등으로 동시 처리량이 떨어질 때.
* 맞춤형 복합질문:

  1. "에이전트별 평균 실행시간·피크 실행시간·메모리 사용량을 최근 7일 기준으로 시계열 표와 상위 10개의 피크 이벤트 로그를 제공하고, 병목 구간(시간대·에이전트)을 식별해줘."
  2. "병렬화·캐싱·룰 실행 순서 최적화를 적용할 경우 예상 성능 향상(정량적 추정)을 시나리오별로 제시하고, 우선 적용할 최적화 3가지를 권고해줘."
  3. "리소스 초과 시 임시 경감(스로틀링) 정책과 긴급모드(예: 비핵심 룰 비활성화) 설계안을 작성해줘."

# 7. 모니터링·알림 체계가 약할 때

* 이 상황 설명: 취약점 발견 후 알림이 늦거나 불명확해서 대응이 늦어지는 경우.
* 맞춤형 복합질문:

  1. "현재 존재하는 알림(조건·수신자·우선순위)을 분석해 빈틈(예: 룰 충돌, 신뢰도 급락 미포함)을 찾아 리포트하고, 개선된 알림 룰 세트를 제안해줘."
  2. "알림 우선도에 따른 대응 플레이북(긴급·중간·저 우선도 각각의 담당자, 권장 초기조치)을 만들어줘."
  3. "알림 피로도를 줄이기 위한 집계·오케스트레이션 로직(예: 같은 문제군의 반복 알림 합산/요약)을 설계해줘."

# 8. 자동 업그레이드(3-File → 코드 변경) 전 검토 단계가 필요할 때

* 이 상황 설명: AI가 제안한 변경을 자동 적용하기 전에 개발자가 검토할 문서(3 File)를 필요로 할 때.
* 맞춤형 복합질문:

  1. "3-File 시스템(Problem Definition, Improvement Design, Execution Plan) 초안을 자동으로 생성할 때 포함해야 할 최소 항목(파일별 체크리스트)을 제공하고, 각 항목에 대해 샘플 콘텐츠(예: 룰 변경 diff, 테스트 케이스)를 채워줘."
  2. "자동 업그레이드 시나리오 별(소규모 룰 패치 vs 아키텍처 변경) 위험도·롤백 절차·검증 체크리스트를 표로 정리해줘."
  3. "개발자 빠른 검토를 위해 요약 섹션(핵심 변경점, 예상 영향, 테스트 통과 조건)을 생성하는 템플릿과 자동 생성 스크립트 예시를 만들어줘."

---

## 🗺️ 온톨로지 매핑 (alphatutor_ontology.owl)

각 질문에서 사용하는 데이터 소스는 온톨로지에 매핑되어 있습니다. 자세한 매핑 정보는 `metadata.md` 파일을 참조하세요.

### 포괄형 질문 1: 시스템 비효율 및 불안정성 진단
- **핵심 온톨로지**: `SystemInefficiencyInstability`
- **주요 데이터 소스**: `agent_execution_log`, `rule_activation_frequency`, `resource_usage`, `failure_pattern`

### 포괄형 질문 2: 룰 네트워크 최적화
- **핵심 온톨로지**: `RuleNetworkOptimization`
- **주요 데이터 소스**: `rule_condition_duplication`, `rule_conflict_possibility`, `edge_case_missing`

### 포괄형 질문 3: 자동 진화 구조 설계
- **핵심 온톨로지**: `AutoEvolutionStructure`
- **주요 데이터 소스**: `data_collection`, `vulnerability_diagnosis`, `file_generation`, `ai_review`, `verification`, `deployment`

### 상황별 질문 온톨로지 매핑
- **상황 1 (개입 실패)**: `FailurePattern`, `AgentExecutionLog`
- **상황 2 (룰 충돌)**: `RuleConflictPossibility`, `RuleConditionDuplication`
- **상황 3 (일관성 문제)**: `Verification`, `SystemInefficiencyInstability`
- **상황 4 (엣지케이스)**: `EdgeCaseMissing`, `VulnerabilityAnalysis`
- **상황 5 (스키마 불일치)**: `DataCollection`, `Verification`
- **상황 6 (성능 문제)**: `ResourceUsage`, `SystemInefficiencyInstability`
- **상황 7 (모니터링)**: `VerificationSystem`, `LongTermStability`
- **상황 8 (자동 업그레이드)**: `ThreeFileSystemDocument`, `AutoEvolutionStructure`
 