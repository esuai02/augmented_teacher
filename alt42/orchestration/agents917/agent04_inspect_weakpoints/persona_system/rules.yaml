# Agent04 Persona System Rules
# í•™ìŠµ ìƒí™©ë³„ í˜ë¥´ì†Œë‚˜ ì‹œìŠ¤í…œ ê·œì¹™ ì •ì˜
# Version: 2.0
# Last Updated: 2025-12-03

# ==============================================================================
# ì‹œìŠ¤í…œ ë©”íƒ€ë°ì´í„°
# ==============================================================================
metadata:
  name: "Agent04 Persona System"
  version: "2.0.0"
  description: "í•™ìŠµ ìƒí™©ë³„ ì¸ì§€ê´€ì„± íŒ¨í„´ ë¶„ì„ ë° ê°œì„  ì „ëµ ì œê³µ"
  author: "Augmented Teacher Team"
  last_updated: "2025-12-03"

# ==============================================================================
# ìƒí™©ë³„ í˜ë¥´ì†Œë‚˜ íŒŒì¼ ë§¤í•‘
# ==============================================================================
situation_files:
  1:
    id: "concept_understanding"
    name: "ê°œë…ì´í•´"
    file: "1_concept_understanding.php"
    description: "ê°œë… í•™ìŠµ ì‹œ ë°œìƒí•˜ëŠ” ì¸ì§€ê´€ì„± íŒ¨í„´"
    icon: "ğŸ“–"
    color: "#3b82f6"

  2:
    id: "type_learning"
    name: "ìœ í˜•í•™ìŠµ"
    file: "2_type_learning.php"
    description: "ìœ í˜•ë³„ ë¬¸ì œ í•™ìŠµ ì‹œ ë°œìƒí•˜ëŠ” ì¸ì§€ê´€ì„± íŒ¨í„´"
    icon: "ğŸ“"
    color: "#8b5cf6"

  3:
    id: "problem_solving"
    name: "ë¬¸ì œí’€ì´"
    file: "4_problem_solving.php"
    description: "ë¬¸ì œ í’€ì´ ì‹œ ë°œìƒí•˜ëŠ” ì¸ì§€ê´€ì„± íŒ¨í„´"
    icon: "ğŸ§®"
    color: "#ef4444"
    note: "ê¸°ì¡´ config.phpì—ì„œ ì´ì „"

  4:
    id: "wrong_answer_note"
    name: "ì˜¤ë‹µë…¸íŠ¸"
    file: "5_wrong_answer_note.php"
    description: "ì˜¤ë‹µ ì •ë¦¬ ë° ë³µìŠµ ì‹œ ë°œìƒí•˜ëŠ” ì¸ì§€ê´€ì„± íŒ¨í„´"
    icon: "ğŸ“‹"
    color: "#f59e0b"

  5:
    id: "qa_session"
    name: "ì§ˆì˜ì‘ë‹µ"
    file: "6_qa_session.php"
    description: "ì§ˆë¬¸ ë° ë‹µë³€ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì¸ì§€ê´€ì„± íŒ¨í„´"
    icon: "ğŸ’¬"
    color: "#10b981"

  6:
    id: "review_activity"
    name: "ë³µìŠµí™œë™"
    file: "7_review_activity.php"
    description: "ë³µìŠµ í™œë™ ì‹œ ë°œìƒí•˜ëŠ” ì¸ì§€ê´€ì„± íŒ¨í„´"
    icon: "ğŸ”„"
    color: "#06b6d4"

  7:
    id: "pomodoro"
    name: "í¬ëª¨ë„ë¡œ"
    file: "8_pomodoro.php"
    description: "í¬ëª¨ë„ë¡œ í•™ìŠµë²• ì ìš© ì‹œ ë°œìƒí•˜ëŠ” ì¸ì§€ê´€ì„± íŒ¨í„´"
    icon: "ğŸ…"
    color: "#ec4899"

# ==============================================================================
# ì¹´í…Œê³ ë¦¬ ì •ì˜ (ëª¨ë“  ìƒí™©ì— ê³µí†µ ì ìš©)
# ==============================================================================
categories:
  cognitive_overload:
    name: "ì¸ì§€ ê³¼ë¶€í•˜"
    description: "ì‘ì—…ê¸°ì–µ ìš©ëŸ‰ ì´ˆê³¼ë¡œ ì¸í•œ ì •ë³´ ì²˜ë¦¬ ì¥ì• "
    icon: "ğŸ§ "
    color: "#ef4444"
    priority_weight: 1.0

  confidence_distortion:
    name: "ìì‹ ê° ì™œê³¡"
    description: "ê³¼ì‹  ë˜ëŠ” ê³¼ì†Œ ìì‹ ê°ìœ¼ë¡œ ì¸í•œ íŒë‹¨ ì˜¤ë¥˜"
    icon: "ğŸ˜°"
    color: "#f59e0b"
    priority_weight: 0.9

  habit_pattern:
    name: "ìŠµê´€ íŒ¨í„´"
    description: "ë¹„íš¨ìœ¨ì ì¸ í•™ìŠµ ìŠµê´€ ë° ë°˜ë³µ íŒ¨í„´"
    icon: "ğŸ”"
    color: "#8b5cf6"
    priority_weight: 0.85

  approach_error:
    name: "ì ‘ê·¼ ì „ëµ ì˜¤ë¥˜"
    description: "ë¬¸ì œ í•´ê²° ì „ëµ ì„ íƒ ë° ì ìš© ì˜¤ë¥˜"
    icon: "ğŸ¯"
    color: "#06b6d4"
    priority_weight: 0.8

  attention_deficit:
    name: "ì£¼ì˜ë ¥ ê²°í•"
    description: "ì§‘ì¤‘ë ¥ ì €í•˜ ë° ì£¼ì˜ ë¶„ì‚°"
    icon: "ğŸ‘ï¸"
    color: "#10b981"
    priority_weight: 0.85

  time_pressure:
    name: "ì‹œê°„/ì••ë°• ê´€ë¦¬"
    description: "ì‹œê°„ ì••ë°• ë° ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ì‹¤íŒ¨"
    icon: "â°"
    color: "#ec4899"
    priority_weight: 0.85

  verification_absence:
    name: "ê²€ì¦/í™•ì¸ ë¶€ì¬"
    description: "ê²€ì‚° ë° ì¡°ê±´ í™•ì¸ ìƒëµ"
    icon: "ğŸ”"
    color: "#6366f1"
    priority_weight: 0.9

  emotional_block:
    name: "ê°ì •ì  ì¥ë²½"
    description: "ë¶ˆì•ˆ, ì¢Œì ˆ, íšŒí”¼ ë“± ê°ì •ì  ìš”ì¸"
    icon: "ğŸ’­"
    color: "#78716c"
    priority_weight: 0.75

# ==============================================================================
# ìš°ì„ ìˆœìœ„ ë ˆë²¨ ì •ì˜
# ==============================================================================
priority_levels:
  critical:
    name: "ê¸´ê¸‰"
    color: "#dc2626"
    weight: 1.0
    intervention_urgency: "immediate"
    description: "ì¦‰ê°ì ì¸ ê°œì…ì´ í•„ìš”í•œ ì‹¬ê°í•œ íŒ¨í„´"

  high:
    name: "ë†’ìŒ"
    color: "#ef4444"
    weight: 0.85
    intervention_urgency: "priority"
    description: "ë¹ ë¥¸ ê°œì…ì´ ê¶Œì¥ë˜ëŠ” ì¤‘ìš” íŒ¨í„´"

  medium:
    name: "ë³´í†µ"
    color: "#f59e0b"
    weight: 0.6
    intervention_urgency: "scheduled"
    description: "ê³„íšëœ ì‹œì ì— ê°œì…í•˜ëŠ” ì¼ë°˜ íŒ¨í„´"

  low:
    name: "ë‚®ìŒ"
    color: "#10b981"
    weight: 0.35
    intervention_urgency: "optional"
    description: "ì„ íƒì  ê°œì…ì´ ê°€ëŠ¥í•œ ê²½ë¯¸í•œ íŒ¨í„´"

# ==============================================================================
# í†¤(Tone) ì •ì˜
# ==============================================================================
tones:
  supportive:
    name: "ì§€ì§€ì "
    description: "ê²©ë ¤ì™€ ì§€ì§€ë¥¼ í†µí•œ ê¸ì •ì  ì ‘ê·¼"
    keywords: ["ì˜í•˜ê³  ìˆì–´ìš”", "í•¨ê»˜ í•´ë´ìš”", "ì²œì²œíˆ"]

  directive:
    name: "ì§€ì‹œì "
    description: "ëª…í™•í•œ ì§€ì¹¨ê³¼ ë°©í–¥ ì œì‹œ"
    keywords: ["~í•´ì•¼ í•´ìš”", "~í•˜ì„¸ìš”", "ì¤‘ìš”í•´ìš”"]

  analytical:
    name: "ë¶„ì„ì "
    description: "ë…¼ë¦¬ì  ë¶„ì„ê³¼ ì„¤ëª… ì¤‘ì‹¬"
    keywords: ["ì™œëƒí•˜ë©´", "ë¶„ì„í•´ë³´ë©´", "íŒ¨í„´ì„ ë³´ë©´"]

  motivational:
    name: "ë™ê¸°ë¶€ì—¬"
    description: "ë™ê¸° ìœ ë°œê³¼ ìì‹ ê° ê°•í™”"
    keywords: ["í•  ìˆ˜ ìˆì–´ìš”", "ì„±ì¥í–ˆì–´ìš”", "ëŒ€ë‹¨í•´ìš”"]

  reflective:
    name: "ì„±ì°°ì "
    description: "ìê¸° ì„±ì°°ì„ ìœ ë„í•˜ëŠ” ì§ˆë¬¸ ì¤‘ì‹¬"
    keywords: ["ì–´ë–»ê²Œ ìƒê°í•´ìš”?", "ë¬´ì—‡ì„ ëŠê¼ˆë‚˜ìš”?", "ë‹¤ìŒì—”?"]

# ==============================================================================
# í˜ë¥´ì†Œë‚˜ êµ¬ì¡° ìŠ¤í‚¤ë§ˆ
# ==============================================================================
persona_schema:
  required_fields:
    - id              # ê³ ìœ  ID (ìˆ«ì)
    - name            # í˜ë¥´ì†Œë‚˜ ì´ë¦„
    - desc            # ìƒì„¸ ì„¤ëª…
    - category        # ì¹´í…Œê³ ë¦¬ í‚¤
    - priority        # ìš°ì„ ìˆœìœ„ (critical/high/medium/low)

  optional_fields:
    - icon            # ì•„ì´ì½˜ ì´ëª¨ì§€
    - audio_time      # ì˜¤ë””ì˜¤ ì•ˆë‚´ ì‹œê°„
    - related_topics  # ê´€ë ¨ í•™ìŠµ ì£¼ì œ ë°°ì—´
    - trigger_signals # íƒì§€ ì‹ í˜¸ ë°°ì—´

  solution_fields:
    - action          # ì‹¤í–‰ ì „ëµ
    - check           # í™•ì¸ í¬ì¸íŠ¸
    - teacher_dialog  # ì„ ìƒë‹˜ ëŒ€í™” í…œí”Œë¦¿

  optional_solution_fields:
    - alternative_actions  # ëŒ€ì•ˆ ì „ëµ ë°°ì—´
    - success_criteria     # ì„±ê³µ ê¸°ì¤€
    - follow_up           # í›„ì† ì¡°ì¹˜

# ==============================================================================
# ì—”ì§„ ê¸°ë³¸ ì„¤ì •
# ==============================================================================
engine_defaults:
  default_tone: "supportive"
  confidence_threshold: 0.6
  max_active_patterns: 5
  enable_audio_feedback: true
  audio_base_url: "https://mathking.kr/Contents/personas/"
  audio_format: "wav"
  cache_duration: 3600  # 1ì‹œê°„

# ==============================================================================
# ì„¸ë¶€ í•­ëª© ë§¤í•‘ (ìƒí™©ë³„ í•˜ìœ„ í•­ëª©)
# ==============================================================================
sub_items:
  concept_understanding:
    - concept_study_method_efficacy   # ê°œë…ê³µë¶€ë²• íš¨ëŠ¥ê° ì¸ì‹
    - concept_reading                 # ê°œë…ì •ë…
    - concept_understanding           # ê°œë…ì´í•´
    - concept_check                   # ê°œë…ì²´í¬
    - example_quiz                    # ì˜ˆì œí€´ì¦ˆ
    - representative_type             # ëŒ€í‘œìœ í˜•
    - topic_test                      # ì£¼ì œë³„í…ŒìŠ¤íŠ¸
    - unit_test                       # ë‹¨ì›ë³„í…ŒìŠ¤íŠ¸
    - listen_explanation              # ì„¤ëª…ë“£ê¸°

  type_learning:
    - type_efficacy                   # ëŒ€í‘œìœ í˜• íš¨ëŠ¥ê° ì¸ì‹
    - weekly_goal                     # ì£¼ê°„ëª©í‘œ
    - daily_goal                      # ì˜¤ëŠ˜ëª©í‘œ
    - pomodoro_selection              # í¬ëª¨ë„ë¥´
    - method_selection                # ë°©ë²•ì„ íƒ
    - order_selection                 # ìˆœì„œì„ íƒ
    - interval_selection              # ì‹œê°„ê°„ê²© ì„ íƒ
    - supplementary_learning          # ë³´ì¶©í•™ìŠµ
    - hint_setting                    # íŒíŠ¸ì„¤ì •
    - qa_interaction                  # ì§ˆì˜ì‘ë‹µ

  wrong_answer_note:
    - note_efficacy                   # ì˜¤ë‹µë…¸íŠ¸ íš¨ëŠ¥ê° ì¸ì‹
    - solution_note                   # í’€ì´ë…¸íŠ¸
    - exam_preparation                # í‰ê°€ì¤€ë¹„
    - essay_evaluation                # ì„œìˆ í‰ê°€
    - return_note_response            # ë°˜ì†¡ ì˜¤ë‹µë…¸íŠ¸ ëŒ€ì‘

  qa_session:
    - qa_efficacy                     # ì§ˆì˜ì‘ë‹µ íš¨ëŠ¥ê° ì¸ì‹
    - doubt_occurrence                # ì˜ë¬¸ë°œìƒ
    - question_generation             # ì§ˆë¬¸ìƒì„±
    - focused_resolution              # ì§‘ì¤‘í•´ê²°
    - question_decision               # ì§ˆë¬¸ê²°ì •
    - self_directed_qa                # ì§ˆì˜ì‘ë‹µ ìŠ¤ìŠ¤ë¡œ ì£¼ë„í•˜ê¸°
    - intervention_method             # ì§ˆë¬¸ ë“£ëŠ” ì¤‘ ê°œì…ë°©ë²•
    - closing                         # ë§ˆë¬´ë¦¬
    - tracking_followup               # ì¶”ì  ë° í›„ì† í•™ìŠµ
    - close_session                   # ë‹«ê¸°

  review_activity:
    - review_efficacy                 # ë³µìŠµë£¨í‹´ íš¨ëŠ¥ê° ì¸ì‹
    - review_time_setting             # ë³µìŠµì‹œê°„ ì •í•˜ê¸°
    - need_analysis                   # í•„ìš”ì˜ì—­ ë¶„ì„
    - review_curriculum               # ë³µìŠµ ì»¤ë¦¬í˜ëŸ¼ ì •í•˜ê¸°
    - review_execution                # ë³µìŠµì‹¤í–‰
    - review_closing                  # ë³µìŠµ ë§ˆë¬´ë¦¬
    - closing_feedback                # ë§ˆë¬´ë¦¬ í”¼ë“œë°±

  pomodoro:
    - pomodoro_efficacy               # í¬ëª¨ë„ë¥´ íš¨ëŠ¥ê° ì¸ì‹
    - scope_setting                   # ì‘ì„±ë‚´ìš©ì˜ ë²”ìœ„ ì •í•˜ê¸°
    - input_method                    # ë‚´ìš©ì…ë ¥ ë°©ë²• í™•ì¸
    - return_check_prep               # ê·€ê°€ê²€ì‚¬ ì¤€ë¹„
    - session_reflection              # ì„¸ì…˜ë³„ ì„±ì°°í™œë™
    - input_reflection                # ì…ë ¥ê³¼ì •ì— ëŒ€í•œ ì„±ì°°
    - emotion_expression              # ê°ì •í‘œí˜„ í™œìš©
    - best_practice_subscription      # ëª¨ë²”ì‚¬ë¡€ êµ¬ë…
    - memo_usage                      # ë©”ëª¨ì¥ í™œìš©

# ==============================================================================
# API ì—”ë“œí¬ì¸íŠ¸ ê·œì¹™
# ==============================================================================
api_rules:
  base_path: "/api/agent04/persona"

  endpoints:
    get_situations:
      path: "/situations"
      method: "GET"
      description: "ëª¨ë“  ìƒí™© ëª©ë¡ ì¡°íšŒ"

    get_personas:
      path: "/situations/{situation_id}/personas"
      method: "GET"
      description: "íŠ¹ì • ìƒí™©ì˜ í˜ë¥´ì†Œë‚˜ ëª©ë¡ ì¡°íšŒ"

    get_persona:
      path: "/personas/{persona_id}"
      method: "GET"
      description: "íŠ¹ì • í˜ë¥´ì†Œë‚˜ ìƒì„¸ ì¡°íšŒ"

    detect_pattern:
      path: "/detect"
      method: "POST"
      description: "ì¸ì§€ê´€ì„± íŒ¨í„´ íƒì§€"

    get_solution:
      path: "/personas/{persona_id}/solution"
      method: "GET"
      description: "í•´ê²° ì „ëµ ì¡°íšŒ"

# ==============================================================================
# ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ê·œì¹™
# ==============================================================================
logging:
  enabled: true
  level: "info"  # debug, info, warning, error

  events:
    - pattern_detected
    - solution_provided
    - feedback_received
    - session_started
    - session_ended

  retention_days: 90

# ==============================================================================
# ë²„ì „ íˆìŠ¤í† ë¦¬
# ==============================================================================
version_history:
  - version: "1.0.0"
    date: "2025-11-01"
    changes: "ì´ˆê¸° ë²„ì „ - ë¬¸ì œí’€ì´ ìƒí™© 60ê°œ íŒ¨í„´"

  - version: "2.0.0"
    date: "2025-12-03"
    changes: "ìƒí™©ë³„ ë¶„ë¦¬ - 7ê°œ í•™ìŠµ ìƒí™©ìœ¼ë¡œ í™•ì¥"
