# 노트 품질 평가 기준 데이터베이스
# 현직 수학선생님 수준 도달을 위한 핵심 DB
# 선생님의 평가 기준 텍스트 입력을 통한 데이터 수집 가정

version: "1.0"
description: "오답노트 품질 평가 기준 및 점수 산정 방법"

quality_dimensions:
  # 1. 성찰 깊이 (Reflection Depth)
  - dimension_id: "reflection_depth"
    dimension_name: "성찰 깊이"
    description: "오답 원인을 얼마나 구체적이고 깊이 있게 분석했는지"
    max_score: 10
    evaluation_criteria:
      - score_range: [9, 10]
        level: "매우 우수"
        description: "오답 원인을 매우 구체적으로 분석하고, 왜 틀렸는지, 어떻게 개선할지까지 기록"
        indicators:
          - "오답 원인을 구체적으로 한 문장 이상으로 기록"
          - "왜 틀렸는지 심층 분석 (예: '함수 개념을 잘못 이해해서'가 아닌 '함수의 정의를 혼동하여')"
          - "다음에 반복하지 않기 위한 구체적 방법 제시"
          - "유사한 문제에서 적용할 수 있는 전략 기록"
        keywords:
          - "왜냐하면"
          - "이유는"
          - "다음에는"
          - "앞으로는"
          - "개선 방법"
          
      - score_range: [7, 8]
        level: "우수"
        description: "오답 원인을 구체적으로 기록하고 분석"
        indicators:
          - "오답 원인을 한 문장으로 기록"
          - "왜 틀렸는지 간단히 분석"
          - "개선 의지 표현"
        keywords:
          - "틀린 이유"
          - "실수"
          - "다시 하면"
          
      - score_range: [5, 6]
        level: "보통"
        description: "오답 원인을 단순히 기록"
        indicators:
          - "오답 원인을 단어나 짧은 구로 기록"
          - "분석 없이 사실만 기록"
        keywords:
          - "모름"
          - "틀림"
          - "잘못"
          
      - score_range: [3, 4]
        level: "미흡"
        description: "오답 원인 기록이 매우 단순하거나 불명확"
        indicators:
          - "오답 원인 기록이 매우 짧거나 형식적"
          - "구체적 내용 없음"
        keywords:
          - "모르겠음"
          - "?"
          
      - score_range: [1, 2]
        level: "매우 미흡"
        description: "오답 원인 기록 없음"
        indicators:
          - "오답 원인 필드가 비어있음"
          - "의미 없는 기록"

  # 2. 완성도 (Completeness)
  - dimension_id: "completeness"
    dimension_name: "완성도"
    description: "노트 작성의 완전성과 체계성"
    max_score: 10
    evaluation_criteria:
      - score_range: [9, 10]
        level: "매우 우수"
        description: "풀이 과정, 해설 이해, 오답 원인, 개선 방법이 모두 완전하게 기록"
        indicators:
          - "풀이 과정이 완전하게 기록됨"
          - "해설지를 제대로 읽고 이해했음을 확인 가능"
          - "오답 원인과 개선 방법이 모두 기록됨"
          - "유사 문제 해결 전략까지 기록"
        required_elements:
          - "문제 조건 정리"
          - "풀이 과정"
          - "해설지 내용 정리"
          - "오답 원인"
          - "개선 방법"
          
      - score_range: [7, 8]
        level: "우수"
        description: "주요 요소들이 기록되어 있으나 일부 부족"
        indicators:
          - "풀이 과정과 오답 원인이 기록됨"
          - "해설지 내용 일부 정리"
        required_elements:
          - "풀이 과정"
          - "오답 원인"
          - "해설지 내용 (부분)"
          
      - score_range: [5, 6]
        level: "보통"
        description: "기본 요소만 기록"
        indicators:
          - "풀이 과정 또는 오답 원인 중 하나만 기록"
        required_elements:
          - "풀이 과정 또는 오답 원인"
          
      - score_range: [3, 4]
        level: "미흡"
        description: "기록이 매우 불완전"
        indicators:
          - "형식적 기록만 있음"
        required_elements:
          - "최소한의 기록"
          
      - score_range: [1, 2]
        level: "매우 미흡"
        description: "기록이 거의 없음"
        indicators:
          - "노트가 거의 비어있음"

  # 3. 효율성 (Efficiency)
  - dimension_id: "efficiency"
    dimension_name: "효율성"
    description: "사용한 시간 대비 학습 효과"
    max_score: 10
    evaluation_criteria:
      - score_range: [9, 10]
        level: "매우 우수"
        description: "적은 시간으로 높은 학습 효과"
        calculation_formula: "efficiency_score = (reflection_score + completeness_score) / (usedtime / 60) * weight"
        indicators:
          - "시간은 적게 사용했으나 성찰 깊이와 완성도가 높음"
          - "핵심만 기록하여 효율적"
        threshold:
          reflection_score: 7
          completeness_score: 7
          max_time_minutes: 15
          
      - score_range: [7, 8]
        level: "우수"
        description: "적절한 시간으로 적절한 효과"
        indicators:
          - "시간과 효과가 균형적"
        threshold:
          reflection_score: 5
          completeness_score: 5
          max_time_minutes: 30
          
      - score_range: [5, 6]
        level: "보통"
        description: "시간 대비 효과가 보통"
        indicators:
          - "시간은 많이 쓰나 효과는 보통"
        threshold:
          reflection_score: 3
          completeness_score: 3
          max_time_minutes: 45
          
      - score_range: [3, 4]
        level: "미흡"
        description: "시간 대비 효과가 낮음"
        indicators:
          - "시간은 많이 쓰나 효과는 낮음"
        threshold:
          reflection_score: 2
          completeness_score: 2
          max_time_minutes: 60
          
      - score_range: [1, 2]
        level: "매우 미흡"
        description: "시간 낭비"
        indicators:
          - "시간은 많이 쓰나 기록이 거의 없음"

  # 4. 일관성 (Consistency)
  - dimension_id: "consistency"
    dimension_name: "일관성"
    description: "노트 작성 패턴의 일관성"
    max_score: 10
    evaluation_criteria:
      - score_range: [9, 10]
        level: "매우 우수"
        description: "노트 작성 패턴이 매우 일관적"
        indicators:
          - "최근 5개 노트의 품질이 일관되게 높음"
          - "작성 스타일이 일관적"
        calculation_method: "최근 N개 노트의 표준편차가 낮음"
        threshold:
          recent_notes_count: 5
          score_std_dev: 1.0
          
      - score_range: [7, 8]
        level: "우수"
        description: "노트 작성 패턴이 대체로 일관적"
        indicators:
          - "대부분의 노트 품질이 유사"
        threshold:
          recent_notes_count: 5
          score_std_dev: 2.0
          
      - score_range: [5, 6]
        level: "보통"
        description: "노트 작성 패턴이 부분적으로 일관적"
        indicators:
          - "일부 노트만 품질이 높음"
        threshold:
          recent_notes_count: 5
          score_std_dev: 3.0
          
      - score_range: [3, 4]
        level: "미흡"
        description: "노트 작성 패턴이 불일관적"
        indicators:
          - "노트 품질 편차가 큼"
        threshold:
          recent_notes_count: 5
          score_std_dev: 4.0
          
      - score_range: [1, 2]
        level: "매우 미흡"
        description: "노트 작성 패턴이 매우 불일관적"
        indicators:
          - "노트 품질 편차가 매우 큼"

# 종합 점수 계산
overall_score:
  formula: "overall_score = (reflection_depth * 0.35) + (completeness * 0.30) + (efficiency * 0.20) + (consistency * 0.15)"
  weights:
    reflection_depth: 0.35
    completeness: 0.30
    efficiency: 0.20
    consistency: 0.15
  grade_mapping:
    - range: [9.0, 10.0]
      grade: "A+"
      description: "매우 우수"
    - range: [8.0, 9.0]
      grade: "A"
      description: "우수"
    - range: [7.0, 8.0]
      grade: "B+"
      description: "양호"
    - range: [6.0, 7.0]
      grade: "B"
      description: "보통"
    - range: [5.0, 6.0]
      grade: "C+"
      description: "미흡"
    - range: [4.0, 5.0]
      grade: "C"
      description: "부족"
    - range: [0.0, 4.0]
      grade: "F"
      description: "매우 부족"

# 필기량(nstroke) 기반 품질 보정
stroke_based_adjustment:
  # 필기량이 너무 적으면 품질 점수 하향 조정
  low_stroke_threshold: 50  # 50 stroke 미만
  adjustment_factor: 0.8  # 20% 감점
  
  # 필기량이 적절하면 품질 점수 유지
  normal_stroke_range: [50, 500]
  adjustment_factor: 1.0
  
  # 필기량이 너무 많으면 효율성 점수 하향 조정
  high_stroke_threshold: 500  # 500 stroke 초과
  adjustment_factor: 0.9  # 10% 감점 (효율성만)

# 시간(usedtime) 기반 품질 보정
time_based_adjustment:
  # 시간이 너무 적으면 완성도 점수 하향 조정
  low_time_threshold: 300  # 5분 미만 (초 단위)
  adjustment_factor: 0.7  # 30% 감점
  
  # 시간이 적절하면 품질 점수 유지
  normal_time_range: [300, 1800]  # 5분 ~ 30분
  adjustment_factor: 1.0
  
  # 시간이 너무 많으면 효율성 점수 하향 조정
  high_time_threshold: 1800  # 30분 초과
  adjustment_factor: 0.8  # 20% 감점 (효율성만)

# 데이터 수집 방법 참고
data_collection_methods:
  teacher_text_input:
    - "오답 원인을 구체적으로 한 문장 이상으로 기록하면 reflection_score 7점 이상"
    - "풀이 과정이 완전하고 해설을 이해했으면 completeness_score 8점 이상"
    - "시간은 적게 사용했으나 성찰 깊이와 완성도가 높으면 efficiency_score 9점 이상"
    - "최근 5개 노트의 품질이 일관되게 높으면 consistency_score 9점 이상"
    
  teacher_checklist:
    - "성찰 깊이 평가 기준 (매우 우수 / 우수 / 보통 / 미흡 / 매우 미흡)"
    - "완성도 평가 기준 (매우 우수 / 우수 / 보통 / 미흡 / 매우 미흡)"
    - "효율성 평가 기준 (매우 우수 / 우수 / 보통 / 미흡 / 매우 미흡)"
    - "일관성 평가 기준 (매우 우수 / 우수 / 보통 / 미흡 / 매우 미흡)"

# 노트 유형별 평가 기준 차별화
note_type_specific_criteria:
  attempt_note:  # 풀이노트
    focus_dimensions: ["completeness", "efficiency"]
    reflection_weight: 0.2  # 풀이노트는 성찰보다 완성도 중요
    completeness_weight: 0.5
    
  preparation_note:  # 준비노트
    focus_dimensions: ["reflection_depth", "completeness"]
    reflection_weight: 0.4  # 준비노트는 성찰이 가장 중요
    completeness_weight: 0.4
    
  essay_assessment:  # 서술평가
    focus_dimensions: ["completeness", "consistency"]
    reflection_weight: 0.3
    completeness_weight: 0.5  # 서술평가는 완성도가 가장 중요

