# Strategy Step 2: 타겟팅 의사결정

> **목적**: 수집된 정보를 바탕으로 최적의 상호작용 타겟을 선정  
> **입력**: Strategy Step 1의 종합 컨텍스트 데이터  
> **출력**: 타겟팅 결정 (상호작용 모드, 타이밍, 우선순위)

---

## 1. 의사결정 프레임워크

### 1.1 3단계 의사결정 프로세스
```
Step 1: 상황 식별 및 우선순위 결정
  ↓
Step 2: 수학 학습 맥락 분석
  ↓
Step 3: 최종 타겟팅 결정
```

---

## 2. Step 1: 상황 식별 및 우선순위 결정

### 2.1 9가지 상황 정의 및 우선순위

| 상황 | 우선순위 | 트리거 조건 | 비고 |
|------|---------|-----------|------|
| **① 실시간 고민 상황** | 최우선 | 학생 질문/도움 요청 즉시 | 즉시 개입 필요 |
| **② 포모도르 상황 중 선택** | 높음 | 포모도르 세션 진행 중 | 실시간 상태 모니터링 |
| **③ 수업준비** | 높음 | 학습 시작 전 | 학습 효과 극대화 |
| **④ 오늘목표 설정** | 중간 | 하루 시작 또는 목표 변경 | 목표 정렬 |
| **⑤ 귀가검사 상황** | 중간 | 학습 마무리 시점 | 회고 및 정리 |
| **⑥ 귀가검사 준비** | 중간 | 귀가검사 직전 | 회고 준비 |
| **⑦ 주간목표 설정** | 낮음 | 주 시작 또는 목표 변경 | 주간 계획 |
| **⑧ 분기목표 수립** | 낮음 | 분기 시작 또는 목표 변경 | 장기 계획 |
| **⑨ 장기목표(커리큘럼) 설계** | 낮음 | 커리큘럼 조정 필요 시 | 장기 설계 |

### 2.2 상황 식별 룰

#### RULE_S1_1: 실시간 고민 상황 감지
```yaml
IF (학생 질문/도움 요청 있음) THEN
    상황 = "실시간 고민"
    우선순위 = 최우선
    즉시_개입 = true
END IF
```

#### RULE_S1_2: 포모도르 상황 감지
```yaml
IF (포모도르 세션 활성 상태) THEN
    상황 = "포모도르 상황 중 선택"
    우선순위 = 높음
    
    IF (포모도르 경과 시간 >= 20분 AND 집중도 < 5) THEN
        하위_상황 = "집중도_하락_휴식_유도"
    ELSE IF (포모도르 경과 시간 >= 15분 AND 성취감 낮음) THEN
        하위_상황 = "동기_부여_필요"
    ELSE
        하위_상황 = "일반_진행"
    END IF
END IF
```

#### RULE_S1_3: 수업준비 상황 감지
```yaml
IF (학습 시작 전 AND (학원 수업 예정 OR 학교 수업 예정)) THEN
    상황 = "수업준비"
    우선순위 = 높음
    
    IF (학원 수업 예정) THEN
        하위_상황 = "학원_수업_준비"
        예정_단원 = 학원_수업_단원
    ELSE
        하위_상황 = "학교_수업_준비"
        예정_단원 = 학교_수업_단원
    END IF
END IF
```

#### RULE_S1_4: 목표 설정 상황 감지
```yaml
IF (오늘 목표 없음 OR 오늘 목표 변경됨) THEN
    상황 = "오늘목표 설정"
    우선순위 = 중간
END IF

IF (주간 목표 없음 OR 주간 목표 변경됨) THEN
    상황 = "주간목표 설정"
    우선순위 = 낮음
END IF

IF (분기 목표 없음 OR 분기 목표 변경됨) THEN
    상황 = "분기목표 수립"
    우선순위 = 낮음
END IF
```

#### RULE_S1_5: 귀가검사 상황 감지
```yaml
IF (학습 마무리 시점 AND 귀가검사 전) THEN
    상황 = "귀가검사 준비"
    우선순위 = 중간
END IF

IF (귀가검사 실행 시점) THEN
    상황 = "귀가검사 상황"
    우선순위 = 중간
END IF
```

#### RULE_S1_6: 커리큘럼 설계 상황 감지
```yaml
IF (커리큘럼 조정 필요 OR 장기 목표 재설정) THEN
    상황 = "장기목표(커리큘럼) 설계"
    우선순위 = 낮음
END IF
```

### 2.3 다중 상황 발생 시 우선순위 결정
```yaml
우선순위_순서 = [
    "실시간 고민",
    "포모도르 상황 중 선택",
    "수업준비",
    "오늘목표 설정",
    "귀가검사 상황",
    "귀가검사 준비",
    "주간목표 설정",
    "분기목표 수립",
    "장기목표(커리큘럼) 설계"
]

최종_상황 = 우선순위_순서에서_가장_높은_상황
```

---

## 3. Step 2: 수학 학습 맥락 분석

### 3.1 학습 단계별 타겟팅 전략

#### RULE_S2_1: 개념 학습 단계 타겟팅
```yaml
IF (현재_학습_단계 == "개념 학습") THEN
    권장_모드 = ["도제학습", "탐구학습"]
    
    IF (학생_수준 == "하위권") THEN
        우선_모드 = "도제학습"  # 단계별 설명 필요
    ELSE IF (학생_수준 == "상위권") THEN
        우선_모드 = "탐구학습"  # 질문 유도로 이해 촉진
    ELSE
        우선_모드 = "도제학습"  # 기본적으로 설명 중심
    END IF
    
    최적_타이밍 = "집중도 >= 7 AND 에너지 >= 보통"
    회피_타이밍 = "에너지 == 낮음 OR 집중도 < 5"
END IF
```

#### RULE_S2_2: 유형 연습 단계 타겟팅
```yaml
IF (현재_학습_단계 == "유형 연습") THEN
    권장_모드 = ["단기미션", "자기주도"]
    
    IF (학생_수준 == "하위권") THEN
        우선_모드 = "단기미션"  # 작은 목표 설정으로 성취감
    ELSE IF (학생_수준 == "상위권") THEN
        우선_모드 = "자기주도"  # 독립적 학습 유도
    ELSE
        우선_모드 = "단기미션"  # 목표 설정 및 성취 강조
    END IF
    
    최적_타이밍 = "에너지 >= 보통 AND 집중도 >= 6"
    회피_타이밍 = "에너지 == 낮음"
END IF
```

#### RULE_S2_3: 심화 문제 단계 타겟팅
```yaml
IF (현재_학습_단계 == "심화 문제") THEN
    권장_모드 = ["자기성찰", "맞춤학습"]
    
    IF (학생_수준 == "하위권") THEN
        우선_모드 = "맞춤학습"  # 단계별 가이드 필요
    ELSE IF (학생_수준 == "상위권") THEN
        우선_모드 = "자기성찰"  # 스스로 깨달음 유도
    ELSE
        우선_모드 = "맞춤학습"  # 개인 맞춤 전략
    END IF
    
    최적_타이밍 = "에너지 == 높음 AND 집중도 >= 7"
    회피_타이밍 = "에너지 == 낮음 OR 집중도 < 6"
END IF
```

#### RULE_S2_4: 기출 문제 단계 타겟팅
```yaml
IF (현재_학습_단계 == "기출 문제") THEN
    권장_모드 = ["시험대비", "시간성찰"]
    
    IF (시험_Dday <= 7) THEN
        우선_모드 = "시험대비"  # 실전 대비 강조
    ELSE
        우선_모드 = "시간성찰"  # 시간 관리 연습
    END IF
    
    최적_타이밍 = "시험_Dday <= 14"  # 시험 가까울수록 집중
    회피_타이밍 = "에너지 == 낮음"
END IF
```

### 3.2 단원별 특성 기반 타겟팅

#### RULE_S2_5: 단원별 특성 DB 매핑
```yaml
단원_특성_DB = {
    "함수": {
        특성: "추상적",
        권장_모드: ["도제학습", "탐구학습"],
        어려움_요인: "추상적 개념 이해"
    },
    "통계": {
        특성: "실용적",
        권장_모드: ["맞춤학습", "단기미션"],
        어려움_요인: "데이터 해석"
    },
    "도형": {
        특성: "시각적",
        권장_모드: ["도제학습", "탐구학습"],
        어려움_요인: "공간 지각"
    },
    "방정식": {
        특성: "계산적",
        권장_모드: ["단기미션", "자기주도"],
        어려움_요인: "계산 실수"
    }
}

IF (현재_단원 IN 단원_특성_DB) THEN
    단원_특성 = 단원_특성_DB[현재_단원]
    단원_권장_모드 = 단원_특성.권장_모드
END IF
```

#### RULE_S2_6: 단원별 학생 수준 고려
```yaml
IF (단원_정답률 < 0.5) THEN
    단원_수준 = "취약"
    모드_조정 = "도제학습 모드 우선"  # 기초 설명 필요
ELSE IF (단원_정답률 >= 0.7) THEN
    단원_수준 = "강함"
    모드_조정 = "자기주도/자기성찰 모드 우선"  # 독립 학습 가능
ELSE
    단원_수준 = "보통"
    모드_조정 = "단기미션/맞춤학습 모드 우선"  # 목표 설정 및 가이드
END IF
```

### 3.3 오류 유형별 타겟팅

#### RULE_S2_7: 계산 실수 vs 개념 오류
```yaml
IF (계산_실수_비율 >= 0.6) THEN
    오류_유형 = "계산_실수"
    타겟팅_전략 = {
        모드: "단기미션",  # 반복 연습 유도
        타이밍: "에너지 충분할 때",
        내용: "계산 연습, 정확도 강조"
    }
ELSE IF (개념_오류_비율 >= 0.6) THEN
    오류_유형 = "개념_오류"
    타겟팅_전략 = {
        모드: "도제학습",  # 개념 재학습
        타이밍: "집중도 높을 때",
        내용: "개념 설명, 이해 확인"
    }
ELSE
    오류_유형 = "혼합"
    타겟팅_전략 = {
        모드: "맞춤학습",  # 개인 맞춤 전략
        타이밍: "에너지 및 집중도 고려",
        내용: "종합적 개선"
    }
END IF
```

### 3.4 학생 수준별 타겟팅

#### RULE_S2_8: 하위권 학생 타겟팅
```yaml
IF (학생_수준 == "하위권") THEN
    타겟팅_원칙 = {
        모드_우선순위: ["도제학습", "맞춤학습", "단기미션"],
        회피_모드: ["자기주도", "자기성찰"],  # 독립 학습 어려움
        톤: "격려 중심, 성취감 강조",
        내용: "기초 개념, 작은 목표, 반복 연습"
    }
END IF
```

#### RULE_S2_9: 중위권 학생 타겟팅
```yaml
IF (학생_수준 == "중위권") THEN
    타겟팅_원칙 = {
        모드_우선순위: ["단기미션", "맞춤학습", "자기주도"],
        톤: "목표 설정, 단계별 가이드",
        내용: "유형 연습, 오답 정리, 목표 달성"
    }
END IF
```

#### RULE_S2_10: 상위권 학생 타겟팅
```yaml
IF (학생_수준 == "상위권") THEN
    타겟팅_원칙 = {
        모드_우선순위: ["자기성찰", "자기주도", "탐구학습"],
        톤: "도전 중심, 성장 마인드셋",
        내용: "심화 문제, 변형 문제, 창의 문제"
    }
END IF
```

### 3.5 학원 수업 맥락 고려

#### RULE_S2_11: 학원 수업 전 예습 타겟팅
```yaml
IF (학원_수업_예정 AND 현재_시간 < 학원_수업_시간 - 2시간) THEN
    타겟팅_전략 = {
        모드: ["맞춤학습", "도제학습", "단기미션"],
        목적: "예습 가이드",
        내용: "오늘 배울 단원 개념 미리보기, 기본 문제 풀기",
        타이밍: "수업 2시간 전까지"
    }
END IF
```

#### RULE_S2_12: 학원 수업 후 복습 타겟팅
```yaml
IF (학원_수업_완료 AND 현재_시간 >= 학원_수업_시간 + 1시간) THEN
    타겟팅_전략 = {
        모드: ["자기주도", "도제학습", "자기성찰"],
        목적: "복습 안내",
        내용: "오늘 배운 내용 정리, 연습 문제 풀기",
        타이밍: "수업 후 1시간 이후 (당일 또는 다음날)"
    }
    
    IF (수업_후_당일) THEN
        우선순위 = 높음  # 당일 복습 효과적
    ELSE
        우선순위 = 중간  # 다음날 복습
    END IF
END IF
```

### 3.6 시험 D-day 맥락 고려

#### RULE_S2_13: 시험 D-day별 타겟팅 조정
```yaml
IF (시험_Dday <= 3) THEN
    타겟팅_조정 = {
        모드_우선순위: ["시험대비", "시간성찰"],
        내용: "기출 문제 중심, 시간 관리 연습",
        톤: "실전 대비 강조"
    }
ELSE IF (시험_Dday <= 7) THEN
    타겟팅_조정 = {
        모드_우선순위: ["시험대비", "단기미션"],
        내용: "취약 단원 집중, 유형 연습",
        톤: "목표 달성 강조"
    }
ELSE IF (시험_Dday <= 14) THEN
    타겟팅_조정 = {
        모드_우선순위: ["맞춤학습", "단기미션"],
        내용: "전체 범위 학습, 개념 정리",
        톤: "체계적 학습 강조"
    }
END IF
```

---

## 4. Step 3: 최종 타겟팅 결정

### 4.1 타이밍 최적화

#### RULE_S3_1: 시간대별 타겟팅
```yaml
시간대별_전략 = {
    "아침 (6-9시)": {
        최적_활동: "개념 학습, 목표 설정",
        권장_모드: ["도제학습", "탐구학습", "단기미션"],
        조건: "집중도 >= 7"
    },
    "오전 (9-12시)": {
        최적_활동: "개념 학습, 유형 연습",
        권장_모드: ["도제학습", "단기미션"],
        조건: "에너지 >= 보통"
    },
    "오후 (12-18시)": {
        최적_활동: "유형 연습, 심화 문제",
        권장_모드: ["단기미션", "자기주도", "맞춤학습"],
        조건: "에너지 >= 보통"
    },
    "저녁 (18-22시)": {
        최적_활동: "복습, 정리, 오답 정리",
        권장_모드: ["자기주도", "자기성찰", "시간성찰"],
        조건: "집중도 >= 6"
    },
    "밤 (22시 이후)": {
        최적_활동: "가벼운 복습, 정리",
        권장_모드: ["자기주도", "시간성찰"],
        조건: "에너지 낮아도 가능, 짧은 시간"
    }
}

현재_시간대_전략 = 시간대별_전략[현재_시간대]
```

#### RULE_S3_2: 학습 리듬 반영
```yaml
IF (학생별_학습_리듬_데이터 있음) THEN
    학생_최적_시간대 = 학생별_학습_리듬_데이터.최적_시간대
    학생_최적_활동 = 학생별_학습_리듬_데이터.최적_활동
    
    IF (현재_시간대 == 학생_최적_시간대) THEN
        타이밍_점수 = 높음
    ELSE
        타이밍_점수 = 중간
    END IF
ELSE
    타이밍_점수 = 기본값_사용
END IF
```

#### RULE_S3_3: 에너지/집중도 기반 타이밍 조정
```yaml
IF (에너지 == 높음 AND 집중도 >= 7) THEN
    최적_활동 = "어려운 과제 (개념 학습, 심화 문제)"
    권장_모드 = ["도제학습", "탐구학습", "자기성찰"]
ELSE IF (에너지 == 보통 AND 집중도 >= 6) THEN
    최적_활동 = "보통 과제 (유형 연습, 문제 풀이)"
    권장_모드 = ["단기미션", "자기주도", "맞춤학습"]
ELSE IF (에너지 == 낮음 OR 집중도 < 5) THEN
    최적_활동 = "가벼운 과제 (복습, 정리, 요약)"
    권장_모드 = ["자기주도", "시간성찰"]
    회피_활동 = "어려운 과제"
END IF
```

### 4.2 최종 모드 선정

#### RULE_S3_4: 모드 우선순위 종합
```yaml
모드_점수 = {}

FOR EACH 모드 IN [도제학습, 탐구학습, 단기미션, 자기주도, 자기성찰, 맞춤학습, 시험대비, 시간성찰, 도제학습]:
    점수 = 0
    
    # 학습 단계별 점수
    IF (모드 IN 학습_단계별_권장_모드) THEN
        점수 += 30
    END IF
    
    # 단원별 특성 점수
    IF (모드 IN 단원_권장_모드) THEN
        점수 += 20
    END IF
    
    # 학생 수준별 점수
    IF (모드 IN 학생_수준별_권장_모드) THEN
        점수 += 20
    END IF
    
    # 시간대별 점수
    IF (모드 IN 현재_시간대_권장_모드) THEN
        점수 += 15
    END IF
    
    # 에너지/집중도 점수
    IF (모드 IN 에너지_집중도_권장_모드) THEN
        점수 += 10
    END IF
    
    # 학원 수업 맥락 점수
    IF (모드 IN 학원_수업_맥락_권장_모드) THEN
        점수 += 5
    END IF
    
    모드_점수[모드] = 점수
END FOR

최종_모드 = 모드_점수에서_가장_높은_점수_모드
```

### 4.3 우선순위 결정

#### RULE_S3_5: 최종 타겟팅 결정
```yaml
타겟팅_결정 = {
    상황: 최종_상황,
    모드: 최종_모드,
    타이밍: {
        즉시: (상황 == "실시간 고민"),
        시간대: 현재_시간대,
        조건: 타이밍_조건
    },
    우선순위: 상황_우선순위,
    이유: {
        학습_단계: 현재_학습_단계,
        단원_특성: 단원_특성,
        학생_수준: 학생_수준,
        에너지_상태: 에너지_레벨,
        집중도: 집중도
    },
    데이터_품질: {
        완성도: 데이터_완성도,
        신뢰도: 데이터_신뢰도
    }
}
```

---

## 5. 출력 데이터 구조

### 5.1 타겟팅 결정 출력
```yaml
targeting_decision:
  situation: string              # 9가지 상황 중 1개
  mode: string                    # 상호작용 모드
  timing:
    immediate: bool              # 즉시 개입 여부
    time_slot: string            # 시간대
    conditions: []               # 타이밍 조건
  priority: int                   # 우선순위 (1-9)
  rationale:                     # 결정 이유
    learning_stage: string
    unit_characteristics: string
    student_level: string
    energy_state: string
    focus_level: int
  data_quality:
    completeness: float
    reliability: float
```

---

## 6. 예외 처리

### 6.1 데이터 부족 시
```yaml
IF (데이터_완성도 < 0.6) THEN
    기본_타겟팅_사용 = true
    기본_모드 = "맞춤학습"  # 가장 범용적 모드
    로그_기록 = "데이터 부족으로 기본 타겟팅 사용"
END IF
```

### 6.2 모호한 상황
```yaml
IF (여러_상황_동시_발생) THEN
    최종_상황 = 우선순위_가장_높은_상황
    보조_상황 = 다음_우선순위_상황
    로그_기록 = "다중 상황 발생, 우선순위 적용"
END IF
```

---

**Last Updated**: 2025-01-27  
**버전**: 1.0  
**작성자**: AI Assistant

