# PRD: 에이전트별 Metadata 재배치 및 관련성 최적화

## Introduction/Overview

현재 21개 에이전트의 `metadata.md` 파일에 정의된 데이터 항목들이 각 에이전트의 직접적 관련성과 일치하지 않는 문제가 있습니다. 각 에이전트의 `mission.md`를 분석하여 해당 에이전트와 직접적으로 관련된 데이터만 포함하도록 재배치하고, 중복을 제거하며, 관련성 우선순위를 체계적으로 검증하는 것이 목표입니다.

또한, 특정 에이전트와 관련은 있지만 다른 에이전트에 배치된 데이터를 `dataindex.html`에서 별도로 표시하여 데이터 간 연관성을 시각적으로 파악할 수 있도록 합니다.

## Goals

1. 각 에이전트의 `metadata.md`에 해당 에이전트와 직접적으로 관련된 데이터만 포함
2. 중복된 데이터 항목 제거 및 통합
3. 관련성 우선순위를 다단계로 검증하여 최적화
4. 관련 데이터이지만 다른 에이전트에 배치된 항목을 `dataindex.html`에 별도 섹션으로 표시
5. 데이터 재배치 후 각 에이전트의 `metadata.md` 파일 업데이트

## User Stories

1. **As a 개발자**, I want 각 에이전트의 metadata.md가 해당 에이전트의 mission과 직접적으로 연관된 데이터만 포함하도록 하여, 데이터 관리의 명확성을 확보하고 싶습니다.

2. **As a 데이터 분석가**, I want dataindex.html에서 특정 에이전트와 관련된 데이터가 다른 에이전트에 배치된 경우를 시각적으로 확인하여, 데이터 간 연관성을 파악하고 싶습니다.

3. **As a 시스템 관리자**, I want 중복된 데이터 항목이 제거되어 데이터 일관성을 유지하고 싶습니다.

## Functional Requirements

### Phase 1: 분석 및 계획 수립
1. 모든 에이전트(agent01~agent22)의 `mission.md` 파일을 읽어 각 에이전트의 핵심 기능과 책임 영역을 파악
2. 모든 에이전트의 `metadata.md` 파일을 읽어 현재 데이터 분포 상태 파악
3. 각 에이전트의 mission과 metadata 간 관련성 매트릭스 생성
4. 중복 데이터 항목 식별 및 목록 작성

### Phase 2: 관련성 분석 및 우선순위 결정
5. 각 데이터 항목에 대해 모든 에이전트와의 관련성 점수 계산 (1차 검증)
6. 관련성 점수 기반으로 각 데이터 항목의 주 담당 에이전트 결정
7. 주 담당 에이전트 외에도 관련성이 높은 에이전트 목록 작성 (2차 검증)
8. 3차 검증: 관련 에이전트 간 데이터 분배 최적화

### Phase 3: 데이터 재배치
9. 각 에이전트의 `metadata.md` 파일을 새로운 데이터 목록으로 업데이트
10. 중복 제거: 동일한 데이터가 여러 에이전트에 있는 경우 주 담당 에이전트에만 유지
11. 카테고리 구조 유지: 기존 10개 카테고리 구조는 유지하되, 각 에이전트에 맞게 필터링

### Phase 4: dataindex.html 업데이트
12. 각 에이전트의 `dataindex.html`에 "관련 데이터 (다른 에이전트)" 섹션 추가
13. 해당 에이전트와 관련은 있지만 다른 에이전트에 배치된 데이터 목록 표시
14. 관련 에이전트 정보와 함께 표시 (예: "이 데이터는 agent03_goals_analysis에 배치됨")

### Phase 5: 검증 및 최적화
15. 재배치된 데이터가 각 에이전트의 mission과 일치하는지 최종 검증
16. 데이터 누락 여부 확인 (모든 100개 데이터 항목이 적절한 에이전트에 배치되었는지)
17. 관련성 점수 기반 최적화 (낮은 관련성 데이터 제거 또는 재배치)

## Non-Goals (Out of Scope)

1. 기존 데이터의 카테고리 구조 변경 (10개 카테고리 유지)
2. 새로운 데이터 항목 추가
3. 데이터 항목의 이름이나 설명 변경
4. 다른 에이전트 파일들(mission.md, rules.yaml 등)의 수정

## Design Considerations

### dataindex.html 업데이트
- 각 에이전트의 dataindex.html 하단에 새로운 섹션 추가
- "🔗 관련 데이터 (다른 에이전트에 배치됨)" 제목 사용
- 표 형식으로 표시: 데이터 이름, 관련 에이전트, 관련성 점수
- 클릭 시 해당 에이전트의 dataindex.html로 이동 가능하도록 링크 제공

### 관련성 점수 계산 기준
- **직접 관련 (3점)**: mission.md에서 명시적으로 언급된 데이터
- **간접 관련 (2점)**: mission의 핵심 기능을 수행하는데 필요한 데이터
- **보조 관련 (1점)**: 참고용으로 유용한 데이터
- **무관련 (0점)**: 관련성 없음

## Technical Considerations

1. **파일 처리**: PowerShell 또는 Python 스크립트를 사용하여 대량 파일 처리
2. **데이터 구조**: YAML 또는 JSON 형식으로 관련성 매트릭스 저장
3. **백업**: 기존 metadata.md 파일들을 백업 후 수정
4. **검증 스크립트**: 재배치 후 데이터 무결성 검증 스크립트 작성

## Success Metrics

1. 각 에이전트의 metadata.md에 포함된 데이터 항목이 해당 에이전트의 mission과 직접 관련된 비율 90% 이상
2. 중복 데이터 항목 0개
3. 모든 100개 데이터 항목이 적절한 에이전트에 배치됨
4. dataindex.html에 관련 데이터 섹션이 정확하게 표시됨

## Open Questions

1. 관련성 점수 임계값 설정: 주 담당 에이전트 결정 시 최소 점수 기준은?
2. 동일 점수 처리: 여러 에이전트가 동일한 관련성 점수를 가질 경우 우선순위 기준은?
3. 데이터 공유: 여러 에이전트에서 공통으로 필요한 데이터는 어떻게 처리할 것인가?

