# PRD: 학생용 상호작용형 알파튜터42 메뉴얼 시스템

## Introduction/Overview

알파튜터42 시스템을 처음 사용하는 학생들이 시스템의 주요 기능과 에이전트를 이해하고 효과적으로 활용할 수 있도록 돕는 상호작용형 메뉴얼 시스템을 구축합니다.

**Problem Solved**: 
- 신규 학생들이 알파튜터42 시스템의 복잡한 구조와 다양한 에이전트 기능을 이해하기 어려움
- 각 에이전트의 목적과 사용법을 찾기 위한 명확한 가이드 부재
- 학생들이 시스템을 효과적으로 활용하지 못해 학습 효과 저하

**Goal**: 
학생들이 검색/필터링을 통해 필요한 정보를 쉽게 찾고, 단계별 가이드를 통해 시스템을 체계적으로 학습할 수 있는 웹 기반 메뉴얼 시스템을 제공합니다.

## Goals

1. **접근성 향상**: 모든 학생이 메뉴얼에 접근 가능하도록 웹 기반 인터페이스 제공
2. **검색/필터링 기능**: 학생이 원하는 에이전트나 기능을 빠르게 찾을 수 있는 검색 및 필터링 시스템 구현
3. **다양한 컨텐츠 지원**: 이미지, 웹페이지 링크, 음성, 동영상 등 다양한 형태의 컨텐츠 업로드 및 연결 지원
4. **컨텐츠 관리**: 교사가 메뉴얼 컨텐츠를 추가하고 수정할 수 있는 관리 기능 제공
5. **학생 친화적 UI**: 직관적이고 사용하기 쉬운 학생 친화적인 디자인 구현

## User Stories

### 학생 사용자
1. **As a student**, I want 메뉴얼에서 "온보딩"을 검색하여 첫 사용 시 필요한 단계별 가이드를 찾을 수 있도록 하고 싶습니다.
2. **As a student**, I want 에이전트별로 필터링하여 특정 에이전트의 사용법과 목적을 확인할 수 있도록 하고 싶습니다.
3. **As a student**, I want 각 에이전트 설명에 이미지, 동영상, 음성 파일이 포함되어 시각적으로 이해하기 쉽도록 하고 싶습니다.
4. **As a student**, I want 관련 웹페이지 링크를 통해 실제 시스템 페이지로 바로 이동할 수 있도록 하고 싶습니다.
5. **As a student**, I want 모바일 기기에서도 메뉴얼을 편리하게 볼 수 있도록 하고 싶습니다.

### 교사 사용자
6. **As a teacher**, I want 메뉴얼에 새로운 컨텐츠(이미지, 동영상, 음성, 링크)를 추가할 수 있도록 하고 싶습니다.
7. **As a teacher**, I want 기존 메뉴얼 컨텐츠를 수정하거나 삭제할 수 있도록 하고 싶습니다.
8. **As a teacher**, I want 각 에이전트별로 메뉴얼 섹션을 구성하여 체계적으로 관리할 수 있도록 하고 싶습니다.

## Functional Requirements

### 1. 웹 기반 메뉴얼 인터페이스
1.1. 메인 메뉴얼 페이지는 웹 브라우저에서 접근 가능해야 합니다.
1.2. 메뉴얼은 Moodle 인증 시스템과 연동되어 로그인한 학생만 접근 가능해야 합니다.
1.3. 메뉴얼 페이지는 반응형 디자인으로 모바일, 태블릿, 데스크톱에서 모두 사용 가능해야 합니다.

### 2. 검색 및 필터링 기능
2.1. 학생은 키워드로 메뉴얼 컨텐츠를 검색할 수 있어야 합니다.
2.2. 학생은 에이전트별로 필터링하여 해당 에이전트 관련 메뉴얼만 볼 수 있어야 합니다.
2.3. 검색 결과는 제목, 설명, 태그 등에서 키워드가 포함된 항목을 표시해야 합니다.
2.4. 필터링은 다중 선택이 가능해야 합니다 (예: 여러 에이전트 동시 선택).

### 3. 주요 에이전트 메뉴얼 구성
3.1. 다음 주요 에이전트에 대한 메뉴얼 섹션이 있어야 합니다:
   - Agent 01: 온보딩 (Onboarding)
   - Agent 02: 시험 일정 (Exam Schedule)
   - Agent 03: 목표 분석 (Goals Analysis)
   - Agent 04: 약점 분석 (Inspect Weakpoints)
   - Agent 05: 학습 감정 (Learning Emotion)
   - Agent 07: 상호작용 타겟팅 (Interaction Targeting)
3.2. 각 에이전트 섹션에는 다음 정보가 포함되어야 합니다:
   - 에이전트의 목적과 역할
   - 주요 기능 설명
   - 사용 방법 가이드
   - 관련 컨텐츠 (이미지, 동영상, 음성, 링크)

### 4. 컨텐츠 타입 지원
4.1. 시스템은 다음 컨텐츠 타입을 지원해야 합니다:
   - 이미지 파일 (jpg, png, gif, webp 등)
   - 동영상 파일 (mp4, webm 등) 또는 외부 동영상 링크 (YouTube, Vimeo 등)
   - 음성 파일 (mp3, wav, ogg 등)
   - 웹페이지 링크 (내부/외부 URL)
4.2. 각 컨텐츠는 메뉴얼 항목에 연결되어 표시되어야 합니다.
4.3. 컨텐츠는 추후 업로드하거나 외부 링크로 연결할 수 있어야 합니다.

### 5. 컨텐츠 업로드 및 관리
5.1. 교사 역할을 가진 사용자는 컨텐츠를 업로드할 수 있어야 합니다.
5.2. 이미지 업로드 시 최대 파일 크기는 10MB로 제한해야 합니다.
5.3. 동영상/음성 파일 업로드 시 최대 파일 크기는 100MB로 제한해야 합니다.
5.4. 업로드된 파일은 서버의 지정된 디렉토리에 저장되어야 합니다.
5.5. 외부 링크(YouTube, Vimeo 등)는 URL만 입력하여 연결할 수 있어야 합니다.
5.6. 교사는 업로드한 컨텐츠를 수정하거나 삭제할 수 있어야 합니다.

### 6. 데이터베이스 구조
6.1. 메뉴얼 항목 정보는 데이터베이스에 저장되어야 합니다.
6.2. 각 메뉴얼 항목은 다음 정보를 포함해야 합니다:
   - 제목
   - 설명/내용
   - 연결된 에이전트 ID
   - 컨텐츠 타입 (이미지/동영상/음성/링크)
   - 컨텐츠 경로 또는 URL
   - 생성일시
   - 수정일시
   - 생성자 ID
6.3. 컨텐츠와 메뉴얼 항목은 다대다 관계를 지원해야 합니다 (하나의 메뉴얼 항목에 여러 컨텐츠 연결 가능).

### 7. UI/UX 요구사항
7.1. 학생 친화적인 디자인으로 직관적인 네비게이션을 제공해야 합니다.
7.2. 에이전트별 카드 형식 또는 목록 형식으로 메뉴얼을 표시해야 합니다.
7.3. 각 메뉴얼 항목 클릭 시 상세 페이지로 이동해야 합니다.
7.4. 상세 페이지에는 제목, 설명, 관련 컨텐츠가 표시되어야 합니다.
7.5. 동영상과 음성 파일은 브라우저 내에서 재생 가능해야 합니다.
7.6. 이미지는 확대하여 볼 수 있는 기능이 있어야 합니다.

### 8. 권한 관리
8.1. 모든 학생은 메뉴얼을 조회할 수 있어야 합니다.
8.2. 교사 역할을 가진 사용자만 컨텐츠를 추가/수정/삭제할 수 있어야 합니다.
8.3. 권한 확인은 Moodle의 사용자 역할 정보를 기반으로 해야 합니다.

## Non-Goals (Out of Scope)

1. **뒷단 에이전트 명시적 표시**: Agent 06, 08~22 등 뒷단에서 동작하는 에이전트는 학생 메뉴얼에 명시적으로 표시하지 않습니다. 이들의 기능은 컨텐츠 생성 시 자연스럽게 반영됩니다.
2. **학생 컨텐츠 제작 기능**: 학생이 직접 컨텐츠를 제작하거나 업로드하는 기능은 포함하지 않습니다.
3. **메뉴얼 버전 관리**: 메뉴얼의 버전 히스토리 관리 기능은 초기 버전에 포함하지 않습니다.
4. **다국어 지원**: 초기 버전은 한국어만 지원합니다.
5. **메뉴얼 통계/분석**: 학생의 메뉴얼 사용 통계나 분석 기능은 포함하지 않습니다.
6. **인터랙티브 튜토리얼**: 단계별 퀴즈나 체크리스트 기능은 포함하지 않습니다 (검색/필터링 중심).

## Design Considerations

### UI 디자인
- 학생 친화적인 밝고 깔끔한 색상 팔레트 사용
- 카드 기반 레이아웃으로 각 에이전트를 시각적으로 구분
- 검색 바는 상단에 고정하여 항상 접근 가능
- 모바일 우선 반응형 디자인

### 컨텐츠 구조
- 각 에이전트별로 독립적인 섹션 구성
- 컨텐츠는 탭 또는 아코디언 형식으로 구성 가능
- 이미지 갤러리 형식으로 여러 이미지 표시 지원

### 기술 스택
- PHP 7.1.9 (서버 환경)
- MySQL 5.7 (데이터베이스)
- 순수 JavaScript, CSS, HTML (프론트엔드)
- Moodle 인증 시스템 연동

## Technical Considerations

### 서버 환경
- Moodle 설정 파일 포함: `include_once("/home/moodle/public_html/moodle/config.php");`
- 전역 변수 사용: `global $DB, $USER;`
- 로그인 확인: `require_login();`
- 사용자 역할 확인: `$userrole = $DB->get_record_sql("SELECT data FROM mdl_user_info_data WHERE userid='$USER->id' AND fieldid='22'");`

### 파일 업로드
- 업로드 파일은 `/home/moodle/public_html/moodle/local/augmented_teacher/alt42/orchestration/agents/studentmanual/uploads/` 디렉토리에 저장
- 파일명은 타임스탬프 기반으로 중복 방지
- 업로드 전 파일 타입 및 크기 검증 필수

### 데이터베이스
- 새로운 테이블 생성 필요:
  - `mdl_at42_studentmanual_items`: 메뉴얼 항목 정보
  - `mdl_at42_studentmanual_contents`: 컨텐츠 정보
  - `mdl_at42_studentmanual_item_contents`: 메뉴얼 항목과 컨텐츠 연결 테이블

### 기존 시스템 연동
- 기존 agents 디렉토리 구조 참조
- 다른 에이전트의 UI 패턴과 일관성 유지 (가능한 범위 내)

## Success Metrics

1. **접근성**: 모든 학생이 메뉴얼에 접근 가능 (목표: 100% 접근성)
2. **사용성**: 학생들이 평균 3회 이내 클릭으로 원하는 정보를 찾을 수 있음
3. **컨텐츠 품질**: 주요 에이전트(6개) 모두에 대한 기본 메뉴얼 컨텐츠 제공
4. **교사 만족도**: 교사가 컨텐츠를 쉽게 추가/수정할 수 있음
5. **모바일 호환성**: 모바일 기기에서 정상 작동 확인

## Open Questions

1. 메뉴얼 항목의 우선순위나 추천 순서가 필요한가요?
2. 각 에이전트별 기본 컨텐츠는 누가 초기에 작성하나요? (개발팀/교사팀)
3. 동영상 컨텐츠는 주로 외부 링크(YouTube)를 사용할지, 직접 업로드를 주로 사용할지 결정이 필요합니다.
4. 메뉴얼 항목에 태그 시스템이 필요한가요? (검색 정확도 향상을 위해)
5. 메뉴얼 항목에 "도움이 되었나요?" 같은 피드백 기능이 필요한가요?

