# Agent 16 - Interaction Preparation Strategy Step 1
# 학생 상태 파악 및 데이터 수집

## 목적
학생의 수학 학습 상태를 정량화하고, 상호작용 준비에 필요한 모든 정보를 수집한다.

---

## 1. 수학 학습 상태 정량화

### 1.1 학습 단계 감지
- **개념학습**: 새로운 개념을 배우는 단계
- **유형연습**: 배운 개념을 문제에 적용하는 단계
- **심화**: 응용 문제를 푸는 단계
- **기출**: 시험 대비 기출 문제 푸는 단계

**데이터 수집 방법**:
- 학생설문: "현재 학습 중인 단계는 무엇인가요?"
- 자동 감지: 최근 학습 활동 로그 분석

### 1.2 성과 정량화
- **정답률**: 최근 수학 문제 정답률 (%)
- **단원별 정답률**: 함수, 도형, 통계 등 단원별 성취도
- **학습 속도**: 문제당 평균 소요 시간

**데이터 수집 방법**:
- 학생설문: "최근 수학 문제 정답률은 몇 %인가요?"
- 자동 수집: 문제 풀이 로그 분석

### 1.3 학생 수준 분류
- **하위권**: 정답률 < 50%
- **중위권**: 50% ≤ 정답률 < 80%
- **상위권**: 정답률 ≥ 80%

**자동 분류 로직**:
```
if math_recent_accuracy < 50:
    student_level = "하위권"
elif math_recent_accuracy < 80:
    student_level = "중위권"
else:
    student_level = "상위권"
```

---

## 2. 수학 학습 스타일 파악

### 2.1 학습 스타일 분류
- **계산형**: 계산 정확성 중심, 반복 연습 선호
- **개념형**: 개념 이해 중심, 탐구적 사고 선호
- **응용형**: 다양한 문제 풀이 중심, 창의적 접근 선호

**데이터 수집 방법**:
- Agent 01 온보딩 데이터 연계
- 학생설문: "수학 문제를 풀 때 어떤 방식이 편하신가요?"

### 2.2 학습 스타일과 세계관 매핑
- 계산형 → 단기미션 모드 (반복 연습 강조)
- 개념형 → 탐구학습 모드 (개념 탐색 강조)
- 응용형 → 자기주도 모드 (다양한 문제 자율 선택)

---

## 3. 취약 단원 식별

### 3.1 취약 단원 판단 기준
- 단원별 정답률 < 60% → 취약 단원
- 학생 자가 보고 → 직접 입력

**데이터 수집 방법**:
- 자동 계산: 단원별 정답률 분석
- 학생설문: "어떤 단원에서 가장 도움이 필요하신가요?"

### 3.2 취약 단원 기반 전략
- 취약 단원 학습 시 → 도제학습 모드 우선 선택
- 취약 단원 복습 시 → 자기성찰 모드 (실수→성장 서사)

---

## 4. 학원 수업 맥락 파악

### 4.1 학원 수업 일정 정보
- 학원 수업 시간
- 학원 수업 내용 (단원)
- 학원 수업 전후 상호작용 필요 여부

**데이터 수집 방법**:
- 학생설문: "학원 수업 전 상호작용이 필요하신가요?"
- 학생설문: "학원 수업 후 복습 상호작용이 필요하신가요?"

### 4.2 학원 수업 전후 준비 전략
- **수업 전**: 예습 가이드, 개념 리마인드, 문제 선행 학습
- **수업 후**: 복습 안내, 이해도 확인, 추가 설명

---

## 5. 문제 풀이 상태 모니터링

### 5.1 실시간 문제 풀이 감지
- 문제 풀이 진행 중 상태
- 문제 풀이 소요 시간
- 진행도 (막힘 여부)

**데이터 수집 방법**:
- 자동 수집: 문제 풀이 로그 실시간 모니터링

### 5.2 막힘 감지 기준
- 문제 풀이 시간 ≥ 임계값 (기본값: 5분)
- 진행도 변화 없음
- 계산 실수 패턴 반복

**데이터 가정**: 선생님 체크리스트 입력
- "문제 풀이 중 막힘 감지 시간: __분 (기본값: 5분)"

---

## 6. 데이터 통합 및 검증

### 6.1 필수 데이터 체크리스트
- [ ] 수학 학습 단계
- [ ] 수학 성과 (정답률, 단원별 성취도)
- [ ] 학생 수준
- [ ] 수학 학습 스타일
- [ ] 취약 단원 목록
- [ ] 학원 수업 맥락 (해당 시)
- [ ] 문제 풀이 상태 (해당 시)

### 6.2 데이터 결측 시 처리
- 데이터가 없는 경우: 학생설문 또는 선생님 체크리스트 입력 요청
- 부분 데이터만 있는 경우: 기존 데이터 기반 추론 + 추가 수집

---

## 7. 출력

### 7.1 수집된 데이터 구조
```yaml
student_state:
  math_learning_stage: "개념학습" | "유형연습" | "심화" | "기출"
  math_recent_accuracy: 0.0-1.0
  unit_accuracy:
    함수: 0.0-1.0
    도형: 0.0-1.0
    통계: 0.0-1.0
  student_level: "하위권" | "중위권" | "상위권"
  math_learning_style: "계산형" | "개념형" | "응용형"
  weak_units: ["함수", "도형"]
  academy_context:
    pre_class_needed: true/false
    post_class_needed: true/false
    class_time: "HH:MM"
  problem_solving_status:
    in_progress: true/false
    stuck_detected: true/false
    stuck_time_minutes: 0
```

### 7.2 다음 단계로 전달
- Step 2 (세계관 선택)로 데이터 전달
- 데이터 품질 검증 완료 확인

---

**참고**: 이 단계는 상호작용 준비의 기초가 되므로, 데이터 수집의 정확성과 완전성이 매우 중요합니다.

