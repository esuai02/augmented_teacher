# 🌐 온톨로지 추론 엔진 웹 테스트 가이드

## 📋 개요

**목적**: 웹 브라우저에서 최소 온톨로지 추론 기능을 빠르게 확인

**구성 요소**:
- `test_inference.php` - 웹 테스트 인터페이스
- `examples/02_minimal_inference.py` - Python 추론 엔진
- `examples/01_minimal_ontology.json` - 온톨로지 정의

---

## 🚀 빠른 시작

### Step 1: 웹 브라우저에서 접속

```
https://mathking.kr/moodle/local/augmented_teacher/alt42/ontology_brain/test_inference.php
```

### Step 2: 테스트 실행

1. **"▶️ 추론 엔진 실행"** 버튼 클릭
2. 3가지 테스트 케이스 결과 확인:
   - 철수 + 좌절 → **격려 필요**
   - 영희 + 집중 → **학습 진행**
   - 민수 + 피로 → **휴식 필요**

### Step 3: 일관성 검증 (선택 사항)

1. **"✓ 일관성 검증"** 버튼 클릭
2. 온톨로지와 추론 규칙 간 일관성 확인

---

## 📊 화면 구성

### 1. 시스템 정보 섹션
- 프로젝트 정보
- 파일 경로
- Python 버전

### 2. 온톨로지 구조 섹션
- **개념 (Classes)**: Student, Emotion
- **관계 (Properties)**: hasEmotion
- **추론 규칙 (3개)**:
  1. 좌절 → 격려 필요
  2. 집중 → 학습 진행
  3. 피로 → 휴식 필요

### 3. 테스트 실행 섹션
- 추론 엔진 실행 버튼
- 실시간 결과 표시
- 상세 분석 (파싱된 결과)

### 4. 다음 단계 섹션
- 확장 가이드 링크
- Level별 학습 경로

---

## ✅ 성공 확인 방법

### 정상 동작 시 출력 예시

```
✓ 성공

============================================================
Mathking 최소 온톨로지 추론 엔진 - Hello World
============================================================

✅ 온톨로지 로드 완료: 01_minimal_ontology.json
온톨로지 개념: ['Student', 'Emotion']

✅ 추론 규칙 3개 로드 완료

────────────────────────────────────────────────────────────
테스트 케이스 1
────────────────────────────────────────────────────────────

🔍 추론 시작
입력 사실: {'student': '철수', 'emotion': '좌절'}
  ✓ 규칙 적용: 좌절 → 격려 → 격려 필요

📊 결과:
  → 격려 필요

... (이하 생략)
```

### 상세 분석 섹션

테스트 실행 후 자동으로 표시됩니다:

- **로드된 개념**: 2개 (Student, Emotion)
- **로드된 규칙**: 3개
- **테스트 케이스별 상세 결과**:
  - 입력 사실
  - 적용된 규칙
  - 추론 결과

---

## 🐛 문제 해결

### Q1: "파일을 찾을 수 없습니다" 오류

**원인**: Python 스크립트나 온톨로지 파일이 없음

**해결**:
```bash
ls -la /mnt/c/1\ Project/augmented_teacher/alt42/ontology_brain/examples/
```

확인 항목:
- `01_minimal_ontology.json` 존재 여부
- `02_minimal_inference.py` 존재 여부

### Q2: Python 실행 오류

**원인**: Python3가 설치되지 않았거나 경로가 잘못됨

**해결**:
```bash
# Python 버전 확인
python3 --version

# 수동 테스트
cd /mnt/c/1\ Project/augmented_teacher/alt42/ontology_brain/examples/
python3 02_minimal_inference.py
```

### Q3: 권한 오류

**원인**: PHP에서 Python 스크립트 실행 권한 없음

**해결**:
```bash
chmod +x /mnt/c/1\ Project/augmented_teacher/alt42/ontology_brain/examples/*.py
```

### Q4: 일관성 검증 경고 발생

**현상**:
```
⚠️ 추론 규칙에서 사용된 '피로'이 온톨로지에 정의되어 있지 않습니다.
```

**설명**:
이것은 **정상적인 경고**입니다. 현재 최소 버전에서는:
- 온톨로지에는 추상적인 개념만 정의 (Student, Emotion)
- 추론 규칙에서는 구체적인 감정 사용 (좌절, 집중, 피로)

**향후 개선 방향**:
- 온톨로지에 구체적인 감정 개념 추가
- 감정 계층 구조 정의 (Emotion → Frustration, Focus, Fatigue)

---

## 📈 다음 단계

### Level 1: 새로운 감정 추가

1. `examples/02_minimal_inference.py` 수정
2. 새 규칙 추가:
   ```python
   {
       "id": "rule_4",
       "name": "불안 → 안정화",
       "condition": lambda facts: facts.get("emotion") == "불안",
       "action": "마음 안정화 필요"
   }
   ```
3. 테스트 케이스 추가
4. 웹에서 재실행

### Level 2: 복합 조건 추가

```python
{
    "id": "rule_5",
    "name": "좌절 + 반복 → 난이도 조정",
    "condition": lambda facts: (
        facts.get("emotion") == "좌절" and
        facts.get("retry_count", 0) >= 3
    ),
    "action": "난이도 하향 필요"
}
```

### Level 3: 실제 에이전트 연동

- 22개 에이전트 중 1개 선택
- 에이전트 규칙을 온톨로지 추론 규칙으로 변환
- 실제 학습 데이터 연결

---

## 📚 참고 문서

1. **빠른 시작 가이드**: `examples/README_QUICKSTART.md`
2. **확장 가이드**: `examples/04_EXPANSION_GUIDE.md`
3. **전체 README**: `README.md`

---

## 💡 핵심 개념 정리

### 온톨로지란?
- 개념들의 사전
- 개념 간 관계 정의
- 기계가 이해할 수 있는 형태로 지식 표현

### 추론 엔진이란?
- IF-THEN 규칙 실행기
- 입력 사실(facts) → 규칙 평가 → 결론(conclusions)
- 전문가 지식을 명시적으로 코드화

### 왜 온톨로지를 사용하나?
| 전통적 방법 | 온톨로지 기반 |
|------------|-------------|
| `if emotion == "좌절": print("격려")` | 규칙을 외부 파일로 분리 |
| 코드 수정 = 재배포 | 규칙 수정 = 파일만 변경 |
| 전문가 지식이 숨겨짐 | 전문가 지식이 문서화됨 |

---

## 🎯 테스트 체크리스트

- [ ] 웹 페이지 접속 성공
- [ ] 시스템 정보 표시됨
- [ ] Python 버전 확인됨
- [ ] "추론 엔진 실행" 버튼 클릭
- [ ] 3개 테스트 케이스 모두 성공
- [ ] 각 케이스별 입력/규칙/결과 표시됨
- [ ] "일관성 검증" 실행 (선택)
- [ ] 경고 메시지 이해함

---

## 📞 문의 및 지원

**문제가 발생하면**:
1. 웹 페이지의 오류 메시지 확인
2. 브라우저 콘솔 (F12) 확인
3. 터미널에서 수동 실행 테스트
4. 이 문서의 "문제 해결" 섹션 참조

**성공 여부 확인**:
- ✅ 녹색 "성공" 배지 표시
- ✅ 3개 테스트 케이스 모두 결과 출력
- ✅ "추론 완료" 메시지 표시

---

**문서 버전**: 1.0.0
**최종 업데이트**: 2025-10-31
**작성자**: Mathking Development Team
**난이도**: ⭐ 초급 (웹 브라우저만 있으면 OK)
