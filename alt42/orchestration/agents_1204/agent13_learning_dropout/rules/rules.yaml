# Rules for Agent 13 - Learning Dropout
# Generated at: 2025-01-21
# Purpose: ìˆ˜í•™ í•™ìŠµ ì´íƒˆ ì¡°ê¸° íƒì§€ ë° ë§ì¶¤í˜• ê°œì… ì„¤ê³„
# Source: teacher_level_evaluation.md ê¸°ë°˜ ìˆ˜í•™ íŠ¹í™” í™•ì¥

version: "1.0"
scenario: "learning_dropout"
description: "ìˆ˜í•™ í•™ìŠµ ì´íƒˆ ì¡°ê¸° íƒì§€ ë° ì˜ˆë°© ê°œì… - ìˆ˜í•™ ë‹¨ì›ë³„/ë‚œì´ë„ë³„/í•™ì› ë§¥ë½ í†µí•© ë¶„ì„"

#
# í¬ê´„í˜• ì§ˆë¬¸ 1: "ì´ í•™ìƒì˜ í•™ìŠµ ëª°ì… íë¦„ì´ ì–´ëŠ ì‹œì ì—ì„œ ëŠê¸°ê³  ìˆëŠ”ì§€, ê·¸ ì›ì¸ì„ ì–´ë–»ê²Œ ì¡°ê¸° íƒì§€Â·ì˜ˆë°©í•´ì•¼ í• ê¹Œ?"
#   - ì—°ê³„ ë£°: S0_R1~S0_R6 (ìˆ˜í•™ íŠ¹í™” ì •ë³´ ìˆ˜ì§‘), S1_R1~S1_R3 (ì´íƒˆ ì¡°ê¸° íƒì§€ ë° ê°œì…), S8_R1~S8_R4 (ê¸°ë³¸ ì´íƒˆ íƒì§€ ë° ìœ„í—˜ë„ í‰ê°€)
#   - ë°ì´í„° ì†ŒìŠ¤: pomodoro_pattern, emotion_change_rate, note_taking_trend, goal_input_delay, routine_collapse_point, dropout_prediction, intervention_timing, intervention_message, action_routine, immersion_break_point, dropout_cause
#   - ì˜¨í†¨ë¡œì§€: DropoutEarlyDetection
#   - ì—°ê³„ ì—ì´ì „íŠ¸: Agent 05 (ê°ì • ë¶„ì„), Agent 18 (ì‹œê·¸ë„ˆì²˜ ë£¨í‹´)
#
# í¬ê´„í˜• ì§ˆë¬¸ 2: "ì´ í•™ìƒì˜ ì§‘ì¤‘ íšŒë³µë ¥ì„ ë†’ì´ê¸° ìœ„í•´ ì–´ë–¤ ë£¨í‹´ê³¼ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¡°ì •í•´ì•¼ í• ê¹Œ?"
#   - ì—°ê³„ ë£°: S8_R3 (ë£¨í‹´ ë³´ì •), S1_R2 (ë‹¨ì›ë³„ ë§ì¶¤í˜• ê°œì…), S2_R1~S2_R3 (ë‚œì´ë„ë³„ ì´íƒˆ ë¶„ì„)
#   - ë°ì´í„° ì†ŒìŠ¤: return_success_rate, return_delay_after_dropout, emotion_recovery_speed, fatigue_accumulation_index, routine_maintenance_stability, return_loop_strategy, routine_adjustment, time_intensity_reward, concentration_recovery, environment_variables
#   - ì˜¨í†¨ë¡œì§€: ConcentrationRecovery
#   - ì—°ê³„ ì—ì´ì „íŠ¸: Agent 05 (ê°ì • íšŒë³µ), Agent 12 (íœ´ì‹ ë£¨í‹´), Agent 18 (ë£¨í‹´ ì¡°ì •)
#
# í¬ê´„í˜• ì§ˆë¬¸ 3: "ì´ í•™ìƒì´ ì¥ê¸°ì ìœ¼ë¡œ ì´íƒˆì´ ì¤„ê³ , ìê¸°ì¡°ì ˆ ë£¨í‹´ì´ ìë¦¬ì¡ë„ë¡ í•˜ê¸° ìœ„í•´ ì§€ê¸ˆ ì–´ë–¤ í”¼ë“œë°± ì²´ê³„ë¥¼ êµ¬ì¶•í•´ì•¼ í• ê¹Œ?"
#   - ì—°ê³„ ë£°: S8_R4 (ì—ìŠ¤ì»¬ë ˆì´ì…˜), S3_R1~S3_R3 (í•™ìŠµ ë‹¨ê³„ë³„ ì´íƒˆ ë¶„ì„), S4_R1~S4_R3 (í•™ì› ë§¥ë½ ì´íƒˆ ë¶„ì„)
#   - ë°ì´í„° ì†ŒìŠ¤: weekly_dropout_trend, emotion_rest_data, teacher_intervention_effect, feedback_tolerance, return_loop_completion_rate, self_regulation_routine, emotional_recovery_routine, long_term_dropout_reduction, self_regulation_establishment, feedback_system
#   - ì˜¨í†¨ë¡œì§€: SelfRegulationRoutine
#   - ì—°ê³„ ì—ì´ì „íŠ¸: Agent 05 (ê°ì •/íœ´ì‹ ë°ì´í„°), Agent 06 (êµì‚¬ ê°œì… íš¨ê³¼), Agent 18 (ìê¸°ì¡°ì ˆ ë£¨í‹´)
#
# ìì„¸í•œ ë°ì´í„° ê¸°ë°˜ ì§ˆë¬¸ ì •ì˜ëŠ” data_based_questions.jsì˜ agent13 ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”.
#

rules:
  # ========== S0: ìˆ˜í•™ íŠ¹í™” í•„ìˆ˜ ì •ë³´ ìˆ˜ì§‘ ë£° ==========
  
  - rule_id: "S0_R1_current_math_unit_collection"
    priority: 99
    description: "í˜„ì¬ í•™ìŠµ ì¤‘ì¸ ìˆ˜í•™ ë‹¨ì› ì •ë³´ ìˆ˜ì§‘"
    conditions:
      - field: "current_math_unit"
        operator: "=="
        value: null
      - OR:
        - field: "detect_dropout_risk"
          operator: "=="
          value: true
        - field: "ninactive"
          operator: ">="
          value: 1
    action:
      - "collect_info: 'current_math_unit'"
      - "validate: 'ìˆ˜í•™ ë‹¨ì› ì •ë³´ëŠ” í•™ë…„ê³¼ ë‹¨ì›ëª…ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤ (ì˜ˆ: ì¤‘2-í•¨ìˆ˜)'"
      - "display_message: 'í˜„ì¬ í•™ìŠµ ì¤‘ì¸ ìˆ˜í•™ ë‹¨ì›ì„ íŒŒì•…í•˜ì—¬ ë‹¨ì›ë³„ ì´íƒˆ íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤.'"
      - "question: 'í˜„ì¬ í•™ìŠµ ì¤‘ì¸ ìˆ˜í•™ ë‹¨ì›ì€ ë¬´ì—‡ì¸ê°€ìš”? (ì˜ˆ: ì¤‘2-í•¨ìˆ˜, ì¤‘3-ì´ì°¨ë°©ì •ì‹)'"
    confidence: 0.96
    rationale: "S0: ë‹¨ì›ë³„ ì´íƒˆ íŒ¨í„´ ë¶„ì„ì„ ìœ„í•´ í˜„ì¬ ë‹¨ì› ì •ë³´ í•„ìˆ˜"
  
  - rule_id: "S0_R2_problem_difficulty_collection"
    priority: 98
    description: "í˜„ì¬ í’€ê³  ìˆëŠ” ë¬¸ì œ ë‚œì´ë„ ì •ë³´ ìˆ˜ì§‘"
    conditions:
      - field: "problem_difficulty"
        operator: "=="
        value: null
      - OR:
        - field: "detect_dropout_risk"
          operator: "=="
          value: true
        - field: "eye_count"
          operator: ">="
          value: 1
    action:
      - "collect_info: 'problem_difficulty'"
      - "validate: 'ë¬¸ì œ ë‚œì´ë„ëŠ” ê¸°ë³¸í˜•, ìœ í˜•, ì‹¬í™” ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤'"
      - "display_message: 'í˜„ì¬ í’€ê³  ìˆëŠ” ë¬¸ì œ ë‚œì´ë„ë¥¼ íŒŒì•…í•˜ì—¬ ë‚œì´ë„ë³„ ì´íƒˆ íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤.'"
      - "question: 'í˜„ì¬ í’€ê³  ìˆëŠ” ë¬¸ì œ ë‚œì´ë„ëŠ”? (A) ê¸°ë³¸í˜• (B) ìœ í˜• (C) ì‹¬í™”'"
    confidence: 0.95
    rationale: "S0: ë‚œì´ë„ë³„ ì´íƒˆ ë¶„ì„ì„ ìœ„í•´ ë¬¸ì œ ë‚œì´ë„ ì •ë³´ í•„ìˆ˜"
  
  - rule_id: "S0_R3_learning_stage_collection"
    priority: 97
    description: "í˜„ì¬ í•™ìŠµ ë‹¨ê³„ ì •ë³´ ìˆ˜ì§‘ (ê°œë…/ìœ í˜•/ì‹¬í™”/ê¸°ì¶œ)"
    conditions:
      - field: "learning_stage"
        operator: "=="
        value: null
      - OR:
        - field: "detect_dropout_risk"
          operator: "=="
          value: true
        - field: "tlaststroke_min"
          operator: ">="
          value: 5
    action:
      - "collect_info: 'learning_stage'"
      - "validate: 'í•™ìŠµ ë‹¨ê³„ëŠ” ê°œë… í•™ìŠµ, ìœ í˜• ì—°ìŠµ, ì‹¬í™” ë¬¸ì œ, ê¸°ì¶œ ë¬¸ì œ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤'"
      - "display_message: 'í˜„ì¬ í•™ìŠµ ë‹¨ê³„ë¥¼ íŒŒì•…í•˜ì—¬ ë‹¨ê³„ë³„ ì´íƒˆ íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤.'"
      - "question: 'í˜„ì¬ ì–´ë–¤ í•™ìŠµ ë‹¨ê³„ì¸ê°€ìš”? (A) ê°œë… í•™ìŠµ (B) ìœ í˜• ì—°ìŠµ (C) ì‹¬í™” ë¬¸ì œ (D) ê¸°ì¶œ ë¬¸ì œ'"
    confidence: 0.94
    rationale: "S0: í•™ìŠµ ë‹¨ê³„ë³„ ì´íƒˆ ë¶„ì„ì„ ìœ„í•´ í˜„ì¬ ë‹¨ê³„ ì •ë³´ í•„ìˆ˜"
  
  - rule_id: "S0_R4_academy_class_understanding_collection"
    priority: 96
    description: "í•™ì› ìˆ˜ì—… ì´í•´ë„ ì •ë³´ ìˆ˜ì§‘"
    conditions:
      - field: "academy_class_understanding"
        operator: "=="
        value: null
      - OR:
        - field: "detect_dropout_risk"
          operator: "=="
          value: true
        - field: "ninactive"
          operator: ">="
          value: 2
    action:
      - "collect_info: 'academy_class_understanding'"
      - "validate: 'í•™ì› ìˆ˜ì—… ì´í•´ë„ëŠ” ì™„ì „íˆ ì´í•´, ëŒ€ë¶€ë¶„ ì´í•´, ë°˜ë§Œ ì´í•´, ê±°ì˜ ì´í•´ ëª»í•¨ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤'"
      - "display_message: 'ì˜¤ëŠ˜ í•™ì› ìˆ˜ì—… ì´í•´ë„ë¥¼ íŒŒì•…í•˜ì—¬ í•™ì› ë§¥ë½ ê¸°ë°˜ ì´íƒˆ ì›ì¸ì„ ë¶„ì„í•©ë‹ˆë‹¤.'"
      - "question: 'ì˜¤ëŠ˜ í•™ì› ìˆ˜ì—…ì„ ì´í•´í•˜ì…¨ë‚˜ìš”? (A) ì™„ì „íˆ ì´í•´ (B) ëŒ€ë¶€ë¶„ ì´í•´ (C) ë°˜ë§Œ ì´í•´ (D) ê±°ì˜ ì´í•´ ëª»í•¨'"
    confidence: 0.93
    rationale: "S0: í•™ì› ìˆ˜ì—… ì´í•´ë„ëŠ” ì´íƒˆ ì›ì¸ ë¶„ì„ì˜ í•µì‹¬ ìš”ì†Œ"
  
  - rule_id: "S0_R5_academy_homework_burden_collection"
    priority: 95
    description: "í•™ì› ê³¼ì œ ë¶€ë‹´ ì •ë³´ ìˆ˜ì§‘"
    conditions:
      - field: "academy_homework_burden"
        operator: "=="
        value: null
      - OR:
        - field: "detect_dropout_risk"
          operator: "=="
          value: true
        - field: "risk_tier"
          operator: "=="
          value: "Medium"
    action:
      - "collect_info: 'academy_homework_burden'"
      - "validate: 'í•™ì› ê³¼ì œ ë¶€ë‹´ì€ ì ì ˆí•¨, ì¡°ê¸ˆ ë§ìŒ, ë„ˆë¬´ ë§ìŒ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤'"
      - "display_message: 'ì˜¤ëŠ˜ í•™ì› ê³¼ì œ ì–‘ì„ íŒŒì•…í•˜ì—¬ ê³¼ì œ ë¶€ë‹´ ê¸°ë°˜ ì´íƒˆ ì›ì¸ì„ ë¶„ì„í•©ë‹ˆë‹¤.'"
      - "question: 'ì˜¤ëŠ˜ í•™ì› ê³¼ì œ ì–‘ì´ ì ì ˆí•˜ì‹ ê°€ìš”? (A) ì ì ˆí•¨ (B) ì¡°ê¸ˆ ë§ìŒ (C) ë„ˆë¬´ ë§ìŒ'"
    confidence: 0.92
    rationale: "S0: í•™ì› ê³¼ì œ ë¶€ë‹´ì€ ì´íƒˆ ì¦ê°€ì˜ ì£¼ìš” ì›ì¸"
  
  - rule_id: "S0_R6_math_level_collection"
    priority: 94
    description: "ìˆ˜í•™ ì„±ì  ìˆ˜ì¤€ ì •ë³´ ìˆ˜ì§‘ (í•˜ìœ„/ì¤‘ìœ„/ìƒìœ„)"
    conditions:
      - field: "math_level"
        operator: "=="
        value: null
      - OR:
        - field: "detect_dropout_risk"
          operator: "=="
          value: true
        - field: "risk_tier"
          operator: "in"
          value: ["Medium", "High"]
    action:
      - "collect_info: 'math_level'"
      - "validate: 'ìˆ˜í•™ ì„±ì  ìˆ˜ì¤€ì€ í•˜ìœ„ê¶Œ, ì¤‘ìœ„ê¶Œ, ìƒìœ„ê¶Œ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤'"
      - "display_message: 'ìˆ˜í•™ ì„±ì  ìˆ˜ì¤€ì„ íŒŒì•…í•˜ì—¬ ìˆ˜ì¤€ë³„ ë§ì¶¤í˜• ì´íƒˆ ëŒ€ì‘ ì „ëµì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.'"
      - "question: 'í˜„ì¬ ìˆ˜í•™ ì„±ì  ìˆ˜ì¤€ì€? (A) í•˜ìœ„ê¶Œ (B) ì¤‘ìœ„ê¶Œ (C) ìƒìœ„ê¶Œ'"
    confidence: 0.91
    rationale: "S0: ìˆ˜ì¤€ë³„ ì´íƒˆ ì›ì¸ ì°¨ë³„í™”ë¥¼ ìœ„í•´ ìˆ˜í•™ ì„±ì  ìˆ˜ì¤€ í•„ìˆ˜"
  
  # ========== S1: ë‹¨ì›ë³„ ì´íƒˆ íŒ¨í„´ ë¶„ì„ ë£° ==========
  
  - rule_id: "S1_R1_unit_difficulty_dropout_analysis"
    priority: 90
    description: "ì–´ë ¤ìš´ ë‹¨ì›ì—ì„œ ì´íƒˆ ì¦ê°€ íŒ¨í„´ ë¶„ì„"
    conditions:
      - field: "current_math_unit"
        operator: "!="
        value: null
      - field: "ninactive"
        operator: ">="
        value: 2
      - OR:
        - field: "current_math_unit"
          operator: "contains"
          value: "í•¨ìˆ˜"
        - field: "current_math_unit"
          operator: "contains"
          value: "ë„í˜•"
        - field: "current_math_unit"
          operator: "contains"
          value: "ì´ì°¨"
    action:
      - "analyze: 'unit_difficulty_dropout_pattern'"
      - "load_db: 'math_unit_difficulty.yaml'"  # ë‹¨ì›ë³„ ë‚œì´ë„ DB ë¡œë“œ
      - "identify_dropout_patterns: 'difficult_unit_dropout'"
      - "generate_description: 'difficult_unit_dropout_analysis'"
      - "display_message: '{current_math_unit} ë‹¨ì›ì€ ë‚œì´ë„ê°€ ë†’ì•„ ì´íƒˆì´ ë¹ˆë²ˆí•©ë‹ˆë‹¤. ê¸°ë³¸ ê°œë…ë¶€í„° ë‹¤ì‹œ ë³µìŠµí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.'"
      - "suggest_easy_win: 'unit_basic_concept_review'"
      - "recommend_path: 'ê¸°ë³¸ ê°œë… ì¬í•™ìŠµ â†’ ì‰¬ìš´ ë¬¸ì œ ì—°ìŠµ â†’ ë‹¨ì› ì™„ë£Œ'"
    confidence: 0.88
    rationale: "S1: ì–´ë ¤ìš´ ë‹¨ì›(í•¨ìˆ˜, ë„í˜•, ì´ì°¨)ì—ì„œ ì´íƒˆ ì¦ê°€ëŠ” ë‚œì´ë„ ì¡°ì • í•„ìš” ì‹ í˜¸"
  
  - rule_id: "S1_R2_unit_specific_intervention"
    priority: 89
    description: "ë‹¨ì›ë³„ ë§ì¶¤í˜• ê°œì… ì „ëµ ì ìš©"
    conditions:
      - field: "current_math_unit"
        operator: "!="
        value: null
      - field: "risk_tier"
        operator: "in"
        value: ["Medium", "High"]
    action:
      - "analyze: 'unit_specific_dropout_cause'"
      - "generate_description: 'unit_specific_intervention_strategy'"
      - "load_db: 'unit_intervention_strategies.yaml'"  # ë‹¨ì›ë³„ ê°œì… ì „ëµ DB
      - "suggest_easy_win: 'unit_specific_easy_task'"
      - "display_message: '{current_math_unit} ë‹¨ì› íŠ¹ì„±ì— ë§ëŠ” ì‰¬ìš´ ìŠ¹ë¦¬ ê³¼ì œë¥¼ ì œì‹œí•©ë‹ˆë‹¤.'"
      - "adjust_routine: 'unit_based_session_length'"
    confidence: 0.87
    rationale: "S1: ë‹¨ì›ë³„ íŠ¹ì„±ì— ë§ëŠ” ê°œì… ì „ëµì´ íš¨ê³¼ì "
  
  # ========== S2: ë‚œì´ë„ë³„ ì´íƒˆ ë¶„ì„ ë£° ==========
  
  - rule_id: "S2_R1_difficulty_dropout_analysis"
    priority: 88
    description: "ì‹¬í™” ë¬¸ì œì—ì„œ ì´íƒˆ ì¦ê°€ ì‹œ ê¸°ë³¸í˜• ì „í™˜ ì œì•ˆ"
    conditions:
      - field: "problem_difficulty"
        operator: "=="
        value: "ì‹¬í™”"
      - field: "ninactive"
        operator: ">="
        value: 2
      - OR:
        - field: "eye_count"
          operator: ">="
          value: 2
        - field: "tlaststroke_min"
          operator: ">="
          value: 10
    action:
      - "analyze: 'difficulty_based_dropout_pattern'"
      - "identify_dropout_patterns: 'high_difficulty_dropout'"
      - "generate_description: 'difficulty_dropout_analysis'"
      - "display_message: 'ì‹¬í™” ë¬¸ì œì—ì„œ ì´íƒˆì´ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸í˜• ë¬¸ì œë¡œ ì „í™˜í•˜ì—¬ í•™ìŠµ íë¦„ì„ ìœ ì§€í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.'"
      - "suggest_easy_win: 'switch_to_basic_problems'"
      - "recommend_path: 'ê¸°ë³¸í˜• ë¬¸ì œ ì™„ë£Œ â†’ ìœ í˜• ë¬¸ì œ â†’ ì‹¬í™” ë¬¸ì œ ìˆœì„œë¡œ ì¬ì§„ì…'"
      - "adjust_routine: 'reduce_difficulty_level'"
    confidence: 0.86
    rationale: "S2: ì‹¬í™” ë¬¸ì œì—ì„œ ì´íƒˆ ì¦ê°€ëŠ” ë‚œì´ë„ê°€ ë„ˆë¬´ ë†’ë‹¤ëŠ” ì‹ í˜¸ â†’ ê¸°ë³¸í˜• ì „í™˜"
  
  - rule_id: "S2_R2_difficulty_progression_intervention"
    priority: 87
    description: "ë‚œì´ë„ë³„ ë‹¨ê³„ì  ì¬ì§„ì… ì „ëµ"
    conditions:
      - field: "problem_difficulty"
        operator: "!="
        value: null
      - field: "risk_tier"
        operator: "=="
        value: "High"
    action:
      - "analyze: 'difficulty_progression_analysis'"
      - "generate_description: 'difficulty_progression_strategy'"
      - "suggest_easy_win: 'gradual_difficulty_increase'"
      - "display_message: 'ë‚œì´ë„ë³„ ë‹¨ê³„ì  ì¬ì§„ì… ì „ëµì„ ì œì‹œí•©ë‹ˆë‹¤. í˜„ì¬ ë‚œì´ë„ë³´ë‹¤ í•œ ë‹¨ê³„ ë‚®ì€ ë¬¸ì œë¶€í„° ì‹œì‘í•˜ì„¸ìš”.'"
      - "adjust_routine: 'step_by_step_difficulty'"
    confidence: 0.85
    rationale: "S2: ë‹¨ê³„ì  ë‚œì´ë„ ì¦ê°€ê°€ ì´íƒˆ ë°©ì§€ì— íš¨ê³¼ì "
  
  # ========== S3: í•™ì› ìˆ˜ì—… ì´í•´ë„ ê¸°ë°˜ ì´íƒˆ ë¶„ì„ ë£° ==========
  
  - rule_id: "S3_R1_academy_understanding_dropout_analysis"
    priority: 86
    description: "í•™ì› ìˆ˜ì—… ì´í•´ ëª»í•¨ìœ¼ë¡œ ì¸í•œ ì´íƒˆ ë¶„ì„"
    conditions:
      - field: "academy_class_understanding"
        operator: "in"
        value: ["ë°˜ë§Œ ì´í•´", "ê±°ì˜ ì´í•´ ëª»í•¨"]
      - field: "ninactive"
        operator: ">="
        value: 2
    action:
      - "analyze: 'academy_understanding_dropout_pattern'"
      - "identify_dropout_patterns: 'low_understanding_dropout'"
      - "generate_description: 'academy_understanding_dropout_analysis'"
      - "display_message: 'í•™ì› ìˆ˜ì—…ì„ ì´í•´í•˜ì§€ ëª»í•œ ìƒíƒœì—ì„œ ììŠµ ì‹œ ì´íƒˆì´ ì¦ê°€í•©ë‹ˆë‹¤. ì´í•´ ëª»í•œ ë‚´ìš©ì„ ë¨¼ì € ë³µìŠµí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.'"
      - "suggest_easy_win: 'review_unclear_concepts'"
      - "recommend_path: 'í•™ì› êµì¬ ê°œë… ë¶€ë¶„ ì¬í•™ìŠµ â†’ ì´í•´í•œ í›„ ë¬¸ì œ í’€ì´ ì¬ì§„ì…'"
      - "send_refocus_message: 'academy_concept_review_focus'"
    confidence: 0.84
    rationale: "S3: í•™ì› ìˆ˜ì—… ì´í•´ ëª»í•¨ â†’ ììŠµ ì‹œ ì´íƒˆ ì¦ê°€ â†’ ì˜ˆìŠµ/ë³µìŠµ ê°•í™” í•„ìš”"
  
  - rule_id: "S3_R2_academy_concept_review_intervention"
    priority: 85
    description: "í•™ì› ìˆ˜ì—… ì´í•´ë„ ê¸°ë°˜ ë§ì¶¤í˜• ê°œì…"
    conditions:
      - field: "academy_class_understanding"
        operator: "in"
        value: ["ë°˜ë§Œ ì´í•´", "ê±°ì˜ ì´í•´ ëª»í•¨"]
      - field: "risk_tier"
        operator: "in"
        value: ["Medium", "High"]
    action:
      - "analyze: 'academy_concept_review_strategy'"
      - "generate_description: 'academy_concept_review_intervention'"
      - "suggest_easy_win: 'academy_textbook_concept_review'"
      - "display_message: 'í•™ì› êµì¬ì˜ ê°œë… ë¶€ë¶„ì„ ë‹¤ì‹œ ë³´ë©° ì´í•´ë„ë¥¼ ë†’ì¸ í›„ ë¬¸ì œ í’€ì´ë¥¼ ì¬ê°œí•˜ì„¸ìš”.'"
      - "adjust_routine: 'concept_first_then_problems'"
    confidence: 0.83
    rationale: "S3: ê°œë… ì´í•´ í›„ ë¬¸ì œ í’€ì´ê°€ ì´íƒˆ ë°©ì§€ì— íš¨ê³¼ì "
  
  # ========== S4: í•™ìŠµ ë‹¨ê³„ë³„ ì´íƒˆ ë¶„ì„ ë£° ==========
  
  - rule_id: "S4_R1_concept_learning_dropout_intervention"
    priority: 84
    description: "ê°œë… í•™ìŠµ ì¤‘ ì´íƒˆ ì‹œ ì„¤ëª… ë³´ê°• ì œì•ˆ"
    conditions:
      - field: "learning_stage"
        operator: "=="
        value: "ê°œë… í•™ìŠµ"
      - field: "eye_count"
        operator: ">="
        value: 1
      - field: "tlaststroke_min"
        operator: ">="
        value: 5
    action:
      - "analyze: 'concept_learning_dropout_pattern'"
      - "identify_dropout_patterns: 'concept_stage_dropout'"
      - "generate_description: 'concept_learning_dropout_analysis'"
      - "display_message: 'ê°œë… í•™ìŠµ ì¤‘ ì´íƒˆì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œê° ìë£Œë‚˜ ì˜ˆì‹œë¥¼ í™œìš©í•˜ì—¬ ì„¤ëª…ì„ ë³´ê°•í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.'"
      - "suggest_easy_win: 'visual_concept_explanation'"
      - "recommend_path: 'ì‹œê° ìë£Œ/ì˜ˆì‹œ í™œìš© ê°œë… í•™ìŠµ â†’ ê°„ë‹¨í•œ í™•ì¸ ë¬¸ì œ â†’ ì¬ì§„ì…'"
      - "send_refocus_message: 'concept_explanation_enhancement'"
    confidence: 0.82
    rationale: "S4: ê°œë… í•™ìŠµ ì´íƒˆì€ ì„¤ëª… ë¶€ì¡± ê°€ëŠ¥ì„± â†’ ì‹œê° ìë£Œ/ì˜ˆì‹œ ë³´ê°•"
  
  - rule_id: "S4_R2_problem_solving_dropout_intervention"
    priority: 83
    description: "ë¬¸ì œ í’€ì´ ì¤‘ ì´íƒˆ ì‹œ ì‰¬ìš´ ë¬¸ì œ ì œì‹œ"
    conditions:
      - field: "learning_stage"
        operator: "=="
        value: "ìœ í˜• ì—°ìŠµ"
      - field: "ninactive"
        operator: ">="
        value: 2
    action:
      - "analyze: 'problem_solving_dropout_pattern'"
      - "identify_dropout_patterns: 'problem_stage_dropout'"
      - "generate_description: 'problem_solving_dropout_analysis'"
      - "display_message: 'ë¬¸ì œ í’€ì´ ì¤‘ ì´íƒˆì´ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•œ ë‹¨ê³„ ì‰¬ìš´ ë¬¸ì œë¡œ ì „í™˜í•˜ì—¬ í•™ìŠµ íë¦„ì„ ìœ ì§€í•˜ì„¸ìš”.'"
      - "suggest_easy_win: 'switch_to_easier_problems'"
      - "recommend_path: 'ì‰¬ìš´ ë¬¸ì œ 1ê°œ ì™„ë£Œ â†’ ìì‹ ê° íšŒë³µ â†’ ì›ë˜ ë‚œì´ë„ ì¬ì§„ì…'"
      - "adjust_routine: 'problem_difficulty_adjustment'"
    confidence: 0.81
    rationale: "S4: ë¬¸ì œ í’€ì´ ì´íƒˆì€ ë‚œì´ë„ ë†’ìŒ ê°€ëŠ¥ì„± â†’ ì‰¬ìš´ ë¬¸ì œë¡œ ì „í™˜"
  
  # ========== S5: í•™ì› ê³¼ì œ ë¶€ë‹´ ê¸°ë°˜ ì´íƒˆ ë¶„ì„ ë£° ==========
  
  - rule_id: "S5_R1_homework_burden_dropout_analysis"
    priority: 82
    description: "í•™ì› ê³¼ì œ ê³¼ë‹¤ë¡œ ì¸í•œ ì´íƒˆ ë¶„ì„"
    conditions:
      - field: "academy_homework_burden"
        operator: "in"
        value: ["ì¡°ê¸ˆ ë§ìŒ", "ë„ˆë¬´ ë§ìŒ"]
      - field: "ninactive"
        operator: ">="
        value: 2
    action:
      - "analyze: 'homework_burden_dropout_pattern'"
      - "identify_dropout_patterns: 'high_homework_burden_dropout'"
      - "generate_description: 'homework_burden_dropout_analysis'"
      - "display_message: 'í•™ì› ê³¼ì œê°€ ë§ì•„ ì´íƒˆì´ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê³¼ì œ ìš°ì„ ìˆœìœ„ë¥¼ ì¡°ì •í•˜ì—¬ ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” ê³¼ì œë¶€í„° ì™„ë£Œí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.'"
      - "suggest_easy_win: 'prioritize_homework_tasks'"
      - "recommend_path: 'ê°€ì¥ ì‰¬ìš´ ê³¼ì œ 1ê°œ ì™„ë£Œ â†’ ì„±ì·¨ê° íšë“ â†’ ë‹¤ìŒ ê³¼ì œ ì§„í–‰'"
      - "adjust_routine: 'homework_priority_adjustment'"
    confidence: 0.80
    rationale: "S5: ê³¼ì œ ê³¼ë‹¤ â†’ ì´íƒˆ ì¦ê°€ â†’ ìš°ì„ ìˆœìœ„ ì¡°ì • í•„ìš”"
  
  # ========== S6: ìˆ˜í•™ ì„±ì  ìˆ˜ì¤€ë³„ ì´íƒˆ ì›ì¸ ì°¨ë³„í™” ë£° ==========
  
  - rule_id: "S6_R1_low_level_dropout_intervention"
    priority: 81
    description: "í•˜ìœ„ê¶Œ í•™ìƒ ì´íƒˆ ì›ì¸ ë¶„ì„ ë° ëŒ€ì‘ (ë„ˆë¬´ ì–´ë ¤ì›Œì„œ í¬ê¸°)"
    conditions:
      - field: "math_level"
        operator: "=="
        value: "í•˜ìœ„ê¶Œ"
      - field: "risk_tier"
        operator: "in"
        value: ["Medium", "High"]
    action:
      - "analyze: 'low_level_dropout_cause'"
      - "identify_dropout_patterns: 'too_difficult_dropout'"
      - "generate_description: 'low_level_dropout_analysis'"
      - "display_message: 'í•˜ìœ„ê¶Œ í•™ìƒì˜ ì´íƒˆì€ ëŒ€ë¶€ë¶„ ë‚œì´ë„ê°€ ë„ˆë¬´ ë†’ì•„ì„œì…ë‹ˆë‹¤. ì‰¬ìš´ ë¬¸ì œë¶€í„° ì°¨ê·¼ì°¨ê·¼ í’€ì–´ë³´ì„¸ìš”.'"
      - "suggest_easy_win: 'start_with_easiest_problems'"
      - "recommend_path: 'ê°€ì¥ ì‰¬ìš´ ê¸°ë³¸í˜• ë¬¸ì œ 1ê°œ ì™„ë£Œ â†’ ì„±ì·¨ê° â†’ ë‹¤ìŒ ë¬¸ì œ'"
      - "adjust_routine: 'low_level_focused_session'"
    confidence: 0.79
    rationale: "S6: í•˜ìœ„ê¶Œ â†’ ë„ˆë¬´ ì–´ë ¤ì›Œì„œ í¬ê¸° â†’ ì‰¬ìš´ ë¬¸ì œë¶€í„°"
  
  - rule_id: "S6_R2_mid_level_dropout_intervention"
    priority: 80
    description: "ì¤‘ìœ„ê¶Œ í•™ìƒ ì´íƒˆ ì›ì¸ ë¶„ì„ ë° ëŒ€ì‘ (ì§‘ì¤‘ë ¥ ë¶€ì¡±)"
    conditions:
      - field: "math_level"
        operator: "=="
        value: "ì¤‘ìœ„ê¶Œ"
      - field: "risk_tier"
        operator: "in"
        value: ["Medium", "High"]
    action:
      - "analyze: 'mid_level_dropout_cause'"
      - "identify_dropout_patterns: 'concentration_lack_dropout'"
      - "generate_description: 'mid_level_dropout_analysis'"
      - "display_message: 'ì¤‘ìœ„ê¶Œ í•™ìƒì˜ ì´íƒˆì€ ì§‘ì¤‘ë ¥ ë¶€ì¡±ì´ ì£¼ëœ ì›ì¸ì…ë‹ˆë‹¤. ë£¨í‹´ì„ ê°•í™”í•˜ì—¬ ì§‘ì¤‘ë ¥ì„ ìœ ì§€í•˜ì„¸ìš”.'"
      - "suggest_easy_win: 'routine_strengthening_task'"
      - "recommend_path: '10ë¶„ ì„¸ì…˜ ì™„ë£Œ â†’ 1ë¶„ íœ´ì‹ â†’ ë‹¤ìŒ ì„¸ì…˜'"
      - "adjust_routine: 'mid_level_routine_focus'"
    confidence: 0.78
    rationale: "S6: ì¤‘ìœ„ê¶Œ â†’ ì§‘ì¤‘ë ¥ ë¶€ì¡± â†’ ë£¨í‹´ ê°•í™”"
  
  - rule_id: "S6_R3_high_level_dropout_intervention"
    priority: 79
    description: "ìƒìœ„ê¶Œ í•™ìƒ ì´íƒˆ ì›ì¸ ë¶„ì„ ë° ëŒ€ì‘ (ê¶Œíƒœë¡œì›€)"
    conditions:
      - field: "math_level"
        operator: "=="
        value: "ìƒìœ„ê¶Œ"
      - field: "risk_tier"
        operator: "in"
        value: ["Medium", "High"]
    action:
      - "analyze: 'high_level_dropout_cause'"
      - "identify_dropout_patterns: 'boredom_dropout'"
      - "generate_description: 'high_level_dropout_analysis'"
      - "display_message: 'ìƒìœ„ê¶Œ í•™ìƒì˜ ì´íƒˆì€ ê¶Œíƒœë¡œì›€ì´ ì£¼ëœ ì›ì¸ì…ë‹ˆë‹¤. ë„ì „í•  ë§Œí•œ ê³¼ì œë¥¼ ì œì‹œí•˜ì—¬ ë™ê¸°ë¥¼ ìœ ì§€í•˜ì„¸ìš”.'"
      - "suggest_easy_win: 'challenging_task_presentation'"
      - "recommend_path: 'ì°½ì˜ ë¬¸ì œ/ë³€í˜• ë¬¸ì œ ë„ì „ â†’ í¥ë¯¸ ìœ ë°œ â†’ ì¬ì§„ì…'"
      - "adjust_routine: 'high_level_challenge_focus'"
    confidence: 0.77
    rationale: "S6: ìƒìœ„ê¶Œ â†’ ê¶Œíƒœë¡œì›€ â†’ ë„ì „ ê³¼ì œ ì œì‹œ"
  
  # ========== S7: ìˆ˜í•™ í•™ìŠµ ìŠ¤íƒ€ì¼ë³„ ì´íƒˆ íŒ¨í„´ ë¶„ì„ ë£° ==========
  
  - rule_id: "S7_R1_learning_style_dropout_analysis"
    priority: 78
    description: "í•™ìŠµ ìŠ¤íƒ€ì¼ë³„ ì´íƒˆ ë¹ˆë„ ë†’ì€ í™œë™ íŒŒì•… ë° ì „í™˜ ì œì•ˆ"
    conditions:
      - field: "math_learning_style"
        operator: "!="
        value: null
      - field: "ninactive"
        operator: ">="
        value: 2
    action:
      - "analyze: 'learning_style_dropout_pattern'"
      - "identify_dropout_patterns: 'style_mismatch_dropout'"
      - "generate_description: 'learning_style_dropout_analysis'"
      - "load_db: 'learning_style_activities.yaml'"  # ìŠ¤íƒ€ì¼ë³„ ì í•© í™œë™ DB
      - "suggest_easy_win: 'style_matched_activity'"
      - "display_message: '{math_learning_style} í•™ìŠµ ìŠ¤íƒ€ì¼ì— ë§ëŠ” í™œë™ìœ¼ë¡œ ì „í™˜í•˜ì—¬ ì´íƒˆì„ ë°©ì§€í•©ë‹ˆë‹¤.'"
      - "adjust_routine: 'style_based_activity_switch'"
    confidence: 0.76
    rationale: "S7: í•™ìŠµ ìŠ¤íƒ€ì¼ê³¼ ë§ì§€ ì•ŠëŠ” í™œë™ì—ì„œ ì´íƒˆ ì¦ê°€ â†’ ìŠ¤íƒ€ì¼ ë§ëŠ” í™œë™ìœ¼ë¡œ ì „í™˜"
  
  # ========== S8: ê¸°ë³¸ ì´íƒˆ íƒì§€ ë° ê°œì… ë£° (ê¸°ì¡´ ë¡œì§ ê°•í™”) ==========
  
  - rule_id: "S8_R1_basic_dropout_detection"
    priority: 75
    description: "ê¸°ë³¸ ì´íƒˆ ìœ„í—˜ë„ íƒì§€ (ê¸°ì¡´ ë¡œì§)"
    conditions:
      - OR:
        - field: "ninactive"
          operator: ">="
          value: 4
        - field: "npomodoro"
          operator: "<"
          value: 2
        - field: "tlaststroke_min"
          operator: ">="
          value: 30
    action:
      - "detect_dropout_risk: true"
      - "calculate_risk_tier: 'High'"
      - "identify_dropout_patterns: 'basic_high_risk'"
      - "display_message: 'ì´íƒˆ ìœ„í—˜ì´ ë†’ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê°œì…ì´ í•„ìš”í•©ë‹ˆë‹¤.'"
      - "send_refocus_message: 'urgent_refocus'"
      - "suggest_easy_win: 'immediate_easy_task'"
    confidence: 0.90
    rationale: "S8: ê¸°ë³¸ ì´íƒˆ íƒì§€ ë¡œì§ (High ë“±ê¸‰)"
  
  - rule_id: "S8_R2_medium_risk_intervention"
    priority: 74
    description: "ì¤‘ê°„ ìœ„í—˜ë„ ê°œì…"
    conditions:
      - field: "risk_tier"
        operator: "=="
        value: "Medium"
    action:
      - "detect_dropout_risk: true"
      - "calculate_risk_tier: 'Medium'"
      - "send_refocus_message: 'gentle_refocus'"
      - "suggest_easy_win: 'gentle_easy_task'"
      - "display_message: 'ì´íƒˆ ì¡°ì§ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì§§ì€ ë¦¬í¬ì»¤ìŠ¤ í›„ ì‰¬ìš´ ê³¼ì œë¶€í„° ì‹œì‘í•˜ì„¸ìš”.'"
    confidence: 0.85
    rationale: "S8: ì¤‘ê°„ ìœ„í—˜ë„ ê°œì…"
  
  - rule_id: "S8_R3_routine_adjustment"
    priority: 73
    description: "ë£¨í‹´ ë³´ì • (ì„¸ì…˜ ê¸¸ì´, íœ´ì‹ ì£¼ê¸° ì¡°ì •)"
    conditions:
      - field: "risk_tier"
        operator: "in"
        value: ["Medium", "High"]
      - field: "npomodoro"
        operator: "<"
        value: 5
    action:
      - "adjust_routine: 'session_length_reduction'"
      - "adjust_routine: 'rest_interval_adjustment'"
      - "display_message: 'ì„¸ì…˜ ê¸¸ì´ë¥¼ 15ë¶„ì—ì„œ 10ë¶„ìœ¼ë¡œ ì¤„ì´ê³ , íœ´ì‹ ì£¼ê¸°ë¥¼ 50ë¶„ì—ì„œ 40ë¶„ìœ¼ë¡œ ì¡°ì •í•©ë‹ˆë‹¤.'"
      - "generate_description: 'routine_adjustment_strategy'"
    confidence: 0.80
    rationale: "S8: í¬ëª¨ë„ë¡œ ë¶€ì¡± ì‹œ ë£¨í‹´ ë³´ì •"
  
  - rule_id: "S8_R4_escalation_intervention"
    priority: 72
    description: "High ë“±ê¸‰ ì—°ì† ë°œìƒ ì‹œ ì—ìŠ¤ì»¬ë ˆì´ì…˜"
    conditions:
      - field: "risk_tier"
        operator: "=="
        value: "High"
      - field: "consecutive_high_days"
        operator: ">="
        value: 2
    action:
      - "notify_parents: 'high_risk_escalation'"
      - "notify_teacher: 'high_risk_escalation'"
      - "display_message: 'High ë“±ê¸‰ì´ 2ì¼ ì—°ì† ë°œìƒí•˜ì—¬ ë³´í˜¸ì ë° ë‹´ì„ ì„ ìƒë‹˜ê»˜ ì•Œë¦¼ì„ ì „ì†¡í•©ë‹ˆë‹¤.'"
      - "generate_description: 'escalation_report'"
    confidence: 0.75
    rationale: "S8: ì§€ì†ì  High ë“±ê¸‰ ì‹œ ì—ìŠ¤ì»¬ë ˆì´ì…˜ (ìš´ì˜ì •ì±… ì¤€ìˆ˜)"

  # ========== S9: ì´íƒˆ ì›ì¸ íƒì§€ ë£° (í˜¼í•©í˜• í˜ë¥´ì†Œë‚˜ìš©) ==========
  #
  # ì´íƒˆ ì›ì¸ ë¶„ë¥˜:
  #   M (Motivation/ë™ê¸°ì €í•˜): í•™ìŠµ ì˜ìš• ê°ì†Œ, ê°ì •ì  ì €í•­
  #   R (Routine/ë£¨í‹´ë¶•ê´´): í•™ìŠµ ìŠµê´€ ë¶•ê´´, ë¶ˆê·œì¹™í•œ íŒ¨í„´
  #   S (Start barrier/ì‹œì‘ì¥ë²½): ì‹œì‘ ìì²´ê°€ ì–´ë ¤ì›€, íšŒí”¼ í–‰ë™
  #   E (External/ì™¸ë¶€ìš”ì¸): ì™¸ë¶€ í™˜ê²½ ìš”ì¸, ì‹œê°„ ì œì•½
  #
  # ì´ ê·œì¹™ë“¤ì€ risk_tierì™€ ê²°í•©í•˜ì—¬ í˜¼í•©í˜• persona_idë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
  # ì˜ˆ: risk_tier=Medium + dropout_cause=M â†’ persona_id=M_M
  #

  - rule_id: "S9_R1_motivation_cause_detection"
    priority: 70
    description: "ë™ê¸°ì €í•˜(M) ì›ì¸ íƒì§€ - ê°ì • í‚¤ì›Œë“œ, í¬ëª¨ë„ë¡œ ê°ì†Œ"
    conditions:
      - OR:
        - field: "message"
          operator: "contains_any"
          value: ["ì‹«ì–´ìš”", "í•˜ê¸° ì‹«ì–´", "ì¬ë¯¸ì—†ì–´", "ì§€ë£¨í•´", "ì™œ í•´ì•¼", "ì˜ë¯¸ ì—†ì–´", "í¬ê¸°"]
        - AND:
          - field: "npomodoro_trend"
            operator: "<"
            value: -30
          - field: "emotion_score"
            operator: "<"
            value: 30
        - AND:
          - field: "npomodoro"
            operator: "<"
            value: 2
          - field: "ninactive"
            operator: ">="
            value: 3
    action:
      - "set_dropout_cause: 'M'"
      - "add_flag: 'motivation_decline'"
      - "analyze: 'motivation_dropout_pattern'"
      - "generate_description: 'ë™ê¸°ì €í•˜í˜• ì´íƒˆ ì›ì¸ì´ íƒì§€ë˜ì—ˆìŠµë‹ˆë‹¤. í•™ìŠµ ì˜ìš• íšŒë³µì´ í•„ìš”í•©ë‹ˆë‹¤.'"
    confidence: 0.88
    rationale: "S9: ê°ì • í‚¤ì›Œë“œì™€ í¬ëª¨ë„ë¡œ ê°ì†Œ íŒ¨í„´ìœ¼ë¡œ ë™ê¸°ì €í•˜ ì›ì¸ ì‹ë³„"

  - rule_id: "S9_R2_routine_cause_detection"
    priority: 69
    description: "ë£¨í‹´ë¶•ê´´(R) ì›ì¸ íƒì§€ - ê²Œìœ¼ë¦„ ë¸”ë¡, ë¶ˆê·œì¹™ ì‹œê°„"
    conditions:
      - OR:
        - field: "nlazy_blocks"
          operator: ">="
          value: 3
        - AND:
          - field: "session_time_variance"
            operator: ">"
            value: 60
          - field: "ninactive"
            operator: ">="
            value: 2
        - AND:
          - field: "routine_break_count"
            operator: ">="
            value: 2
          - field: "last_routine_days_ago"
            operator: ">="
            value: 3
    action:
      - "set_dropout_cause: 'R'"
      - "add_flag: 'routine_collapse'"
      - "analyze: 'routine_dropout_pattern'"
      - "generate_description: 'ë£¨í‹´ë¶•ê´´í˜• ì´íƒˆ ì›ì¸ì´ íƒì§€ë˜ì—ˆìŠµë‹ˆë‹¤. í•™ìŠµ ë£¨í‹´ ì¬ê±´ì´ í•„ìš”í•©ë‹ˆë‹¤.'"
    confidence: 0.86
    rationale: "S9: ê²Œìœ¼ë¦„ ë¸”ë¡ê³¼ ë¶ˆê·œì¹™ í•™ìŠµ ì‹œê°„ íŒ¨í„´ìœ¼ë¡œ ë£¨í‹´ë¶•ê´´ ì›ì¸ ì‹ë³„"

  - rule_id: "S9_R3_start_barrier_cause_detection"
    priority: 68
    description: "ì‹œì‘ì¥ë²½(S) ì›ì¸ íƒì§€ - ë¡œê·¸ì¸ í›„ ë¬´í™œë™, ë†’ì€ ì‹œì‘ ì§€ì—°"
    conditions:
      - OR:
        - AND:
          - field: "tlaststroke_min"
            operator: ">="
            value: 15
          - field: "is_session_start"
            operator: "=="
            value: true
        - AND:
          - field: "login_without_activity_count"
            operator: ">="
            value: 2
          - field: "avg_start_delay_min"
            operator: ">="
            value: 10
        - AND:
          - field: "first_stroke_delay_min"
            operator: ">="
            value: 20
          - field: "ninactive"
            operator: ">="
            value: 1
    action:
      - "set_dropout_cause: 'S'"
      - "add_flag: 'start_barrier'"
      - "analyze: 'start_barrier_dropout_pattern'"
      - "generate_description: 'ì‹œì‘ì¥ë²½í˜• ì´íƒˆ ì›ì¸ì´ íƒì§€ë˜ì—ˆìŠµë‹ˆë‹¤. í•™ìŠµ ì‹œì‘ ì´‰ì§„ì´ í•„ìš”í•©ë‹ˆë‹¤.'"
    confidence: 0.85
    rationale: "S9: ë¡œê·¸ì¸ í›„ ë¬´í™œë™ê³¼ ì‹œì‘ ì§€ì—° íŒ¨í„´ìœ¼ë¡œ ì‹œì‘ì¥ë²½ ì›ì¸ ì‹ë³„"

  - rule_id: "S9_R4_external_cause_detection"
    priority: 67
    description: "ì™¸ë¶€ìš”ì¸(E) ì›ì¸ íƒì§€ - ì‹¬ì•¼ í•™ìŠµ, í•™ì› ë¶€ë‹´, ì™¸ë¶€ ì¼ì •"
    conditions:
      - OR:
        - AND:
          - field: "session_hour"
            operator: ">="
            value: 23
          - field: "ninactive"
            operator: ">="
            value: 1
        - AND:
          - field: "academy_homework_burden"
            operator: "=="
            value: "ë„ˆë¬´ ë§ìŒ"
          - field: "risk_tier"
            operator: "in"
            value: ["Medium", "High"]
        - AND:
          - field: "external_schedule_conflict"
            operator: "=="
            value: true
          - field: "ninactive"
            operator: ">="
            value: 2
        - field: "message"
          operator: "contains_any"
          value: ["í•™ì›", "ì‹œí—˜", "ë°”ë¹ ì„œ", "ì‹œê°„ì´ ì—†", "í”¼ê³¤í•´", "ì ì´"]
    action:
      - "set_dropout_cause: 'E'"
      - "add_flag: 'external_factor'"
      - "analyze: 'external_dropout_pattern'"
      - "generate_description: 'ì™¸ë¶€ìš”ì¸í˜• ì´íƒˆ ì›ì¸ì´ íƒì§€ë˜ì—ˆìŠµë‹ˆë‹¤. í™˜ê²½ ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.'"
    confidence: 0.83
    rationale: "S9: ì‹¬ì•¼ í•™ìŠµ, í•™ì› ë¶€ë‹´, ì™¸ë¶€ ì¼ì • ì¶©ëŒë¡œ ì™¸ë¶€ìš”ì¸ ì›ì¸ ì‹ë³„"

  - rule_id: "S9_R5_hybrid_persona_identification"
    priority: 66
    description: "í˜¼í•©í˜• í˜ë¥´ì†Œë‚˜ ID ìƒì„± (risk_tier + dropout_cause)"
    conditions:
      - field: "risk_tier"
        operator: "!="
        value: null
      - field: "dropout_cause"
        operator: "!="
        value: null
    action:
      - "identify_hybrid_persona: '{risk_tier_code}_{dropout_cause}'"
      - "load_persona_template: 'hybrid_persona_{risk_tier}_{dropout_cause}'"
      - "generate_description: 'í˜¼í•©í˜• í˜ë¥´ì†Œë‚˜ê°€ ì‹ë³„ë˜ì—ˆìŠµë‹ˆë‹¤: {risk_tier} + {dropout_cause}'"
    confidence: 0.90
    rationale: "S9: risk_tierì™€ dropout_causeë¥¼ ê²°í•©í•˜ì—¬ 12ê°œ í˜¼í•©í˜• í˜ë¥´ì†Œë‚˜ ì¤‘ í•˜ë‚˜ ì‹ë³„"

  - rule_id: "S9_R6_cause_priority_resolution"
    priority: 65
    description: "ë³µìˆ˜ ì›ì¸ íƒì§€ ì‹œ ìš°ì„ ìˆœìœ„ ê²°ì •"
    conditions:
      - field: "detected_causes_count"
        operator: ">="
        value: 2
    action:
      - "resolve_cause_priority: 'M > S > R > E'"
      - "set_primary_cause: '{highest_priority_cause}'"
      - "add_flag: 'multi_cause_detected'"
      - "generate_description: 'ë³µìˆ˜ ì´íƒˆ ì›ì¸ì´ íƒì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ìš°ì„ ìˆœìœ„: M > S > R > E'"
    confidence: 0.80
    rationale: "S9: ë³µìˆ˜ ì›ì¸ íƒì§€ ì‹œ ë™ê¸°ì €í•˜(M)ê°€ ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„"

  # ========== S10: í˜¼í•©í˜• í˜ë¥´ì†Œë‚˜ë³„ ë§ì¶¤ ê°œì… ë£° ==========
  #
  # ê° í˜ë¥´ì†Œë‚˜(12ê°œ)ë³„ ë§ì¶¤í˜• ê°œì… ì „ëµì„ ì •ì˜í•©ë‹ˆë‹¤.
  # L_* (Low): ì˜ˆë°©ì  ê°œì…, ê°€ë²¼ìš´ ë¦¬ë§ˆì¸ë”
  # M_* (Medium): ì ê·¹ì  ê°œì…, êµ¬ì²´ì  ê°€ì´ë“œ
  # H_* (High): ê¸´ê¸‰ ê°œì…, ê°•ë ¥í•œ ì§€ì›
  #

  - rule_id: "S10_R1_low_motivation_intervention"
    priority: 64
    description: "L_M (ì €ìœ„í—˜-ë™ê¸°ì €í•˜) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "L_M"
    action:
      - "set_tone: 'Encouraging'"
      - "set_pace: 'Gentle'"
      - "suggest_easy_win: 'fun_micro_challenge'"
      - "display_message: 'ì˜¤ëŠ˜ ê¸°ë¶„ì´ ë³„ë¡œì¸ ê²ƒ ê°™ë„¤ìš”. ì¬ë¯¸ìˆëŠ” í€´ì¦ˆ í•˜ë‚˜ í’€ì–´ë³¼ê¹Œìš”? ğŸ¯'"
      - "prioritize_intervention: 'Preventive'"
    confidence: 0.85
    rationale: "S10: L_M - ì˜ˆë°©ì  ê°œì…, ì¬ë¯¸ ìš”ì†Œë¡œ ë™ê¸° ìê·¹"

  - rule_id: "S10_R2_low_routine_intervention"
    priority: 64
    description: "L_R (ì €ìœ„í—˜-ë£¨í‹´ë¶•ê´´) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "L_R"
    action:
      - "set_tone: 'Supportive'"
      - "set_pace: 'Steady'"
      - "suggest_easy_win: 'routine_reminder'"
      - "display_message: 'ì˜¤ëŠ˜ í•™ìŠµ ì‹œê°„ì´ ì¢€ ë¶ˆê·œì¹™í–ˆë„¤ìš”. ë‚´ì¼ì€ ê°™ì€ ì‹œê°„ì— ì‹œì‘í•´ë³¼ê¹Œìš”? â°'"
      - "prioritize_intervention: 'Preventive'"
    confidence: 0.85
    rationale: "S10: L_R - ì˜ˆë°©ì  ê°œì…, ë£¨í‹´ ë¦¬ë§ˆì¸ë”"

  - rule_id: "S10_R3_low_start_barrier_intervention"
    priority: 64
    description: "L_S (ì €ìœ„í—˜-ì‹œì‘ì¥ë²½) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "L_S"
    action:
      - "set_tone: 'Warm'"
      - "set_pace: 'Quick'"
      - "suggest_easy_win: 'ultra_easy_start'"
      - "display_message: 'ì‹œì‘ì´ ì¡°ê¸ˆ ì–´ë ¤ì› ë‚˜ìš”? ë”± 1ë¬¸ì œë§Œ í’€ì–´ë³´ë©´ ì–´ë–¨ê¹Œìš”? ğŸš€'"
      - "prioritize_intervention: 'Preventive'"
    confidence: 0.85
    rationale: "S10: L_S - ì˜ˆë°©ì  ê°œì…, ì´ˆê°„ë‹¨ ì‹œì‘ ì œì•ˆ"

  - rule_id: "S10_R4_low_external_intervention"
    priority: 64
    description: "L_E (ì €ìœ„í—˜-ì™¸ë¶€ìš”ì¸) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "L_E"
    action:
      - "set_tone: 'Understanding'"
      - "set_pace: 'Flexible'"
      - "suggest_easy_win: 'time_adjusted_task'"
      - "display_message: 'ë°”ìœ í•˜ë£¨ì˜€ë‚˜ ë³´ë„¤ìš”. ì˜¤ëŠ˜ì€ ì§§ê²Œ 10ë¶„ë§Œ í•´ë³¼ê¹Œìš”? ğŸ“š'"
      - "prioritize_intervention: 'Preventive'"
    confidence: 0.85
    rationale: "S10: L_E - ì˜ˆë°©ì  ê°œì…, ìœ ì—°í•œ ì‹œê°„ ì¡°ì •"

  - rule_id: "S10_R5_medium_motivation_intervention"
    priority: 63
    description: "M_M (ì¤‘ìœ„í—˜-ë™ê¸°ì €í•˜) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "M_M"
    action:
      - "set_tone: 'Empathetic'"
      - "set_pace: 'Moderate'"
      - "suggest_easy_win: 'achievement_reminder'"
      - "display_message: 'í•™ìŠµì´ í˜ë“¤ê²Œ ëŠê»´ì§€ë‚˜ìš”? ì§€ë‚œì£¼ ì˜ í’€ì—ˆë˜ ë¬¸ì œ ìœ í˜•ë¶€í„° ë‹¤ì‹œ ì‹œì‘í•´ë³¼ê¹Œìš”? ğŸ’ª'"
      - "prioritize_intervention: 'Active'"
      - "request_agent_collaboration: 'Agent05'"
    confidence: 0.83
    rationale: "S10: M_M - ì ê·¹ì  ê°œì…, ì„±ì·¨ê° ìê·¹, Agent05 ì—°ê³„"

  - rule_id: "S10_R6_medium_routine_intervention"
    priority: 63
    description: "M_R (ì¤‘ìœ„í—˜-ë£¨í‹´ë¶•ê´´) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "M_R"
    action:
      - "set_tone: 'Structured'"
      - "set_pace: 'Guided'"
      - "suggest_easy_win: 'mini_routine_rebuild'"
      - "display_message: 'í•™ìŠµ íŒ¨í„´ì´ ííŠ¸ëŸ¬ì§„ ê²ƒ ê°™ì•„ìš”. ì˜¤ëŠ˜ë¶€í„° 3ì¼ê°„ ì§§ì€ ë¯¸ë‹ˆ ë£¨í‹´ìœ¼ë¡œ ì¬ê±´í•´ë³¼ê¹Œìš”? ğŸ“‹'"
      - "prioritize_intervention: 'Active'"
      - "request_agent_collaboration: 'Agent12'"
    confidence: 0.83
    rationale: "S10: M_R - ì ê·¹ì  ê°œì…, ë¯¸ë‹ˆ ë£¨í‹´ ì¬ê±´, Agent12 ì—°ê³„"

  - rule_id: "S10_R7_medium_start_barrier_intervention"
    priority: 63
    description: "M_S (ì¤‘ìœ„í—˜-ì‹œì‘ì¥ë²½) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "M_S"
    action:
      - "set_tone: 'Encouraging'"
      - "set_pace: 'Step-by-step'"
      - "suggest_easy_win: 'guided_start_sequence'"
      - "display_message: 'ì‹œì‘í•˜ê¸°ê°€ ë§ì´ ì–´ë µë‚˜ìš”? ì œê°€ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•´ë“œë¦´ê²Œìš”. ë¨¼ì € ì±…ìƒ ì •ë¦¬ë¶€í„°! ğŸ“–'"
      - "prioritize_intervention: 'Active'"
    confidence: 0.83
    rationale: "S10: M_S - ì ê·¹ì  ê°œì…, ë‹¨ê³„ë³„ ì‹œì‘ ê°€ì´ë“œ"

  - rule_id: "S10_R8_medium_external_intervention"
    priority: 63
    description: "M_E (ì¤‘ìœ„í—˜-ì™¸ë¶€ìš”ì¸) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "M_E"
    action:
      - "set_tone: 'Practical'"
      - "set_pace: 'Adaptive'"
      - "suggest_easy_win: 'schedule_optimization'"
      - "display_message: 'ì™¸ë¶€ ì¼ì •ì´ ë§ì€ ê²ƒ ê°™ì•„ìš”. í•™ìŠµ ì‹œê°„ì„ ì¡°ì •í•´ì„œ í˜„ì‹¤ì ì¸ ê³„íšì„ ì„¸ì›Œë³¼ê¹Œìš”? ğŸ—“ï¸'"
      - "prioritize_intervention: 'Active'"
    confidence: 0.83
    rationale: "S10: M_E - ì ê·¹ì  ê°œì…, ì¼ì • ìµœì í™”"

  - rule_id: "S10_R9_high_motivation_intervention"
    priority: 62
    description: "H_M (ê³ ìœ„í—˜-ë™ê¸°ì €í•˜) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "H_M"
    action:
      - "set_tone: 'Caring'"
      - "set_pace: 'Patient'"
      - "suggest_easy_win: 'emotional_reset'"
      - "display_message: 'ë§ì´ ì§€ì³¤ë‚˜ìš”? ì˜¤ëŠ˜ì€ í•™ìŠµë³´ë‹¤ ì ì‹œ ì‰¬ì–´ê°€ë„ ê´œì°®ì•„ìš”. ë‚´ì¼ ë‹¤ì‹œ ì‹œì‘í•´ë³¼ê¹Œìš”? ğŸŒ™'"
      - "prioritize_intervention: 'Urgent'"
      - "request_agent_collaboration: 'Agent05'"
      - "set_risk_level: 'High'"
    confidence: 0.90
    rationale: "S10: H_M - ê¸´ê¸‰ ê°œì…, ì •ì„œì  íšŒë³µ ìš°ì„ , Agent05 ê¸´ê¸‰ ì—°ê³„"

  - rule_id: "S10_R10_high_routine_intervention"
    priority: 62
    description: "H_R (ê³ ìœ„í—˜-ë£¨í‹´ë¶•ê´´) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "H_R"
    action:
      - "set_tone: 'Supportive'"
      - "set_pace: 'Minimal'"
      - "suggest_easy_win: 'routine_emergency_reset'"
      - "display_message: 'ë£¨í‹´ì´ ë§ì´ ííŠ¸ëŸ¬ì¡Œë„¤ìš”. ì˜¤ëŠ˜ì€ ë”± 5ë¶„ë§Œ! ì‘ì€ ì„±ê³µë¶€í„° ìŒ“ì•„ê°€ìš”. ğŸ”„'"
      - "prioritize_intervention: 'Urgent'"
      - "request_agent_collaboration: 'Agent12'"
      - "set_risk_level: 'High'"
    confidence: 0.90
    rationale: "S10: H_R - ê¸´ê¸‰ ê°œì…, ìµœì†Œ ë£¨í‹´ ê¸´ê¸‰ ë³µêµ¬, Agent12 ê¸´ê¸‰ ì—°ê³„"

  - rule_id: "S10_R11_high_start_barrier_intervention"
    priority: 62
    description: "H_S (ê³ ìœ„í—˜-ì‹œì‘ì¥ë²½) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "H_S"
    action:
      - "set_tone: 'Gentle'"
      - "set_pace: 'Micro'"
      - "suggest_easy_win: 'zero_barrier_start'"
      - "display_message: 'ì‹œì‘ì´ ì •ë§ ì–´ë µì£ ? ì˜¤ëŠ˜ì€ ë¡œê·¸ì¸í•œ ê²ƒë§Œìœ¼ë¡œë„ ëŒ€ë‹¨í•´ìš”! ë”± 1ë¬¸ì œë§Œ ë³¼ê¹Œìš”? âœ¨'"
      - "prioritize_intervention: 'Urgent'"
      - "set_risk_level: 'High'"
    confidence: 0.90
    rationale: "S10: H_S - ê¸´ê¸‰ ê°œì…, ì œë¡œ ì¥ë²½ ì‹œì‘"

  - rule_id: "S10_R12_high_external_intervention"
    priority: 62
    description: "H_E (ê³ ìœ„í—˜-ì™¸ë¶€ìš”ì¸) ë§ì¶¤ ê°œì…"
    conditions:
      - field: "hybrid_persona_id"
        operator: "=="
        value: "H_E"
    action:
      - "set_tone: 'Understanding'"
      - "set_pace: 'Flexible'"
      - "suggest_easy_win: 'minimal_maintenance'"
      - "display_message: 'ì§€ê¸ˆì€ ì™¸ë¶€ ìƒí™©ì´ ë§ì´ ì–´ë ¤ìš´ ê²ƒ ê°™ì•„ìš”. ìµœì†Œí•œë§Œ ìœ ì§€í•˜ë©´ì„œ ìƒí™©ì´ ë‚˜ì•„ì§€ê¸¸ ê¸°ë‹¤ë ¤ë´ìš”. ğŸ¤—'"
      - "prioritize_intervention: 'Urgent'"
      - "notify_teacher: 'external_factor_alert'"
      - "set_risk_level: 'High'"
    confidence: 0.90
    rationale: "S10: H_E - ê¸´ê¸‰ ê°œì…, ìµœì†Œ ìœ ì§€ ëª¨ë“œ, êµì‚¬ ì•Œë¦¼"

  - rule_id: "S10_R13_critical_escalation"
    priority: 61
    description: "Critical (ìœ„ê¸°) ì—ìŠ¤ì»¬ë ˆì´ì…˜ - High 2ì¼ ì—°ì†"
    conditions:
      - field: "risk_tier"
        operator: "=="
        value: "High"
      - field: "consecutive_high_days"
        operator: ">="
        value: 2
    action:
      - "set_risk_level: 'Critical'"
      - "identify_persona: 'Critical'"
      - "notify_parents: 'critical_risk_alert'"
      - "notify_teacher: 'critical_risk_alert'"
      - "display_message: 'âš ï¸ í•™ìŠµ ì´íƒˆ ìœ„í—˜ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ë³´í˜¸ìë‹˜ê³¼ ì„ ìƒë‹˜ê»˜ ì•Œë¦¼ì„ ì „ì†¡í–ˆìŠµë‹ˆë‹¤.'"
      - "prioritize_intervention: 'Emergency'"
      - "schedule_followup: '24h'"
    confidence: 0.95
    rationale: "S10: Critical - High 2ì¼ ì—°ì† ì‹œ ë³´í˜¸ì/êµì‚¬ ê¸´ê¸‰ ì•Œë¦¼"

default_rule:
  rule_id: "default_dropout_monitoring"
  action:
    - "detect_dropout_risk: true"
    - "calculate_risk_tier: 'Low'"
    - "set_dropout_cause: null"
    - "display_message: 'í•™ìŠµ ì´íƒˆ ìœ„í—˜ì„ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.'"
  confidence: 0.5
  rationale: "ê¸°ë³¸ ëª¨ë‹ˆí„°ë§ ë£°"
