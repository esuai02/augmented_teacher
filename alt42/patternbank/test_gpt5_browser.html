<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPT-5 Responses API ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1000px;
            margin: 40px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #1a1a1a;
            margin-bottom: 10px;
            font-size: 2.2em;
            font-weight: 700;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 10px;
        }
        .api-key-input {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        input[type="password"] {
            flex: 1;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s;
        }
        input[type="password"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        .test-section {
            margin: 25px 0;
            padding: 25px;
            border: 2px solid #f5f5f5;
            border-radius: 15px;
            background: #fafafa;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
            font-weight: 600;
        }
        .status {
            display: inline-block;
            padding: 5px 14px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 13px;
            margin-left: 10px;
        }
        .status.pending { background: #e0e0e0; color: #666; }
        .status.testing { background: #fff3cd; color: #856404; }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.fallback { background: #cce5ff; color: #004085; }
        .result {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.8;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
        }
        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #ffeeba;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #bee5eb;
        }
        .model-selector {
            margin-bottom: 20px;
        }
        select {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            margin-left: 10px;
            cursor: pointer;
        }
        code {
            background: #f4f4f4;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            font-family: 'Fira Code', monospace;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .feature-card {
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }
        .feature-card h4 {
            margin: 0 0 10px 0;
            color: #667eea;
            font-size: 14px;
        }
        .feature-card p {
            margin: 0;
            font-size: 13px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ GPT-5 Responses API í…ŒìŠ¤íŠ¸ <span class="badge">NEW</span></h1>
        <p class="subtitle">ìµœì‹  GPT-5 ëª¨ë¸ê³¼ Responses API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸</p>
        
        <div class="info">
            <strong>âœ¨ GPT-5 ìƒˆë¡œìš´ ê¸°ëŠ¥:</strong>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>ì¶”ë¡  ì œì–´</h4>
                    <p>minimal, low, medium, high ì¶”ë¡  ë…¸ë ¥ ì„¤ì •</p>
                </div>
                <div class="feature-card">
                    <h4>í…ìŠ¤íŠ¸ ìƒì„¸ë„</h4>
                    <p>low, medium, high ì¶œë ¥ ìƒì„¸ë„ ì¡°ì ˆ</p>
                </div>
                <div class="feature-card">
                    <h4>êµ¬ì¡°í™”ëœ ì¶œë ¥</h4>
                    <p>JSON Schemaë¡œ ê°•ì œ êµ¬ì¡°í™”</p>
                </div>
                <div class="feature-card">
                    <h4>ì»¤ìŠ¤í…€ ë„êµ¬</h4>
                    <p>ììœ  í˜•ì‹ í…ìŠ¤íŠ¸ ë„êµ¬ í˜¸ì¶œ</p>
                </div>
            </div>
        </div>
        
        <div class="warning">
            âš ï¸ <strong>ìë™ í´ë°±:</strong> GPT-5ê°€ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ê²½ìš° ìë™ìœ¼ë¡œ GPT-4oë¡œ ì „í™˜ë©ë‹ˆë‹¤.
        </div>
        
        <div class="model-selector">
            <label>ëª¨ë¸ ì„ íƒ:
                <select id="modelSelect">
                    <option value="gpt-5-mini" selected>GPT-5-mini (ë¹ ë¦„, ì €ë¹„ìš©)</option>
                    <option value="gpt-5">GPT-5 (ê³ ê¸‰ ì¶”ë¡ )</option>
                    <option value="gpt-5-nano">GPT-5-nano (ì´ˆê³ ì†)</option>
                </select>
            </label>
        </div>
        
        <div class="api-key-input">
            <input type="password" id="apiKey" 
                   placeholder="OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (sk-proj-...)" 
                   value="">
            <button onclick="saveApiKey()">API í‚¤ ì €ì¥</button>
        </div>
        
        <div class="test-section">
            <h3>1. GPT-5 Responses API ì—°ê²° í…ŒìŠ¤íŠ¸ <span id="status1" class="status pending">ëŒ€ê¸°ì¤‘</span></h3>
            <button onclick="testGPT5Connection()" id="testBtn1">GPT-5 ì—°ê²° í…ŒìŠ¤íŠ¸</button>
            <div id="result1" class="result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h3>2. êµ¬ì¡°í™”ëœ ì¶œë ¥ (JSON Schema) í…ŒìŠ¤íŠ¸ <span id="status2" class="status pending">ëŒ€ê¸°ì¤‘</span></h3>
            <button onclick="testStructuredOutput()" id="testBtn2">êµ¬ì¡°í™”ëœ ì¶œë ¥ í…ŒìŠ¤íŠ¸</button>
            <div id="result2" class="result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h3>3. ì¶”ë¡  ì œì–´ í…ŒìŠ¤íŠ¸ <span id="status3" class="status pending">ëŒ€ê¸°ì¤‘</span></h3>
            <button onclick="testReasoningControl()" id="testBtn3">ì¶”ë¡  ì œì–´ í…ŒìŠ¤íŠ¸</button>
            <div id="result3" class="result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h3>4. ìœ ì‚¬ë¬¸ì œ ìƒì„± (PatternBank) <span id="status4" class="status pending">ëŒ€ê¸°ì¤‘</span></h3>
            <button onclick="testProblemGeneration()" id="testBtn4">ë¬¸ì œ ìƒì„± í…ŒìŠ¤íŠ¸</button>
            <div id="result4" class="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        // API í‚¤ ì €ì¥/ë¡œë“œ
        function saveApiKey() {
            const apiKey = document.getElementById('apiKey').value;
            if (apiKey) {
                localStorage.setItem('openai_api_key', apiKey);
                alert('API í‚¤ê°€ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ì €ì¥ëœ API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
        window.onload = function() {
            const savedKey = localStorage.getItem('openai_api_key');
            if (savedKey) {
                document.getElementById('apiKey').value = savedKey;
            }
        };
        
        // 1. GPT-5 Responses API ì—°ê²° í…ŒìŠ¤íŠ¸
        async function testGPT5Connection() {
            const apiKey = document.getElementById('apiKey').value;
            const model = document.getElementById('modelSelect').value;
            
            if (!apiKey) {
                alert('API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const statusEl = document.getElementById('status1');
            const resultEl = document.getElementById('result1');
            const btnEl = document.getElementById('testBtn1');
            
            statusEl.className = 'status testing';
            statusEl.textContent = 'GPT-5 í…ŒìŠ¤íŠ¸ ì¤‘...';
            resultEl.style.display = 'block';
            resultEl.textContent = `${model} ì—°ê²° í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...\n`;
            btnEl.disabled = true;
            
            try {
                // GPT-5 Responses API í˜¸ì¶œ
                const response = await fetch('https://api.openai.com/v1/responses', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: model,
                        input: '1+1ì€ ë¬´ì—‡ì¸ê°€ìš”? í•œ ë‹¨ì–´ë¡œ ë‹µí•´ì£¼ì„¸ìš”.',
                        reasoning: { effort: 'minimal' },
                        text: { 
                            verbosity: 'low'
                        },
                        max_output_tokens: 20  // ìµœëŒ€ ì¶œë ¥ í† í° (ìµœì†Œ 16)
                        // temperature not supported in GPT-5
                    })
                });
                
                const data = await response.json();
                
                if (response.ok && data.output_text) {
                    statusEl.className = 'status success';
                    statusEl.textContent = 'GPT-5 ì„±ê³µ';
                    resultEl.textContent = `âœ… GPT-5 Responses API ì—°ê²° ì„±ê³µ!\n\n`;
                    resultEl.textContent += `ëª¨ë¸: ${model}\n`;
                    resultEl.textContent += `ì‘ë‹µ: ${data.output_text}\n`;
                    
                    if (data.reasoning_text) {
                        resultEl.textContent += `\nì¶”ë¡  ê³¼ì •: ${data.reasoning_text.substring(0, 100)}...\n`;
                    }
                    
                    if (data.usage) {
                        resultEl.textContent += `\ní† í° ì‚¬ìš©ëŸ‰:\n`;
                        resultEl.textContent += `- ì…ë ¥: ${data.usage.input_tokens || 0}\n`;
                        resultEl.textContent += `- ì¶œë ¥: ${data.usage.output_tokens || 0}\n`;
                        resultEl.textContent += `- ì¶”ë¡ : ${data.usage.reasoning_tokens || 0}\n`;
                        resultEl.textContent += `- ì´í•©: ${data.usage.total_tokens || 0}`;
                    }
                } else if (response.status === 404) {
                    // GPT-5ê°€ ì—†ìœ¼ë©´ GPT-4oë¡œ í´ë°± ì‹œë„
                    statusEl.className = 'status fallback';
                    statusEl.textContent = 'GPT-4o í´ë°±';
                    resultEl.textContent = `âš ï¸ GPT-5ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ. GPT-4oë¡œ í´ë°± ì‹œë„...\n\n`;
                    
                    const fallbackResponse = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-4o-mini',
                            messages: [
                                { role: 'user', content: '1+1ì€ ë¬´ì—‡ì¸ê°€ìš”? í•œ ë‹¨ì–´ë¡œ ë‹µí•´ì£¼ì„¸ìš”.' }
                            ],
                            max_tokens: 10
                        })
                    });
                    
                    const fallbackData = await fallbackResponse.json();
                    
                    if (fallbackResponse.ok) {
                        resultEl.textContent += `âœ… GPT-4o í´ë°± ì„±ê³µ!\n`;
                        resultEl.textContent += `ëª¨ë¸: gpt-4o-mini\n`;
                        resultEl.textContent += `ì‘ë‹µ: ${fallbackData.choices[0].message.content}`;
                    } else {
                        resultEl.textContent += `âŒ í´ë°±ë„ ì‹¤íŒ¨: ${fallbackData.error?.message || 'Unknown error'}`;
                    }
                } else {
                    statusEl.className = 'status error';
                    statusEl.textContent = 'ì‹¤íŒ¨';
                    resultEl.textContent = `âŒ API ì˜¤ë¥˜\n\n`;
                    resultEl.textContent += `ìƒíƒœ ì½”ë“œ: ${response.status}\n`;
                    resultEl.textContent += `ì˜¤ë¥˜: ${data.error?.message || JSON.stringify(data)}`;
                }
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'ì˜¤ë¥˜';
                resultEl.textContent = `âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜\n\n${error.message}`;
            } finally {
                btnEl.disabled = false;
            }
        }
        
        // 2. êµ¬ì¡°í™”ëœ ì¶œë ¥ í…ŒìŠ¤íŠ¸
        async function testStructuredOutput() {
            const apiKey = document.getElementById('apiKey').value;
            const model = document.getElementById('modelSelect').value;
            
            if (!apiKey) {
                alert('API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const statusEl = document.getElementById('status2');
            const resultEl = document.getElementById('result2');
            const btnEl = document.getElementById('testBtn2');
            
            statusEl.className = 'status testing';
            statusEl.textContent = 'í…ŒìŠ¤íŠ¸ ì¤‘...';
            resultEl.style.display = 'block';
            resultEl.textContent = 'êµ¬ì¡°í™”ëœ ì¶œë ¥ í…ŒìŠ¤íŠ¸ ì¤‘...\n';
            btnEl.disabled = true;
            
            const schema = {
                type: 'object',
                properties: {
                    question: { type: 'string' },
                    solution: { type: 'string' },
                    difficulty: { type: 'string', enum: ['easy', 'medium', 'hard'] }
                },
                required: ['question', 'solution', 'difficulty'],
                additionalProperties: false
            };
            
            try {
                const response = await fetch('https://api.openai.com/v1/responses', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: model,
                        input: 'ê°„ë‹¨í•œ ìˆ˜í•™ ë¬¸ì œ 1ê°œë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ë‚œì´ë„ëŠ” easy, medium, hard ì¤‘ í•˜ë‚˜ë¡œ í‘œì‹œí•´ì£¼ì„¸ìš”.',
                        reasoning: { effort: 'low' },
                        text: { 
                            verbosity: 'medium',
                            format: {  // formatì€ text ì•ˆì— ìœ„ì¹˜
                                type: 'json_schema',
                                name: 'MathProblem',
                                schema: schema,
                                strict: true
                            }
                        },
                        max_output_tokens: 200
                    })
                });
                
                const data = await response.json();
                
                if (response.ok && data.output_parsed) {
                    statusEl.className = 'status success';
                    statusEl.textContent = 'ì„±ê³µ';
                    resultEl.textContent = `âœ… êµ¬ì¡°í™”ëœ ì¶œë ¥ ì„±ê³µ!\n\n`;
                    resultEl.textContent += `ìƒì„±ëœ ë¬¸ì œ (JSON):\n`;
                    resultEl.textContent += JSON.stringify(data.output_parsed, null, 2);
                } else if (response.status === 404) {
                    statusEl.className = 'status fallback';
                    statusEl.textContent = 'GPT-4o ì‚¬ìš©';
                    resultEl.textContent = `âš ï¸ GPT-5 êµ¬ì¡°í™”ëœ ì¶œë ¥ ì‹¤íŒ¨. GPT-4oëŠ” JSON ëª¨ë“œë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤.`;
                } else {
                    statusEl.className = 'status error';
                    statusEl.textContent = 'ì‹¤íŒ¨';
                    resultEl.textContent = `âŒ êµ¬ì¡°í™”ëœ ì¶œë ¥ ì‹¤íŒ¨\n\n${data.error?.message || JSON.stringify(data)}`;
                }
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'ì˜¤ë¥˜';
                resultEl.textContent = `âŒ ì˜¤ë¥˜ ë°œìƒ\n\n${error.message}`;
            } finally {
                btnEl.disabled = false;
            }
        }
        
        // 3. ì¶”ë¡  ì œì–´ í…ŒìŠ¤íŠ¸
        async function testReasoningControl() {
            const apiKey = document.getElementById('apiKey').value;
            const model = document.getElementById('modelSelect').value;
            
            if (!apiKey) {
                alert('API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const statusEl = document.getElementById('status3');
            const resultEl = document.getElementById('result3');
            const btnEl = document.getElementById('testBtn3');
            
            statusEl.className = 'status testing';
            statusEl.textContent = 'í…ŒìŠ¤íŠ¸ ì¤‘...';
            resultEl.style.display = 'block';
            resultEl.textContent = 'ë‹¤ì–‘í•œ ì¶”ë¡  ìˆ˜ì¤€ í…ŒìŠ¤íŠ¸ ì¤‘...\n\n';
            btnEl.disabled = true;
            
            const levels = ['minimal', 'low', 'medium'];
            const results = [];
            
            for (const level of levels) {
                try {
                    resultEl.textContent += `${level} ì¶”ë¡  í…ŒìŠ¤íŠ¸...\n`;
                    
                    const response = await fetch('https://api.openai.com/v1/responses', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: model,
                            input: 'x^2 - 5x + 6 = 0ì˜ í•´ë¥¼ êµ¬í•˜ì„¸ìš”.',
                            reasoning: { effort: level },
                            text: { 
                                verbosity: 'low'
                            },
                            max_output_tokens: 200  // ìµœëŒ€ ì™„ì„± í† í°
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok && data.output_text) {
                        results.push({
                            level: level,
                            output: data.output_text,
                            reasoning_tokens: data.usage?.reasoning_tokens || 0,
                            total_tokens: data.usage?.total_tokens || 0
                        });
                    }
                } catch (error) {
                    results.push({
                        level: level,
                        error: error.message
                    });
                }
            }
            
            if (results.some(r => r.output)) {
                statusEl.className = 'status success';
                statusEl.textContent = 'ì™„ë£Œ';
                resultEl.textContent = `âœ… ì¶”ë¡  ì œì–´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n\n`;
                
                results.forEach(r => {
                    resultEl.textContent += `â”â”â” ${r.level.toUpperCase()} ì¶”ë¡  â”â”â”\n`;
                    if (r.output) {
                        resultEl.textContent += `ì‘ë‹µ: ${r.output}\n`;
                        resultEl.textContent += `ì¶”ë¡  í† í°: ${r.reasoning_tokens} / ì´ í† í°: ${r.total_tokens}\n\n`;
                    } else {
                        resultEl.textContent += `ì˜¤ë¥˜: ${r.error}\n\n`;
                    }
                });
            } else {
                statusEl.className = 'status error';
                statusEl.textContent = 'ì‹¤íŒ¨';
                resultEl.textContent = `âŒ ëª¨ë“  ì¶”ë¡  ìˆ˜ì¤€ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨`;
            }
            
            btnEl.disabled = false;
        }
        
        // 4. ìœ ì‚¬ë¬¸ì œ ìƒì„± í…ŒìŠ¤íŠ¸
        async function testProblemGeneration() {
            const apiKey = document.getElementById('apiKey').value;
            const model = document.getElementById('modelSelect').value;
            
            if (!apiKey) {
                alert('API í‚¤ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const statusEl = document.getElementById('status4');
            const resultEl = document.getElementById('result4');
            const btnEl = document.getElementById('testBtn4');
            
            statusEl.className = 'status testing';
            statusEl.textContent = 'ìƒì„± ì¤‘...';
            resultEl.style.display = 'block';
            resultEl.textContent = 'PatternBank ìœ ì‚¬ë¬¸ì œ ìƒì„± ì¤‘...\n';
            btnEl.disabled = true;
            
            const prompt = `ë‹¤ìŒ ìˆ˜í•™ ë¬¸ì œë¥¼ ë°”íƒ•ìœ¼ë¡œ ìœ ì‚¬í•œ ë¬¸ì œë¥¼ 1ê°œ ìƒì„±í•´ì£¼ì„¸ìš”.

ì›ë³¸ ë¬¸ì œ:
ë¬¸ì œ: ë‹¤ìŒ ìˆ˜ì—´ì˜ ì¼ë°˜í•­ì„ êµ¬í•˜ì‹œì˜¤: 3, 6, 12, 24, ...
í•´ì„¤: ì²«ì§¸í•­ì´ 3ì´ê³  ê³µë¹„ê°€ 2ì¸ ë“±ë¹„ìˆ˜ì—´ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì¼ë°˜í•­ì€ a_n = 3 Ã— 2^(n-1)ì…ë‹ˆë‹¤.

JSON í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.`;
            
            const schema = {
                type: 'object',
                properties: {
                    question: { type: 'string' },
                    solution: { type: 'string' }
                },
                required: ['question', 'solution'],
                additionalProperties: false
            };
            
            try {
                const response = await fetch('https://api.openai.com/v1/responses', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: model,
                        input: prompt,
                        reasoning: { effort: 'low' },
                        text: { 
                            verbosity: 'medium',
                            format: {  // formatì€ text ì•ˆì— ìœ„ì¹˜
                                type: 'json_schema',
                                name: 'MathProblem',
                                schema: schema,
                                strict: true
                            }
                        },
                        max_output_tokens: 1000  // ìµœëŒ€ ì¶œë ¥ í† í°
                        // temperature not supported in GPT-5
                    })
                });
                
                const data = await response.json();
                
                if (response.ok && (data.output_parsed || data.output_text)) {
                    statusEl.className = 'status success';
                    statusEl.textContent = 'ì„±ê³µ';
                    resultEl.textContent = `âœ… ë¬¸ì œ ìƒì„± ì„±ê³µ!\n\n`;
                    
                    const problem = data.output_parsed || JSON.parse(data.output_text);
                    resultEl.textContent += `ìƒì„±ëœ ë¬¸ì œ:\n`;
                    resultEl.textContent += `ë¬¸ì œ: ${problem.question}\n\n`;
                    resultEl.textContent += `í•´ì„¤: ${problem.solution}\n\n`;
                    
                    if (data.usage) {
                        resultEl.textContent += `í† í° ì‚¬ìš©ëŸ‰: ${data.usage.total_tokens}`;
                    }
                } else {
                    statusEl.className = 'status error';
                    statusEl.textContent = 'ì‹¤íŒ¨';
                    resultEl.textContent = `âŒ ìƒì„± ì‹¤íŒ¨\n\n${data.error?.message || JSON.stringify(data)}`;
                }
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = 'ì˜¤ë¥˜';
                resultEl.textContent = `âŒ ì˜¤ë¥˜ ë°œìƒ\n\n${error.message}`;
            } finally {
                btnEl.disabled = false;
            }
        }
    </script>
</body>
</html>